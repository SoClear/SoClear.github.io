{"version":3,"sources":["utils/serviceUtils/storageUtil.tsx","store/actions/manager.tsx","store/actions/book.tsx","store/actions/backupPage.tsx","store/actions/progressPanel.tsx","store/actions/reader.tsx","store/actions/sidebar.tsx","store/actions/viewArea.tsx","utils/readUtils/recordLocation.tsx","utils/fileUtils/bookUtil.tsx","utils/readUtils/recordRecent.tsx","utils/serviceUtils/mouseEvent.tsx","utils/serviceUtils/docUtil.tsx","constants/dropdownList.tsx","utils/readUtils/addTrash.tsx","utils/readUtils/sortUtil.tsx","utils/syncUtils/common.tsx","utils/readUtils/styleUtil.tsx","constants/themeList.tsx","utils/serviceUtils/urlUtil.tsx","utils/readUtils/readingTime.tsx","constants/settingList.tsx","utils/readUtils/tagUtil.tsx","components/emptyCover/index.tsx","components/noteTag/component.tsx","components/noteTag/index.tsx","utils/fileUtils/pdfUtil.tsx","model/Note.ts","components/popups/popupNote/component.tsx","components/popups/popupNote/index.tsx","components/colorOption/component.tsx","components/colorOption/index.tsx","constants/popupList.tsx","components/popups/popupOption/component.tsx","components/popups/popupOption/index.tsx","constants/translationList.tsx","components/popups/popupTrans/component.tsx","components/popups/popupTrans/index.tsx","components/popups/popupMenu/component.tsx","components/popups/popupMenu/index.tsx","components/deleteIcon/component.tsx","components/deleteIcon/index.tsx","model/Book.ts","utils/serviceUtils/searchUtil.tsx","components/searchBox/component.tsx","components/searchBox/index.tsx","utils/fileUtils/xmlUtil.tsx","utils/readUtils/linkUtil.tsx","utils/serviceUtils/langUtil.tsx","utils/readUtils/themeUtil.tsx","components/readerSettings/themeList/component.tsx","components/readerSettings/themeList/index.tsx","components/readerSettings/sliderList/component.tsx","components/readerSettings/sliderList/index.tsx","components/readerSettings/dropdownList/component.tsx","components/readerSettings/dropdownList/index.tsx","components/readerSettings/modeControl/component.tsx","components/readerSettings/modeControl/index.tsx","components/textToSpeech/component.tsx","components/textToSpeech/index.tsx","components/readerSettings/settingSwitch/component.tsx","components/readerSettings/settingSwitch/index.tsx","containers/panels/settingPanel/component.tsx","containers/panels/settingPanel/index.tsx","containers/lists/contentList/component.tsx","containers/lists/contentList/index.tsx","containers/lists/navList/component.tsx","containers/lists/navList/index.tsx","containers/panels/navigationPanel/component.tsx","containers/panels/navigationPanel/index.tsx","model/Bookmark.ts","containers/panels/operationPanel/component.tsx","containers/panels/operationPanel/index.tsx","components/imageViewer/component.tsx","components/imageViewer/index.tsx","components/background/component.tsx","components/background/index.tsx","components/dialogs/deletePopup/component.tsx","components/dialogs/deletePopup/index.tsx","containers/epubReader/component.tsx","containers/htmlViewer/component.tsx","constants/mimetype.tsx","utils/fileUtils/rtfUtil.tsx","containers/epubViewer/component.tsx","containers/epubViewer/index.tsx","containers/pageWidget/component.tsx","containers/pageWidget/index.tsx","containers/panels/progressPanel/component.tsx","containers/panels/progressPanel/index.tsx","i18n.tsx","store/reducers/book.tsx","store/reducers/manager.tsx","store/reducers/progressPanel.tsx","store/reducers/reader.tsx","store/reducers/viewArea.tsx","store/reducers/sidebar.tsx","store/reducers/backupPage.tsx","store/index.tsx","constants/sideMenu.tsx","containers/sidebar/component.tsx","containers/sidebar/index.tsx","utils/fileUtils/md5Util.tsx","utils/fileUtils/epubUtil.tsx","utils/fileUtils/fileUtil.tsx","components/importLocal/component.tsx","components/importLocal/index.tsx","components/dialogs/updateInfo/component.tsx","components/dialogs/updateInfo/index.tsx","utils/syncUtils/restoreUtil.tsx","utils/syncUtils/backupUtil.tsx","containers/header/component.tsx","containers/header/index.tsx","utils/readUtils/deleteUtil.tsx","utils/readUtils/shelfUtil.tsx","utils/readUtils/addFavorite.tsx","components/dialogs/deleteDialog/component.tsx","components/dialogs/deleteDialog/index.tsx","components/dialogs/editDialog/component.tsx","components/dialogs/editDialog/index.tsx","components/dialogs/addDialog/component.tsx","components/dialogs/addDialog/index.tsx","components/dialogs/sortDialog/component.tsx","components/dialogs/sortDialog/index.tsx","components/dialogs/aboutDialog/component.tsx","components/dialogs/aboutDialog/index.tsx","constants/driveList.tsx","utils/syncUtils/dropbox.tsx","utils/syncUtils/webdav.tsx","components/dialogs/tokenDialog/component.tsx","components/dialogs/tokenDialog/index.tsx","components/dialogs/backupDialog/component.tsx","components/dialogs/backupDialog/index.tsx","components/dialogs/settingDialog/component.tsx","components/dialogs/settingDialog/index.tsx","components/dialogs/actionDialog/component.tsx","components/dialogs/actionDialog/index.tsx","components/bookCardItem/component.tsx","components/bookCardItem/index.tsx","components/bookListItem/component.tsx","components/bookListItem/index.tsx","components/bookCoverItem/component.tsx","components/bookCoverItem/index.tsx","constants/emptyList.tsx","containers/emptyPage/component.tsx","containers/emptyPage/index.tsx","constants/viewMode.tsx","components/viewMode/component.tsx","components/viewMode/index.tsx","components/selectBook/component.tsx","components/selectBook/index.tsx","components/shelfSelector/component.tsx","components/shelfSelector/index.tsx","containers/lists/bookList/component.tsx","containers/lists/bookList/index.tsx","containers/lists/deletedBookList/component.tsx","containers/lists/deletedBookList/index.tsx","containers/lists/cardList/component.tsx","containers/lists/cardList/index.tsx","containers/lists/noteList/component.tsx","containers/lists/noteList/index.tsx","containers/lists/digestList/component.tsx","containers/lists/digestList/index.tsx","containers/loadingPage/component.tsx","containers/loadingPage/index.tsx","router/routes.tsx","components/arrow/index.tsx","components/dialogs/loadingDialog/index.tsx","components/dialogs/TipDialog/component.tsx","components/dialogs/TipDialog/index.tsx","pages/manager/component.tsx","pages/manager/index.tsx","containers/epubReader/index.tsx","pages/epubPage/component.tsx","pages/epubPage/index.tsx","containers/panels/htmlProgressPanel/component.tsx","containers/panels/htmlProgressPanel/index.tsx","containers/htmlViewer/index.tsx","pages/htmlReader/component.tsx","pages/htmlReader/index.tsx","components/backToMain/index.tsx","pages/djvuReader/component.tsx","pages/djvuReader/index.tsx","pages/pdfReader/component.tsx","pages/pdfReader/index.tsx","pages/redirect/component.tsx","pages/redirect/index.tsx","router/index.tsx","utils/serviceUtils/analytics.tsx","utils/serviceUtils/launchUtil.tsx","index.tsx"],"names":["StorageUtil","key","JSON","parse","localStorage","getItem","value","readerConfig","setItem","stringify","kookitConfig","handleBooks","books","type","payload","handleDeletedBooks","deletedBooks","handleSearchResults","searchResults","handleSearch","isSearch","handleTipDialog","isTipDialog","handleTip","tip","handleSetting","isSettingOpen","handleAbout","isAboutOpen","handleSortDisplay","isSortDisplay","handleLoadingDialog","isShowLoading","handleNewDialog","isShowNew","handleSelectBook","isSelectBook","handleSelectedBooks","selectedBooks","handleNewWarning","isNewWarning","handleBookSort","isBookSort","handleNoteSort","isNoteSort","handleBookSortCode","bookSortCode","handleNoteSortCode","noteSortCode","handleFetchBooks","isTrash","dispatch","localforage","err","bookArr","keyArr","AddTrash","getAllTrash","handleKeyFilter","handleKeyRemove","handleFetchBookSortCode","SortUtil","getBookSortCode","handleFetchNoteSortCode","getNoteSortCode","handleFetchList","viewMode","getReaderConfig","items","arr","itemArr","item","indexOf","push","handleEditDialog","mode","handleDeleteDialog","handleAddDialog","handleRenderFunc","renderFunc","handleActionDialog","handleReadingState","state","handleReadingBook","book","handleReadingEpub","epub","handleDragItem","handleBackupDialog","handleTokenDialog","handlePercentage","percentage","handleFetchPercentage","format","RecordLocation","getCfi","getHtmlLocation","handleFetchLocations","locations","generate","then","result","catch","console","log","handleOriginalText","originalText","handleColor","color","handleBookmarks","bookmarks","handleHtmlBook","htmlBook","handleCurrentChapter","currentChapter","handleNoteKey","handleFetchNotes","noteArr","filter","notes","flatChapter","chapters","newChapter","i","length","subitems","concat","handleFetchChapters","loaded","navigation","handleChapters","toc","handleFetchBookmarks","bookmarkArr","bookKey","handleShelfIndex","shelfIndex","handleCollapse","isCollapsed","handleMode","handleOpenMenu","isOpenMenu","handleMenuMode","menuMode","handleChangeDirection","isChangeDirection","handleShowBookmark","isShowBookmark","handleSelection","selection","cfi","json","obj","text","chapterTitle","count","document","location","href","fingerprint","files","_","findLastIndex","_obj","window","Kookit","MobiRender","Azw3Render","BookUtil","buffer","isElectron","fs","require","path","dataPath","ipcRenderer","sendSync","Promise","resolve","reject","reader","FileReader","readAsArrayBuffer","Blob","onload","event","a","target","writeFileSync","join","Buffer","from","onerror","remove","e","removeItem","bookPath","_bookPath","existsSync","isArrayBuffer","data","readFileSync","blobTemp","fileTemp","File","lastModified","Date","getTime","Uint8Array","this","isBookExist","toast","error","ref","toLowerCase","invoke","url","split","isMergeWord","isFullscreen","isPreventSleep","open","name","__dirname","pdfLocation","URL","navigator","platform","bookName","extension","md5","size","file_content","cover","author","description","publisher","charset","getPDFCover","getMetadata","compression","chardet","detect","fb2Str","iconv","decode","xmlMetadata","fb2Obj","toUpperCase","BookModel","RecordRecent","index","splice","unshift","forEach","Hammer","sleep","ms","setTimeout","throttleTime","getSelection","doc","getIframeDoc","sel","toString","trim","lock","arrowKeys","rendition","keyCode","querySelector","preventDefault","prev","next","handleShortcut","mouseChrome","wheelDelta","setReaderConfig","gesture","EpubMouseEvent","readerMode","on","addEventListener","bindEpubEvent","HtmlMouseEvent","position","getPosition","recordHtmlLocation","record","bindHtmlEvent","pdfMouseEvent","pageArea","getElementById","iframe","getElementsByTagName","contentWindow","contentDocument","defaultView","djvuMouseEvent","getPDFIframeDoc","iWin","dropdownList","id","title","option","speedList","getBookName","map","getAuthorName","getBookKey","getBookIndex","nameArr","oldNameArr","indexArr","sort","order","reverse","durationKeys","durationObj","ReadingTime","getAllTime","sortable","b","Object","keys","getDurationArr","bookKeys","union","oldAuthorArr","authorArr","percentagenKeys","locationObj","getAllCfi","getPercentageArr","clone","dateArr","uniq","date","year","month","day","noteObj","note","sortCode","orderCode","JSZip","configArr","getParamsFromUrl","hashParams","r","q","hash","substring","search","exec","decodeURIComponent","changePath","oldPath","newPath","readdir","isConfiged","file","copy","emptyDirSync","syncData","blob","isSync","AdmZip","extractAllTo","deleteBooks","all","zipBook","zip","bookZip","folder","fetchBook","results","unzipConfig","loadAsync","content","async","unzipBook","addBook","zipConfig","styleUtil","css","getDefaultCss","background","setAttribute","head","style","createElement","textContent","appendChild","colors","lines","isJSON","addStyle","rel","backgroundList","textList","themeList","openExternalUrl","shell","openExternal","time","settingList","desc","propName","langList","label","searchList","skinList","readerSettingList","TagUtil","tagName","tagArr","emptyCover","props","className","transform","scale","backgroundColor","fontSize","NoteTag","tagToIndex","tag","temp","getAllTags","indextoTag","tagIndex","handleChangeTag","indexResult","setState","handleTag","handleAddTag","isInput","setTags","handleInput","focus","handleShowTags","bool","isShowTags","offsetTop","deleteIndex","isReading","nextProps","width","isCard","Trans","onClick","onBlur","React","Component","actionCreator","connect","noteKey","withTranslation","pdfjsLib","getHightlightCoords","pageIndex","PDFViewerApplication","pdfViewer","currentPageNumber","page","getPageView","pageRect","canvas","getClientRects","selectionRects","getRangeAt","viewport","tempRect","bottom","top","left","right","Math","abs","coords","convertToPdfPoint","x","y","getDocument","promise","pdfDoc","getPage","getViewport","context","getContext","height","viewBox","render","canvasContext","toDataURL","Note","chapter","chapterIndex","range","getFullYear","getMonth","getDate","PopupNote","handleClose","noteIndex","success","t","textArea","currentBook","getPDFLocation","charRange","rangy","saveCharacterRanges","body","replace","createNote","currentEpub","flattenChapters","ColorOption","handleChangeOption","isLine","border","borderBottom","About","popupList","icon","PopupOption","handleNote","handleEdge","offsetLeft","clientWidth","popupMenu","posX","posY","parseInt","substr","rightEdge","pageWidth","handleCopy","empty","handleTrans","handleDigest","digest","handleJump","handleSearchInternet","language","handleSearchBook","leftPanel","clickEvent","MouseEvent","view","bubbles","cancelable","dispatchEvent","focusEvent","searchBox","searchIcon","keyEvent","KeyboardEvent","handleSpeak","msg","SpeechSynthesisUtterance","voice","speechSynthesis","getVoices","speak","trigger","viewArea","translationList","lang","PopupTrans","script","src","handleCallback","res","error_code","translatedText","trans_result","dst","display","onChange","targetLang","selected","PopupMenu","highlighter","timer","showNote","isFirstShow","rect","getHighlighter","createHighlighter","config","ignoreWhiteSpace","elementTagName","elementProperties","onclick","handleNoteClick","onElementCreate","element","dataset","applier","createClassApplier","addClassApplier","removeAllRanges","addRange","getBoundingClientRect","showMenu","handleClickHighlighter","currentTarget","stopPropagation","handlePDFClick","getAttribute","showHighlight","colorCode","div","textLayer","textLayerDiv","pageElement","bounds","convertToViewportRectangle","el","min","dialog","handleShowDelete","deleteKey","pageHeight","renderHighlighters","highlighters","highlightersByChapter","removeAllHighlights","classes","restoreCharacterRanges","highlightSelection","warn","openMenu","handleHighlight","PopupProps","digests","DeleteIcon","handleDelete","deleteItems","deleteFunc","itemKey","clear","handleDeletePopup","isOpenDelete","deletePopupProps","handleDeleteOpearion","Book","SearchUtil","arr1","arr2","_arr","flag","list","keyWord","keyword","bookNameArr","AuthorNameArr","bookResults","fuzzyQuery","authorResults","MergeArray","textArr","noteResults","textResults","SearchBox","handleMouse","refs","isNavSearch","handleSearchState","tabMode","MouseNoteSearch","MouseSearch","handleKey","KeyNoteSearch","KeySearch","doSearch","excerpt","handleSearchList","spine","spineItems","load","bind","find","finally","unload","apply","handleCancel","onKeyDown","onFocus","placeholder","paddingRight","manager","sidebar","xml","objBook","xml2js","Parser","parseString","fictionBook","FictionBook","bookDesc","binary","xmlBookParser","bookString","bookStart","match","bookBody","slice","xmlImageHandler","strArr","j","startsWith","handleLinkJump","parentNode","innerText","tsTransform","querySelectorAll","innerHTML","Chinese","s2t","t2s","ThemeUtil","themeName","themeArr","ThemeList","handleChangeBgColor","currentBackgroundIndex","reload","handleChooseBgColor","StyleUtil","addDefaultCss","handleColorTextPicker","isShowTextPicker","getAllThemes","findIndex","setThemes","handleColorBgPicker","isShowBgPicker","handleChooseTextColor","currentTextIndex","themes","default","enableAlpha","margin","animation","SliderList","handleRest","onValueChange","letterSpacing","paraSpacing","brightness","onValueInput","handleMinus","step","parseFloat","handleAdd","defaultValue","marginLeft","minLabel","max","maxValue","minValue","onInput","onMouseUp","maxLabel","DropdownList","currentFontFamilyIndex","currentLineHeightIndex","currentTextAlignIndex","chineseConversionIndex","getFonts","disableQuoting","children","handleView","subItem","ModeControl","handleChangeMode","opacity","TextToSpeech","handleChangeAudio","isAudioOn","cancel","synth","setInterval","clearInterval","isSupported","voices","handleAudio","currentLocation","cfibase","start","cfistart","cfiend","end","cfiRange","getRange","handleSpeech","voiceIndex","speed","rate","onend","transition","marginTop","fontWeight","progressPanel","SettingSwitch","_handleRest","_handleChange","stateName","handleChange","isBold","isIndent","isSliding","isUnderline","isShadow","isItalic","isInvert","isHideBackground","isHideFooter","isHideHeader","isHidePageButton","isHideMenuButton","SettingPanel","handleLock","isSettingLocked","float","ContentList","currentIndex","isExpandContent","_href","goToChapter","renderContentList","level","NavList","bookLocation","goToPosition","currentData","currentTab","bookmarkProps","onMouseEnter","onMouseLeave","floor","cursor","NavigationPanel","handleChangeTab","isNavLocked","renderSearchList","renderSearchPage","startIndex","pageList","total","ceil","isShow","searchProps","alt","Bookmark","OperationPanel","timeStamp","isFullScreen","isBookmark","currentPercentage","timeLeft","now","displayed","exitHandler","webkitIsFullScreen","mozFullScreen","msFullscreenElement","handleExitFullScreen","handleFullScreen","setTime","de","documentElement","requestFullscreen","mozRequestFullScreen","webkitRequestFullscreen","msRequestFullscreen","fullscreenElement","exitFullscreen","msExitFullscreen","mozCancelFullScreen","webkitExitFullscreen","chapterHref","bookmark","i18nKey","handleExit","history","close","handleAddBookmark","handleScreen","withRouter","ImageViewer","showImage","handleLeaveReader","isShowImage","zoomIndex","rotateIndex","imageRatio","img","Image","direction","naturalWidth","naturalHeight","image","hideImage","handleZoomIn","handleZoomOut","handleSave","fetch","FileSaver","saveAs","toLocaleDateString","handleClock","handleCounterClock","Background","isFirst","isSingle","boxShadow","DeletePopup","handleComfirm","Reader","messageTimer","tickTimer","handleRenderBook","init","renderTo","flow","snap","spread","handleEnterReader","isOpenRightPanel","isOpenLeftPanel","isOpenTopPanel","isOpenBottomPanel","nextPage","prevPage","hoverPanel","isTouch","isPreventTrigger","doit","clearTimeout","global","renderedBook","renditionProps","TxtRender","StrRender","ComicRender","Unrar","Viewer","handleMobi","handleAzw3","handleTxt","handleMD","handleFb2","handleRtf","handleDocx","handleHtml","handleCbr","handleCbt","handleCbz","RecentBooks","setRecent","setStyle","getCustomCss","getChapter","getPageSize","unrar","entries","getEntries","getElementsByClassName","contents","untar","extractedFiles","extractedFile","handleCharset","evt","docStr","marked","readAsText","rtfToHTML","fromString","html","removeExtraQuestionMark","mammoth","convertToHtml","arrayBuffer","bookObj","mimetype","toLocaleLowerCase","ab","buf","alloc","byteLength","overflowY","overflowX","svg","png","jpg","jpeg","gif","webp","rar","tar","htm","xhtml","replaceAll","EpubViewer","percentageFromCfi","recordCfi","_layout","popupMenuProps","imageViewerProps","ViewArea","ProgressPanel","onProgressChange","cfiFromPercentage","onProgressInput","displayPercentage","previourChapter","currentChapterIndex","section","nextChapter","handleJumpChapter","handleJumpPage","currentPage","totalPage","round","onTouchEnd","resources","en","translation","translationEN","zh","translationCN","cht","translationTW","ru","translationRU","es","fr","translationFR","fa","ptBR","i18n","use","initReactI18next","lng","fallbackLng","keySeparator","interpolation","escapeValue","initState","isOpenEditDialog","isOpenDeleteDialog","isOpenAddDialog","isOpenActionDialog","dragItem","message","isBackup","isOpenTokenDialog","rootReducer","combineReducers","action","isRedirect","isOpenHighlight","dialogLocation","backupPage","store","createStore","compose","applyMiddleware","thunk","devToolsExtension","f","sideMenu","Sidebar","handleSidebar","handleHover","hoverIndex","distance","fetchMD5","fileReader","ev","_pdfInfo","blobSlice","prototype","mozSlice","webkitSlice","chunkSize","chunks","currentChunk","spark","SparkMD5","Error","appendBinary","loadNext","readAsBinaryString","call","addEpub","filePath","ePub","metadata","coverUrl","readAsDataURL","onloadend","creator","fetchMD5FromPath","crypto","md5sum","createHash","s","ReadStream","d","update","fetchFileFromPath","readFile","clickFilePath","ImportLocal","handleFilePath","isRepeat","repeatBook","isOpenFile","getMd5WithBrowser","getBookUrl","RedirectBook","handleAddBook","handleBook","generateBook","_filePath","onDrop","acceptedFiles","handleDrag","accept","multiple","getRootProps","getInputProps","newOptions","loop","autoplay","animationData","animationNew","rendererSettings","preserveAspectRatio","successOptions","animationSuccess","UpdateInfo","renderList","isUpdated","updateLog","axios","get","newVersion","version","localeCompare","options","marginBottom","new","fix","restore","backup","generateAsync","Header","syncFromLocation","storageLocation","sourcePath","outPath","isdataChange","lastSyncTime","handleSync","syncToLocation","timestamp","isOnlyLocal","isNewVersion","dirPath","mkdirSync","DeleteUtil","defaultShelf","New","Study","Work","Entertainment","ShelfUtil","shelfTitle","undefined","currentShelfTitle","shelfList","AddFavorite","DeleteDialog","handleDeleteOther","deleteBookmarks","deleteNotes","clearShelf","deleteBook","setTrash","deletefromAllShelf","EditDialog","isCheck","nameBox","authorBox","AddDialog","inputElement","isNaN","getShelf","shelfTitles","isNew","hasOwnProperty","setShelf","renderShelfList","disabled","SortDialog","handleSort","code","isNote","setNoteSortCode","setBookSortCode","handleOrder","AboutDialog","callback_url","token_url","dropbox_client_id","googledrive_client_id","onedrive_client_id","driveList","Dropbox","DropboxUtil","ACCESS_TOKEN","dbx","accessToken","filesUpload","response","filesListFolder","folderArr","filesDownload","fileBlob","lastModifiedDate","WebdavUtil","UploadFile","createClient","username","password","client","wfs","exists","createDirectory","writeFile","copyFile","DownloadFile","request","downloadLink","getFileDownloadLink","stream","createWriteStream","pipe","TokenDialog","handleTokenComfirm","token","driveName","handleDavComfirm","BackupDialog","handleFinish","currentStep","showMessage","handleRestoreToLocal","handleDrive","currentDrive","dialogProps","SettingDialog","changeLanguage","changeSearch","searchEngine","changeSkin","skin","changeFont","font","handleChangeLocation","filePaths","handleTheme","currentThemeIndex","handleMergeWord","isOpenInMain","handleOpenInMain","isImportPath","isAutoFullscreen","isPreventAdd","isOpenBook","isDisableUpdate","appSkin","isDisableAnalytics","isUseBuiltIn","isPDFCover","ActionDialog","handleDeleteBook","handleEditBook","handleAddShelf","handleRestoreBook","maxHeight","paddingTop","toFixed","toLocaleString","getBookPosition","BookCardItem","handleMoreAction","clientX","clientHeight","clientY","handleLoveBook","setFavorite","isFavorite","handleCancelLoveBook","getAllFavorite","handleConfig","isOpenConfig","isSelected","getAllRecent","actionProps","onMouseOver","onContextMenu","BookListItem","handleResoreBook","isDeleteDialog","BookItem","BookCoverItem","emptyList","main","sub","EmptyPage","visibility","ViewMode","SelectBook","favoriteBooks","ShelfChooser","handleShelfItem","handleDeleteShelf","removeShelf","BookList","handleIndexFilter","renderBookList","handleShelf","sortBooks","zIndex","to","currentShelfList","CardList","handleBookName","recordPDFLocation","cards","sortNotes","cardProps","overflow","NoteList","handleFilter","filterTag","noteProps","DigestList","LoadingPage","routes","component","DeletedBookList","Arrow","xmlns","fill","stroke","strokeWidth","cx","cy","y2","strokeLinecap","defaultOptions","LoadingDialog","downloadOptions","TipDialog","Manager","isDrag","totalBooks","isAuthed","isError","isCopied","isMobileOnly","onDragEnter","ele","EpubReader","prevChapter","handleDjvu","ViewerInstance","DjVu","loadDocument","loading","getPDFUrl","scrollWidth","scrollHeight","status","callback","Redirect","alert","params","access_token","Router","useEffect","DjvuReader","HtmlReader","PDFReader","_Redirect","ga","clientId","GA","debug","process","set","pkg","one","mac","getClientId","pageview","evCategory","evAction","clientID","exDesc","exFatal","exception","elem","removeChild","isNight","matchMedia","matches","initTheme","ReactDOM","evLabel","removeScript","applyTheme"],"mappings":"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","file":"static/js/main.79f4565b.chunk.js","sourcesContent":["class StorageUtil {\n  static getReaderConfig(key: string) {\n    let readerConfig = JSON.parse(localStorage.getItem(\"readerConfig\")!) || {};\n    return readerConfig[key];\n  }\n\n  static setReaderConfig(key: string, value: string) {\n    let readerConfig = JSON.parse(localStorage.getItem(\"readerConfig\")!) || {};\n    readerConfig[key] = value;\n    localStorage.setItem(\"readerConfig\", JSON.stringify(readerConfig));\n  }\n  static getKookitConfig(key: string) {\n    let kookitConfig = JSON.parse(localStorage.getItem(\"kookitConfig\")!) || {};\n    return kookitConfig[key];\n  }\n\n  static setKookitConfig(key: string, value: string) {\n    let kookitConfig = JSON.parse(localStorage.getItem(\"kookitConfig\")!) || {};\n    kookitConfig[key] = value;\n    localStorage.setItem(\"kookitConfig\", JSON.stringify(kookitConfig));\n  }\n}\n\nexport default StorageUtil;\n","import localforage from \"localforage\";\nimport StorageUtil from \"../../utils/serviceUtils/storageUtil\";\nimport SortUtil from \"../../utils/readUtils/sortUtil\";\nimport BookModel from \"../../model/Book\";\nimport { Dispatch } from \"redux\";\nimport AddTrash from \"../../utils/readUtils/addTrash\";\n\nexport function handleBooks(books: BookModel[]) {\n  return { type: \"HANDLE_BOOKS\", payload: books };\n}\nexport function handleDeletedBooks(deletedBooks: BookModel[]) {\n  return { type: \"HANDLE_DELETED_BOOKS\", payload: deletedBooks };\n}\nexport function handleSearchResults(searchResults: number[]) {\n  return { type: \"HANDLE_SEARCH_BOOKS\", payload: searchResults };\n}\nexport function handleSearch(isSearch: boolean) {\n  return { type: \"HANDLE_SEARCH\", payload: isSearch };\n}\nexport function handleTipDialog(isTipDialog: boolean) {\n  return { type: \"HANDLE_TIP_DIALOG\", payload: isTipDialog };\n}\nexport function handleTip(tip: string) {\n  return { type: \"HANDLE_TIP\", payload: tip };\n}\nexport function handleSetting(isSettingOpen: boolean) {\n  return { type: \"HANDLE_SETTING\", payload: isSettingOpen };\n}\nexport function handleAbout(isAboutOpen: boolean) {\n  return { type: \"HANDLE_ABOUT\", payload: isAboutOpen };\n}\nexport function handleViewMode(mode: string) {\n  return { type: \"HANDLE_VIEW_MODE\", payload: mode };\n}\n\nexport function handleSortDisplay(isSortDisplay: boolean) {\n  return { type: \"HANDLE_SORT_DISPLAY\", payload: isSortDisplay };\n}\nexport function handleLoadingDialog(isShowLoading: boolean) {\n  return { type: \"HANDLE_SHOW_LOADING\", payload: isShowLoading };\n}\nexport function handleNewDialog(isShowNew: boolean) {\n  return { type: \"HANDLE_SHOW_NEW\", payload: isShowNew };\n}\nexport function handleSelectBook(isSelectBook: boolean) {\n  return { type: \"HANDLE_SELECT_BOOK\", payload: isSelectBook };\n}\nexport function handleSelectedBooks(selectedBooks: string[]) {\n  return { type: \"HANDLE_SELECTED_BOOKS\", payload: selectedBooks };\n}\nexport function handleNewWarning(isNewWarning: boolean) {\n  return { type: \"HANDLE_NEW_WARNING\", payload: isNewWarning };\n}\nexport function handleBookSort(isBookSort: boolean) {\n  return { type: \"HANDLE_BOOK_SORT\", payload: isBookSort };\n}\nexport function handleNoteSort(isNoteSort: boolean) {\n  return { type: \"HANDLE_NOTE_SORT\", payload: isNoteSort };\n}\nexport function handleBookSortCode(bookSortCode: {\n  sort: number;\n  order: number;\n}) {\n  return { type: \"HANDLE_SORT_CODE\", payload: bookSortCode };\n}\n\nexport function handleNoteSortCode(noteSortCode: {\n  sort: number;\n  order: number;\n}) {\n  return { type: \"HANDLE_NOTE_SORT_CODE\", payload: noteSortCode };\n}\n\nexport function handleFetchBooks(isTrash = false) {\n  return (dispatch: Dispatch) => {\n    localforage.getItem(\"books\", (err, value) => {\n      let bookArr: any = value;\n      let keyArr = AddTrash.getAllTrash();\n      if (isTrash) {\n        dispatch(handleDeletedBooks(handleKeyFilter(bookArr, keyArr)));\n      } else {\n        dispatch(handleBooks(handleKeyRemove(bookArr, keyArr)));\n      }\n    });\n  };\n}\nexport function handleFetchBookSortCode() {\n  return (dispatch: Dispatch) => {\n    let bookSortCode = SortUtil.getBookSortCode();\n    dispatch(handleBookSortCode(bookSortCode));\n  };\n}\nexport function handleFetchNoteSortCode() {\n  return (dispatch: Dispatch) => {\n    let noteSortCode = SortUtil.getNoteSortCode();\n    dispatch(handleNoteSortCode(noteSortCode));\n  };\n}\nexport function handleFetchList() {\n  return (dispatch: Dispatch) => {\n    let viewMode = StorageUtil.getReaderConfig(\"viewMode\") || \"card\";\n    dispatch(handleViewMode(viewMode));\n  };\n}\nconst handleKeyRemove = (items: any[], arr: string[]) => {\n  if (!items) return [];\n  let itemArr: any[] = [];\n  if (!arr[0]) {\n    return items;\n  }\n  for (let item of items) {\n    if (arr.indexOf(item.key) === -1) {\n      itemArr.push(item);\n    }\n  }\n\n  return itemArr;\n};\nconst handleKeyFilter = (items: any[], arr: string[]) => {\n  if (!items) {\n    return [];\n  }\n  let itemArr: any[] = [];\n  for (let item of items) {\n    if (arr.indexOf(item.key) > -1) {\n      itemArr.push(item);\n    }\n  }\n  return itemArr;\n};\n","import BookModel from \"../../model/Book\";\nexport function handleEditDialog(mode: boolean) {\n  return { type: \"HANDLE_EDIT_DIALOG\", payload: mode };\n}\nexport function handleDeleteDialog(mode: boolean) {\n  return { type: \"HANDLE_DELETE_DIALOG\", payload: mode };\n}\nexport function handleAddDialog(mode: boolean) {\n  return { type: \"HANDLE_ADD_DIALOG\", payload: mode };\n}\nexport function handleRenderFunc(renderFunc: () => void) {\n  return { type: \"HANDLE_RENDER_FUNC\", payload: renderFunc };\n}\nexport function handleActionDialog(mode: boolean) {\n  return { type: \"HANDLE_ACTION_DIALOG\", payload: mode };\n}\nexport function handleReadingState(state: boolean) {\n  return { type: \"HANDLE_READING_STATE\", payload: state };\n}\nexport function handleReadingBook(book: BookModel) {\n  return { type: \"HANDLE_READING_BOOK\", payload: book };\n}\nexport function handleReadingEpub(epub: any) {\n  return { type: \"HANDLE_READING_EPUB\", payload: epub };\n}\nexport function handleDragItem(key: string) {\n  return { type: \"HANDLE_DRAG_ITEM\", payload: key };\n}\n","export function handleBackupDialog(mode: boolean) {\n  return { type: \"HANDLE_BACKUP\", payload: mode };\n}\nexport function handleTokenDialog(mode: boolean) {\n  return { type: \"HANDLE_TOKEN_DIALOG\", payload: mode };\n}\n","import RecordLocation from \"../../utils/readUtils/recordLocation\";\nimport BookModel from \"../../model/Book\";\nexport function handleLocations(locations: any) {\n  return { type: \"HANDLE_LOCATIONS\", payload: locations };\n}\nexport function handlePercentage(percentage: number) {\n  return { type: \"HANDLE_PERCENTAGE\", payload: percentage };\n}\nexport function handleFetchPercentage(book: BookModel) {\n  return (dispatch: (arg0: { type: string; payload: any }) => void) => {\n    let percentage =\n      book.format === \"EPUB\"\n        ? RecordLocation.getCfi(book.key).percentage\n        : RecordLocation.getHtmlLocation(book.key).percentage;\n\n    dispatch(handlePercentage(percentage));\n  };\n}\nexport function handleFetchLocations(epub: any) {\n  return (dispatch: (arg0: { type: string; payload: any }) => void) => {\n    epub.locations\n      .generate()\n      .then((result: any) => {\n        dispatch(handleLocations(epub.locations));\n      })\n      .catch(() => {\n        console.log(\"Error occurs\");\n      });\n  };\n}\n","import localforage from \"localforage\";\nimport NoteModel from \"../../model/Note\";\nimport BookmarkModel from \"../../model/Bookmark\";\nimport HtmlBookModel from \"../../model/HtmlBook\";\nimport AddTrash from \"../../utils/readUtils/addTrash\";\nexport function handleNotes(notes: NoteModel[]) {\n  return { type: \"HANDLE_NOTES\", payload: notes };\n}\nexport function handleOriginalText(originalText: string) {\n  return { type: \"HANDLE_ORIGINAL_TEXT\", payload: originalText };\n}\nexport function handleColor(color: number) {\n  return { type: \"HANDLE_COLOR\", payload: color };\n}\nexport function handleBookmarks(bookmarks: BookmarkModel[]) {\n  return { type: \"HANDLE_BOOKMARKS\", payload: bookmarks };\n}\nexport function handleDigests(digests: NoteModel[]) {\n  return { type: \"HANDLE_DIGESTS\", payload: digests };\n}\nexport function handleHtmlBook(htmlBook: HtmlBookModel) {\n  return { type: \"HANDLE_HTML_BOOK\", payload: htmlBook };\n}\nexport function handleCurrentChapter(currentChapter: string) {\n  return { type: \"HANDLE_CURRENT_CHAPTER\", payload: currentChapter };\n}\nexport function handleChapters(chapters: any) {\n  return { type: \"HANDLE_CHAPTERS\", payload: chapters };\n}\nexport function handleFlattenChapters(flattenChapters: any) {\n  return { type: \"HANDLE_FLATTEN_CHAPTERS\", payload: flattenChapters };\n}\nexport function handleNoteKey(key: string) {\n  return { type: \"HANDLE_NOTE_KEY\", payload: key };\n}\nexport function handleFetchNotes() {\n  return (dispatch: (arg0: { type: string; payload: NoteModel[] }) => void) => {\n    localforage.getItem(\"notes\", (err, value) => {\n      let noteArr: any;\n      if (value === null || value === []) {\n        noteArr = [];\n      } else {\n        noteArr = value;\n      }\n      let keyArr = AddTrash.getAllTrash();\n      dispatch(handleNotes(handleKeyRemove(noteArr, keyArr)));\n      dispatch(\n        handleDigests(\n          handleKeyRemove(\n            noteArr.filter((item: NoteModel) => {\n              return item.notes === \"\";\n            }),\n            keyArr\n          )\n        )\n      );\n    });\n  };\n}\nexport function flatChapter(chapters: any) {\n  let newChapter: any = [];\n  for (let i = 0; i < chapters.length; i++) {\n    if (chapters[i].subitems[0]) {\n      newChapter.push(chapters[i]);\n      newChapter = newChapter.concat(flatChapter(chapters[i].subitems));\n    } else {\n      newChapter.push(chapters[i]);\n    }\n  }\n  return newChapter;\n}\n\nexport function handleFetchChapters(epub: any) {\n  return (dispatch: (arg0: { type: string; payload: any }) => void) => {\n    epub.loaded.navigation\n      .then((chapters: any) => {\n        dispatch(handleChapters(chapters.toc));\n        dispatch(handleFlattenChapters(flatChapter(chapters.toc)));\n      })\n      .catch(() => {\n        console.log(\"Error occurs\");\n      });\n  };\n}\nexport function handleFetchBookmarks() {\n  return (\n    dispatch: (arg0: { type: string; payload: BookmarkModel[] }) => void\n  ) => {\n    localforage.getItem(\"bookmarks\", (err, value) => {\n      let bookmarkArr: any;\n      if (value === null || value === []) {\n        bookmarkArr = [];\n      } else {\n        bookmarkArr = value;\n      }\n      let keyArr = AddTrash.getAllTrash();\n      dispatch(handleBookmarks(handleKeyRemove(bookmarkArr, keyArr)));\n    });\n  };\n}\nconst handleKeyRemove = (items: any[], arr: string[]) => {\n  let itemArr: any[] = [];\n  if (!arr[0]) {\n    return items;\n  }\n  for (let i = 0; i < items.length; i++) {\n    if (arr.indexOf(items[i].bookKey) === -1) {\n      itemArr.push(items[i]);\n    }\n  }\n  return itemArr;\n};\n","export function handleShelfIndex(shelfIndex: number) {\n  return { type: \"HANDLE_SHELF_INDEX\", payload: shelfIndex };\n}\nexport function handleCollapse(isCollapsed: boolean) {\n  return { type: \"HANDLE_COLLAPSE\", payload: isCollapsed };\n}\nexport function handleMode(mode: string) {\n  return { type: \"HANDLE_MODE\", payload: mode };\n}\n","export function handleOpenMenu(isOpenMenu: boolean) {\n  return { type: \"HANDLE_OPEN_MENU\", payload: isOpenMenu };\n}\nexport function handleMenuMode(menuMode: string) {\n  return { type: \"HANDLE_MENU_MODE\", payload: menuMode };\n}\nexport function handleOpenHighlight(isOpenHighlight: boolean) {\n  return { type: \"HANDLE_OPEN_HIGHLIGHT\", payload: isOpenHighlight };\n}\nexport function handleChangeDirection(isChangeDirection: boolean) {\n  return { type: \"HANDLE_CHANGE_DIRECTION\", payload: isChangeDirection };\n}\nexport function handleShowBookmark(isShowBookmark: boolean) {\n  return { type: \"HANDLE_SHOW_BOOKMARK\", payload: isShowBookmark };\n}\nexport function handleSelection(selection: string) {\n  return { type: \"HANDLE_SELECTION\", payload: selection };\n}\n","import _ from \"underscore\";\n\nclass RecordLocation {\n  static recordCfi(bookKey: string, cfi: string, percentage: number) {\n    let json = localStorage.getItem(\"recordLocation\");\n    let obj = JSON.parse(json || \"{}\");\n    obj[bookKey] = { cfi: cfi, percentage: percentage };\n    localStorage.setItem(\"recordLocation\", JSON.stringify(obj));\n  }\n\n  static getCfi(bookKey: string) {\n    let json = localStorage.getItem(\"recordLocation\");\n    let obj = JSON.parse(json || \"{}\");\n    return obj[bookKey] || {};\n  }\n  static recordHtmlLocation(\n    bookKey: string,\n    text: string,\n    chapterTitle: string,\n    count: string,\n    percentage: string\n  ) {\n    if (\n      (!text || !chapterTitle || !count || !percentage) &&\n      document.location.href.indexOf(\"/cb\") === -1 //漫画的情况，cbr,cbt,cbz\n    )\n      return;\n    let json = localStorage.getItem(\"recordLocation\");\n    let obj = JSON.parse(json || \"{}\");\n    obj[bookKey] = { text, chapterTitle, count, percentage };\n    localStorage.setItem(\"recordLocation\", JSON.stringify(obj));\n  }\n\n  static getHtmlLocation(bookKey: string) {\n    let json = localStorage.getItem(\"recordLocation\");\n    let obj = JSON.parse(json || \"{}\");\n    return obj[bookKey] || {};\n  }\n  static getPDFLocation(fingerprint: string) {\n    let json = localStorage.getItem(\"pdfjs.history\");\n    let arr = JSON.parse(json || \"{}\").files || [];\n    return arr[_.findLastIndex(arr, { fingerprint })] || {};\n  }\n  static recordPDFLocation(fingerprint: string, obj: object) {\n    let json = localStorage.getItem(\"pdfjs.history\");\n    let _obj = JSON.parse(json || \"{}\");\n    _obj.files[_.findLastIndex(_obj.files, { fingerprint })] = obj;\n    localStorage.setItem(\"pdfjs.history\", JSON.stringify(_obj));\n  }\n  static getAllCfi() {\n    let json = localStorage.getItem(\"recordLocation\");\n    let obj = JSON.parse(json || \"{}\");\n    return obj;\n  }\n  static clear(bookKey: string) {\n    let json = localStorage.getItem(\"recordLocation\");\n    let obj = JSON.parse(json || \"{}\");\n    delete obj[bookKey];\n    localStorage.setItem(\"recordLocation\", JSON.stringify(obj));\n  }\n}\n\nexport default RecordLocation;\n","import StorageUtil from \"../serviceUtils/storageUtil\";\nimport { isElectron } from \"react-device-detect\";\nimport localforage from \"localforage\";\nimport BookModel from \"../../model/Book\";\nimport toast from \"react-hot-toast\";\nimport { getPDFCover } from \"./pdfUtil\";\nimport chardet from \"chardet\";\nimport iconv from \"iconv-lite\";\nimport { xmlMetadata } from \"./xmlUtil\";\n// import { base64ArrayBuffer } from \"./coverUtil\";\ndeclare var window: any;\nconst { MobiRender, Azw3Render } = window.Kookit;\n\n// let Unrar = window.Unrar;\nclass BookUtil {\n  static addBook(key: string, buffer: ArrayBuffer) {\n    if (isElectron) {\n      const fs = window.require(\"fs\");\n      const path = window.require(\"path\");\n      const dataPath = localStorage.getItem(\"storageLocation\")\n        ? localStorage.getItem(\"storageLocation\")\n        : window\n            .require(\"electron\")\n            .ipcRenderer.sendSync(\"storage-location\", \"ping\");\n      return new Promise<void>((resolve, reject) => {\n        var reader = new FileReader();\n        reader.readAsArrayBuffer(new Blob([buffer]));\n        reader.onload = async (event) => {\n          if (!event.target) return;\n          try {\n            fs.writeFileSync(\n              path.join(dataPath, \"book\", key),\n              Buffer.from(event.target.result as any)\n            );\n            resolve();\n          } catch (error) {\n            reject();\n            throw error;\n          }\n        };\n        reader.onerror = () => {\n          reject();\n        };\n      });\n    } else {\n      return localforage.setItem(key, buffer);\n    }\n  }\n  static deleteBook(key: string) {\n    if (isElectron) {\n      const fs = window.require(\"fs-extra\");\n      const path = window.require(\"path\");\n      const dataPath = localStorage.getItem(\"storageLocation\")\n        ? localStorage.getItem(\"storageLocation\")\n        : window\n            .require(\"electron\")\n            .ipcRenderer.sendSync(\"storage-location\", \"ping\");\n      return new Promise<void>((resolve, reject) => {\n        try {\n          fs.remove(path.join(dataPath, `book`, key), (err) => {\n            if (err) throw err;\n            resolve();\n          });\n        } catch (e) {\n          reject();\n        }\n      });\n    } else {\n      return localforage.removeItem(key);\n    }\n  }\n  static isBookExist(key: string, bookPath: string = \"\") {\n    return new Promise<boolean>((resolve, reject) => {\n      if (isElectron) {\n        var fs = window.require(\"fs\");\n        var path = window.require(\"path\");\n        let _bookPath = path.join(\n          localStorage.getItem(\"storageLocation\")\n            ? localStorage.getItem(\"storageLocation\")\n            : window\n                .require(\"electron\")\n                .ipcRenderer.sendSync(\"storage-location\", \"ping\"),\n          `book`,\n          key\n        );\n\n        if ((bookPath && fs.existsSync(bookPath)) || fs.existsSync(_bookPath)) {\n          resolve(true);\n        } else {\n          resolve(false);\n        }\n      } else {\n        localforage.getItem(key).then((result) => {\n          if (result) {\n            resolve(true);\n          } else {\n            resolve(false);\n          }\n        });\n      }\n    });\n  }\n  static fetchBook(\n    key: string,\n    isArrayBuffer: boolean = false,\n    bookPath: string = \"\"\n  ) {\n    if (isElectron) {\n      return new Promise<File | ArrayBuffer | boolean>((resolve, reject) => {\n        var fs = window.require(\"fs\");\n        var path = window.require(\"path\");\n        let _bookPath = path.join(\n          localStorage.getItem(\"storageLocation\")\n            ? localStorage.getItem(\"storageLocation\")\n            : window\n                .require(\"electron\")\n                .ipcRenderer.sendSync(\"storage-location\", \"ping\"),\n          `book`,\n          key\n        );\n        var data;\n        if (bookPath && fs.existsSync(bookPath)) {\n          data = fs.readFileSync(bookPath);\n        } else if (fs.existsSync(_bookPath)) {\n          data = fs.readFileSync(_bookPath);\n        } else {\n          resolve(false);\n        }\n\n        let blobTemp = new Blob([data]);\n        let fileTemp = new File([blobTemp], \"data\", {\n          lastModified: new Date().getTime(),\n          type: blobTemp.type,\n        });\n        if (isArrayBuffer) {\n          resolve(new Uint8Array(data).buffer);\n        } else {\n          resolve(fileTemp);\n        }\n      });\n    } else {\n      return localforage.getItem(key);\n    }\n  }\n  static async RedirectBook(book: BookModel) {\n    if (!(await this.isBookExist(book.key, book.path))) {\n      toast.error(\"Book not exist\");\n      return;\n    }\n    let ref = book.format.toLowerCase();\n\n    if (isElectron) {\n      const { ipcRenderer } = window.require(\"electron\");\n      ipcRenderer.invoke(\"open-book\", {\n        url: `${window.location.href.split(\"#\")[0]}#/${ref}/${book.key}`,\n        isMergeWord:\n          book.format === \"PDF\" || book.format === \"DJVU\"\n            ? \"no\"\n            : StorageUtil.getReaderConfig(\"isMergeWord\"),\n        isFullscreen: StorageUtil.getReaderConfig(\"isAutoFullscreen\"),\n        isPreventSleep: StorageUtil.getReaderConfig(\"isPreventSleep\"),\n      });\n    } else {\n      window.open(\n        `${window.location.href.split(\"#\")[0]}#/${ref}/${book.key}?title=${\n          book.name\n        }`\n      );\n    }\n  }\n  static getBookUrl(book: BookModel) {\n    let ref = book.format.toLowerCase();\n    return `/${ref}/${book.key}`;\n  }\n  static getPDFUrl(book: BookModel) {\n    if (isElectron) {\n      const path = window.require(\"path\");\n      const { ipcRenderer } = window.require(\"electron\");\n      localStorage.setItem(\"pdfPath\", book.path);\n      const __dirname = ipcRenderer.sendSync(\"get-dirname\", \"ping\");\n      let pdfLocation =\n        document.URL.indexOf(\"localhost\") > -1\n          ? \"http://localhost:3000/\"\n          : `file://${path.join(\n              __dirname,\n              \"./build\",\n              \"lib\",\n              \"pdf\",\n              \"web\",\n              \"viewer.html\"\n            )}`;\n      let url = `${\n        window.navigator.platform.indexOf(\"Win\") > -1\n          ? \"lib/pdf/web/\"\n          : \"lib\\\\pdf\\\\web\\\\\"\n      }viewer.html?file=${book.key}`;\n      return document.URL.indexOf(\"localhost\") > -1\n        ? pdfLocation + url\n        : `${pdfLocation}?file=${book.key}`;\n    } else {\n      return `./lib/pdf/web/viewer.html?file=${book.key}`;\n    }\n  }\n  static generateBook(\n    bookName: string,\n    extension: string,\n    md5: string,\n    size: number,\n    path: string,\n    file_content: ArrayBuffer\n  ) {\n    return new Promise<BookModel | boolean>(async (resolve, reject) => {\n      let cover: any = \"\";\n      let key: string,\n        name: string,\n        author: string,\n        publisher: string,\n        description: string,\n        charset: string;\n      [name, author, description, publisher, charset] = [\n        bookName,\n        \"Unknown Authur\",\n        \"\",\n        \"\",\n        \"\",\n      ];\n      switch (extension) {\n        case \"pdf\":\n          cover = await getPDFCover(file_content);\n          break;\n        case \"mobi\":\n          let mobiRendition = new MobiRender(\n            file_content,\n            \"scroll\",\n            StorageUtil.getReaderConfig(\"isSliding\") === \"yes\" ? true : false\n          );\n          if (mobiRendition.getMetadata().compression === 17480) {\n            resolve(false);\n          }\n          break;\n        case \"azw3\":\n          let azw3Rendition = new Azw3Render(\n            file_content,\n            \"scroll\",\n            StorageUtil.getReaderConfig(\"isSliding\") === \"yes\" ? true : false\n          );\n          if (azw3Rendition.getMetadata().compression === 17480) {\n            resolve(false);\n          }\n          break;\n        case \"fb2\":\n          charset = chardet.detect(Buffer.from(file_content)) || \"\";\n          let fb2Str = iconv.decode(\n            Buffer.from(file_content),\n            charset || \"utf8\"\n          );\n          let fb2Obj: any = await xmlMetadata(fb2Str);\n          cover = fb2Obj.cover;\n          name = fb2Obj.name;\n          author = fb2Obj.author;\n          break;\n        // case \"cbr\":\n        //   let unrar = new Unrar(file_content);\n        //   let buffer = unrar.decompress(\n        //     unrar.getEntries().map((item: any) => item.name)[0]\n        //   );\n        //   cover = base64ArrayBuffer(buffer);\n        //   break;\n\n        default:\n          break;\n      }\n\n      let format = extension.toUpperCase();\n      key = new Date().getTime() + \"\";\n      resolve(\n        new BookModel(\n          key,\n          name,\n          author,\n          description,\n          md5,\n          cover,\n          format,\n          publisher,\n          size,\n          path,\n          charset\n        )\n      );\n    });\n  }\n}\n\nexport default BookUtil;\n","import BookModel from \"../../model/Book\";\nclass RecordRecent {\n  static setRecent(bookKey: string) {\n    let bookArr =\n      localStorage.getItem(\"recentBooks\") !== \"{}\" &&\n      localStorage.getItem(\"recentBooks\")\n        ? JSON.parse(localStorage.getItem(\"recentBooks\") || \"\")\n        : [];\n    const index = bookArr.indexOf(bookKey);\n    if (index > -1) {\n      bookArr.splice(index, 1);\n      bookArr.unshift(bookKey);\n    } else {\n      bookArr.unshift(bookKey);\n    }\n\n    localStorage.setItem(\"recentBooks\", JSON.stringify(bookArr));\n  }\n  static setAllRecent(books: BookModel[]) {\n    let bookArr: string[] = [];\n    books.forEach((item) => {\n      bookArr.push(item.key);\n    });\n    localStorage.setItem(\"recentBooks\", JSON.stringify(bookArr));\n  }\n\n  static clear(bookKey: string) {\n    let bookArr =\n      localStorage.getItem(\"recentBooks\") !== \"{}\" &&\n      localStorage.getItem(\"recentBooks\")\n        ? JSON.parse(localStorage.getItem(\"recentBooks\") || \"\")\n        : [];\n    const index = bookArr.indexOf(bookKey);\n    if (index > -1) {\n      bookArr.splice(index, 1);\n    }\n    localStorage.setItem(\"recentBooks\", JSON.stringify(bookArr));\n  }\n  static getAllRecent() {\n    let bookArr =\n      localStorage.getItem(\"recentBooks\") !== \"{}\" &&\n      localStorage.getItem(\"recentBooks\")\n        ? JSON.parse(localStorage.getItem(\"recentBooks\") || \"\")\n        : [];\n    return bookArr || [];\n  }\n}\n\nexport default RecordRecent;\n","import StorageUtil from \"./storageUtil\";\nimport RecordLocation from \"../readUtils/recordLocation\";\nimport { isElectron } from \"react-device-detect\";\nimport { getIframeDoc } from \"./docUtil\";\nlet Hammer = (window as any).Hammer;\ndeclare var document: any;\nconst sleep = (ms: number) => {\n  return new Promise((resolve) => setTimeout(resolve, ms));\n};\n\nlet throttleTime =\n  StorageUtil.getReaderConfig(\"isSliding\") === \"yes\" ? 1000 : 100;\nexport const getSelection = () => {\n  let doc = getIframeDoc();\n  if (!doc) return;\n  let sel = doc.getSelection();\n  if (!sel) return;\n  let text = sel.toString();\n  text = text && text.trim();\n  return text || \"\";\n};\nlet lock = false; //prevent from clicking too fasts\nconst arrowKeys = (rendition: any, keyCode: number, event: any) => {\n  if (\n    document.querySelector(\".editor-box\") ||\n    document.querySelector(\".navigation-search-title\")\n  ) {\n    return;\n  }\n\n  if (lock) return;\n  if (keyCode === 37 || keyCode === 38) {\n    event.preventDefault();\n    rendition.prev();\n\n    lock = true;\n    setTimeout(function () {\n      lock = false;\n    }, throttleTime);\n    return false;\n  }\n  if (keyCode === 39 || keyCode === 40 || keyCode === 32) {\n    event.preventDefault();\n    rendition.next();\n    lock = true;\n    setTimeout(function () {\n      lock = false;\n    }, throttleTime);\n    return false;\n  }\n  handleShortcut(event, keyCode);\n};\n\nconst mouseChrome = (rendition: any, wheelDelta: number) => {\n  if (lock) return;\n  if (wheelDelta > 0) {\n    rendition.prev();\n    lock = true;\n    setTimeout(function () {\n      lock = false;\n    }, throttleTime);\n    return false;\n  }\n  if (wheelDelta < 0) {\n    rendition.next();\n    lock = true;\n    setTimeout(function () {\n      lock = false;\n    }, throttleTime);\n    return false;\n  }\n};\n\nconst handleShortcut = (event: any, keyCode: number) => {\n  if (keyCode === 9) {\n    if (isElectron) {\n      event.preventDefault();\n      window.require(\"electron\").ipcRenderer.invoke(\"hide-reader\", \"ping\");\n    }\n    lock = true;\n    setTimeout(function () {\n      lock = false;\n    }, throttleTime);\n    return false;\n  }\n  if (keyCode === 123) {\n    if (isElectron) {\n      event.preventDefault();\n      StorageUtil.setReaderConfig(\n        \"isMergeWord\",\n        StorageUtil.getReaderConfig(\"isMergeWord\") === \"yes\" ? \"no\" : \"yes\"\n      );\n      window.require(\"electron\").ipcRenderer.invoke(\"switch-moyu\", \"ping\");\n    }\n    lock = true;\n    setTimeout(function () {\n      lock = false;\n    }, throttleTime);\n    return false;\n  }\n};\n\nconst gesture = (rendition: any, type: string) => {\n  if (lock) return;\n  if (type === \"panleft\" || type === \"panup\") {\n    rendition.next();\n    lock = true;\n    setTimeout(function () {\n      lock = false;\n    }, throttleTime);\n    return false;\n  }\n  if (type === \"panright\" || type === \"pandown\") {\n    rendition.prev();\n    lock = true;\n    setTimeout(function () {\n      lock = false;\n    }, throttleTime);\n    return false;\n  }\n};\n\nconst bindEpubEvent = (rendition: any, doc: any) => {\n  doc.addEventListener(\n    \"keydown\",\n    (event) => {\n      arrowKeys(rendition, event.keyCode, event);\n    },\n    false\n  );\n  doc.addEventListener(\n    \"mousewheel\",\n    (event) => {\n      mouseChrome(rendition, event.wheelDelta);\n    },\n    false\n  );\n  window.addEventListener(\n    \"keydown\",\n    (event) => {\n      arrowKeys(rendition, event.keyCode, event);\n      //使用Key判断是否是htmlBook\n    },\n    false\n  );\n\n  if (StorageUtil.getReaderConfig(\"isTouch\") === \"yes\") {\n    const mc = new Hammer(doc);\n    mc.on(\"panleft panright panup pandown\", (event: any) => {\n      gesture(rendition, event.type);\n    });\n  }\n};\nconst bindHtmlEvent = (\n  rendition: any,\n  doc: any,\n  key: string = \"\",\n  readerMode: string = \"\"\n) => {\n  doc.addEventListener(\"keydown\", (event) => {\n    arrowKeys(rendition, event.keyCode, event);\n\n    let position = rendition.getPosition();\n    RecordLocation.recordHtmlLocation(\n      key,\n      position.text,\n      position.chapterTitle,\n      position.count,\n      position.percentage\n    );\n  });\n  doc.addEventListener(\n    \"mousewheel\",\n    async (event) => {\n      if (readerMode === \"scroll\") {\n        await sleep(200);\n        rendition.record();\n      } else {\n        mouseChrome(rendition, event.wheelDelta);\n      }\n\n      let position = rendition.getPosition();\n      RecordLocation.recordHtmlLocation(\n        key,\n        position.text,\n        position.chapterTitle,\n        position.count,\n        position.percentage\n      );\n    },\n    false\n  );\n\n  window.addEventListener(\"keydown\", (event) => {\n    arrowKeys(rendition, event.keyCode, event);\n    //使用Key判断是否是htmlBook\n\n    let position = rendition.getPosition();\n    RecordLocation.recordHtmlLocation(\n      key,\n      position.text,\n      position.chapterTitle,\n      position.count,\n      position.percentage\n    );\n  });\n\n  if (StorageUtil.getReaderConfig(\"isTouch\") === \"yes\") {\n    const mc = new Hammer(doc);\n    mc.on(\"panleft panright panup pandown\", (event: any) => {\n      gesture(rendition, event.type);\n\n      let position = rendition.getPosition();\n      RecordLocation.recordHtmlLocation(\n        key,\n        position.text,\n        position.chapterTitle,\n        position.count,\n        position.percentage\n      );\n    });\n  }\n};\nexport const EpubMouseEvent = (rendition: any, readerMode: string) => {\n  rendition.on(\"rendered\", () => {\n    let doc = getIframeDoc();\n    if (!doc) return;\n    if (readerMode === \"scroll\") {\n      doc.addEventListener(\"keydown\", (event) => {\n        arrowKeys(rendition, event.keyCode, event);\n        //使用Key判断是否是htmlBook\n      });\n      return;\n    }\n    lock = false;\n    bindEpubEvent(rendition, doc);\n  });\n};\nexport const HtmlMouseEvent = (\n  rendition: any,\n  key: string,\n  readerMode: string\n) => {\n  rendition.on(\"rendered\", () => {\n    let doc = getIframeDoc();\n    if (!doc) return;\n    lock = false;\n    bindHtmlEvent(rendition, doc, key, readerMode);\n  });\n};\nexport const pdfMouseEvent = () => {\n  let pageArea = document.getElementById(\"page-area\");\n  if (!pageArea) return;\n  let iframe = pageArea.getElementsByTagName(\"iframe\")[0];\n  if (!iframe) return;\n  let doc: any = iframe.contentWindow || iframe.contentDocument?.defaultView;\n\n  doc.document.addEventListener(\"keydown\", (event) => {\n    handleShortcut(event, event.keyCode);\n  });\n};\nexport const djvuMouseEvent = () => {\n  document.addEventListener(\"keydown\", (event) => {\n    handleShortcut(event, event.keyCode);\n  });\n};\n","export const getIframeDoc = () => {\n  let pageArea = document.getElementById(\"page-area\");\n  if (!pageArea) return null;\n  let iframe = pageArea.getElementsByTagName(\"iframe\")[0];\n\n  if (!iframe) return null;\n  let doc = iframe.contentDocument;\n  if (!doc) {\n    return null;\n  }\n  return doc;\n};\nexport const getPDFIframeDoc = () => {\n  let pageArea = document.getElementById(\"page-area\");\n  if (!pageArea) return null;\n  let iframe = pageArea.getElementsByTagName(\"iframe\")[0];\n  if (!iframe) return null;\n  let iWin: any = iframe.contentWindow || iframe.contentDocument?.defaultView;\n  if (!iWin) return null;\n  return iWin;\n};\n","export const dropdownList = [\n  {\n    id: 1,\n    title: \"Font Family\",\n    value: \"fontFamily\",\n    option: [\n      \"Built-in font\",\n      \"Helvetica\",\n      \"Times New Roman\",\n      \"Microsoft YaHei\",\n      \"SimSun\",\n      \"SimHei\",\n      \"Arial\",\n    ],\n  },\n  {\n    id: 2,\n    title: \"Line Height\",\n    value: \"lineHeight\",\n    option: [\"1\", \"1.25\", \"1.5\", \"1.75\", \"2\"],\n  },\n  {\n    id: 3,\n    title: \"Text Align\",\n    value: \"textAlign\",\n    option: [\"left\", \"justify\", \"right\"],\n  },\n  {\n    id: 4,\n    title: \"Chinese Conversion\",\n    value: \"convertChinese\",\n    option: [\n      \"Default\",\n      \"Simplified To Traditional\",\n      \"Traditional To Simplified\",\n    ],\n  },\n];\nexport const speedList = {\n  id: 3,\n  title: \"Speed\",\n  value: \"speed\",\n  option: [\n    \"0.1\",\n    \"0.2\",\n    \"0.3\",\n    \"0.4\",\n    \"0.5\",\n    \"0.75\",\n    \"1\",\n    \"1.25\",\n    \"1.5\",\n    \"1.75\",\n    \"2\",\n    \"3\",\n    \"4\",\n    \"5\",\n  ],\n};\n","import BookModel from \"../../model/Book\";\nclass AddTrash {\n  static setTrash(bookKey: string) {\n    let bookArr =\n      localStorage.getItem(\"deletedBooks\") !== \"{}\" &&\n      localStorage.getItem(\"deletedBooks\")\n        ? JSON.parse(localStorage.getItem(\"deletedBooks\") || \"\")\n        : [];\n    const index = bookArr.indexOf(bookKey);\n    if (index > -1) {\n      bookArr.splice(index, 1);\n      bookArr.unshift(bookKey);\n    } else {\n      bookArr.unshift(bookKey);\n    }\n\n    localStorage.setItem(\"deletedBooks\", JSON.stringify(bookArr));\n  }\n  static setAllTrash(books: BookModel[]) {\n    let bookArr: string[] = [];\n    books.forEach((item) => {\n      bookArr.push(item.key);\n    });\n    localStorage.setItem(\"deletedBooks\", JSON.stringify(bookArr));\n  }\n  static clear(bookKey: string) {\n    let bookArr =\n      localStorage.getItem(\"deletedBooks\") !== \"{}\" &&\n      localStorage.getItem(\"deletedBooks\")\n        ? JSON.parse(localStorage.getItem(\"deletedBooks\") || \"\")\n        : [];\n    const index = bookArr.indexOf(bookKey);\n    if (index > -1) {\n      bookArr.splice(index, 1);\n    }\n    localStorage.setItem(\"deletedBooks\", JSON.stringify(bookArr));\n  }\n  static getAllTrash() {\n    let bookArr =\n      localStorage.getItem(\"deletedBooks\") !== \"{}\" &&\n      localStorage.getItem(\"deletedBooks\")\n        ? JSON.parse(localStorage.getItem(\"deletedBooks\") || \"\")\n        : [];\n    return bookArr || [];\n  }\n}\n\nexport default AddTrash;\n","import BookModel from \"../../model/Book\";\nimport NoteModel from \"../../model/Note\";\nimport ReadingTime from \"./readingTime\";\nimport RecordLocation from \"./recordLocation\";\nimport _ from \"underscore\";\nconst getBookName = (books: BookModel[]) => {\n  return books.map((item) => item.name);\n};\nconst getAuthorName = (books: BookModel[]) => {\n  return books.map((item) => item.author);\n};\nconst getBookKey = (books: BookModel[]) => {\n  return books.map((item) => item.key);\n};\nconst getBookIndex = (nameArr: string[], oldNameArr: string[]) => {\n  let indexArr: number[] = [];\n  for (let i = 0; i < nameArr.length; i++) {\n    if (oldNameArr.indexOf(nameArr[i]) > -1) {\n      //如果索引数组已经包含该索引，就把它放在随后一位，取数组长度为索引\n      indexArr.push(\n        indexArr.indexOf(oldNameArr.indexOf(nameArr[i])) > -1\n          ? indexArr.length\n          : oldNameArr.indexOf(nameArr[i])\n      );\n    }\n  }\n  return indexArr;\n};\n\nconst getDurationArr = () => {\n  let durationObj = ReadingTime.getAllTime();\n  var sortable: any[] = [];\n  for (let obj in durationObj) {\n    sortable.push([obj, durationObj[obj]]);\n  }\n  sortable.sort(function (a, b) {\n    return a[1] - b[1];\n  });\n  return Object.keys(durationObj);\n};\nconst getPercentageArr = () => {\n  let locationObj = RecordLocation.getAllCfi();\n  var sortable: any = [];\n  for (let obj in locationObj) {\n    sortable.push([obj, locationObj[obj].percentage || 0]);\n  }\n  sortable.sort(function (a, b) {\n    return a[1] - b[1];\n  });\n  return Object.keys(locationObj);\n};\nclass SortUtil {\n  static sortBooks(\n    books: BookModel[],\n    bookSortCode: { sort: number; order: number }\n  ) {\n    if (bookSortCode.sort === 0) {\n      let oldNameArr = getBookName(books);\n\n      if (bookSortCode.order === 1) {\n        return getBookIndex(oldNameArr, oldNameArr);\n      } else {\n        return getBookIndex(oldNameArr, oldNameArr).reverse();\n      }\n    }\n    if (bookSortCode.sort === 1) {\n      let oldNameArr = getBookName(books);\n      let nameArr = getBookName(books).sort();\n      if (bookSortCode.order === 1) {\n        return getBookIndex(nameArr, oldNameArr);\n      } else {\n        return getBookIndex(nameArr, oldNameArr).reverse();\n      }\n    }\n    if (bookSortCode.sort === 2) {\n      let nameArr: number[] = [];\n      for (let i = 0; i < books.length; i++) {\n        nameArr.push(i);\n      }\n      if (bookSortCode.order === 1) {\n        return nameArr;\n      } else {\n        return nameArr.reverse();\n      }\n    }\n    if (bookSortCode.sort === 3) {\n      let durationKeys = getDurationArr();\n\n      let bookKeys = getBookKey(books);\n      if (bookSortCode.order === 1) {\n        return getBookIndex(_.union(durationKeys, bookKeys), bookKeys);\n      } else {\n        return getBookIndex(\n          _.union(durationKeys, bookKeys),\n          bookKeys\n        ).reverse();\n      }\n    }\n    if (bookSortCode.sort === 4) {\n      let oldAuthorArr = getAuthorName(books);\n      let authorArr = getAuthorName(books).sort();\n      if (bookSortCode.order === 1) {\n        return getBookIndex(authorArr, oldAuthorArr);\n      } else {\n        return getBookIndex(authorArr, oldAuthorArr).reverse();\n      }\n    }\n    if (bookSortCode.sort === 5) {\n      let percentagenKeys = getPercentageArr();\n      let bookKeys = getBookKey(books);\n      if (bookSortCode.order === 1) {\n        return getBookIndex(\n          _.union(percentagenKeys, bookKeys),\n          bookKeys\n        ).reverse();\n      } else {\n        return getBookIndex(_.union(percentagenKeys, bookKeys), bookKeys);\n      }\n    }\n  }\n  static sortNotes(\n    notes: NoteModel[],\n    noteSortCode: { sort: number; order: number },\n    books: BookModel[] = []\n  ) {\n    if (noteSortCode.sort === 2) {\n      //使书摘从晚到早排序\n      let noteArr = _.clone(notes).reverse();\n      let dateArr = _.uniq(\n        notes.map(\n          (item) =>\n            \"\" + item.date.year + \"-\" + item.date.month + \"-\" + item.date.day\n        )\n      );\n      if (noteSortCode.order === 1) {\n        dateArr.sort();\n      } else {\n        dateArr.sort().reverse();\n      }\n      //得到以日期为键，书摘为值的对象\n      let noteObj: { [key: string]: any } = {};\n      dateArr.forEach((date) => {\n        noteObj[date] = [];\n      });\n      noteArr.forEach((note) => {\n        dateArr.forEach((date) => {\n          if (\n            date ===\n            \"\" + note.date.year + \"-\" + note.date.month + \"-\" + note.date.day\n          ) {\n            noteObj[date].push(note);\n          }\n        });\n      });\n      return noteObj || {};\n    }\n    if (noteSortCode.sort === 1) {\n      //使书摘从晚到早排序\n      let noteArr = _.clone(notes).reverse();\n      let nameArr = _.uniq(\n        notes.map(\n          (item) =>\n            books[\n              _.findLastIndex(books, {\n                key: item.bookKey,\n              })\n            ].name\n        )\n      );\n      if (noteSortCode.order === 1) {\n        nameArr.sort();\n      } else {\n        nameArr.sort().reverse();\n      }\n      //得到以日期为键，书摘为值的对象\n      let noteObj: { [key: string]: any } = {};\n      nameArr.forEach((name) => {\n        noteObj[name] = [];\n      });\n      noteArr.forEach((note) => {\n        nameArr.forEach((name) => {\n          if (\n            name ===\n            books[\n              _.findLastIndex(books, {\n                key: note.bookKey,\n              })\n            ].name\n          ) {\n            noteObj[name].push(note);\n          }\n        });\n      });\n      return noteObj || {};\n    }\n  }\n  static setBookSortCode(sortCode: number, orderCode: number) {\n    let json =\n      localStorage.getItem(\"bookSortCode\") ||\n      JSON.stringify({ sort: 0, order: 1 });\n    let obj = json ? JSON.parse(json) : { sort: 0, order: 1 };\n    obj.sort = sortCode;\n    obj.order = orderCode;\n    localStorage.setItem(\"bookSortCode\", JSON.stringify(obj));\n  }\n\n  static getBookSortCode() {\n    let json =\n      localStorage.getItem(\"bookSortCode\") ||\n      JSON.stringify({ sort: 0, order: 1 });\n    let obj = JSON.parse(json) || { sort: 0, order: 1 };\n    return obj || null;\n  }\n  static setNoteSortCode(sort: number, order: number) {\n    let json =\n      localStorage.getItem(\"noteSortCode\") ||\n      JSON.stringify({ sort: 2, order: 1 });\n    let obj = json ? JSON.parse(json) : { sort: 2, order: 1 };\n    obj.sort = sort;\n    obj.order = order;\n    localStorage.setItem(\"noteSortCode\", JSON.stringify(obj));\n  }\n\n  static getNoteSortCode() {\n    let json =\n      localStorage.getItem(\"noteSortCode\") ||\n      JSON.stringify({ sort: 2, order: 1 });\n    let obj = JSON.parse(json) || { sort: 2, order: 1 };\n    return obj || null;\n  }\n}\n\nexport default SortUtil;\n","import BookModel from \"../../model/Book\";\nimport localforage from \"localforage\";\nimport BookUtil from \"../fileUtils/bookUtil\";\nimport NoteModel from \"../../model/Note\";\nimport BookmarkModel from \"../../model/Bookmark\";\nimport { isElectron } from \"react-device-detect\";\n\nlet JSZip = (window as any).JSZip;\nlet configArr = [\n  \"notes\",\n  \"books\",\n  \"bookmarks\",\n  \"readerConfig\",\n  \"noteTags\",\n  \"themeColors\",\n  \"bookSortCode\",\n  \"noteSortCode\",\n  \"readingTime\",\n  \"recentBooks\",\n  \"favoriteBooks\",\n  \"favoriteBooks\",\n  \"shelfList\",\n  \"pdfjs.history\",\n  \"recordLocation\",\n];\nexport function getParamsFromUrl() {\n  var hashParams: any = {};\n  var e,\n    r = /([^&;=]+)=?([^&;]*)/g,\n    q =\n      window.location.hash.substring(2) ||\n      window.location.search.substring(1).split(\"#\")[0];\n\n  while ((e = r.exec(q))) {\n    hashParams[e[1]] = decodeURIComponent(e[2]);\n  }\n  return hashParams;\n}\n//移动文件到指定路径\nexport const moveData = (\n  blob,\n  driveIndex,\n  books: BookModel[] = [],\n  handleFinish: () => void = () => {}\n) => {\n  let file = new File([blob], \"config.zip\", {\n    lastModified: new Date().getTime(),\n    type: blob.type,\n  });\n  const fs = window.require(\"fs\");\n  const path = window.require(\"path\");\n  const AdmZip = window.require(\"adm-zip\");\n\n  const { ipcRenderer } = window.require(\"electron\");\n  const dirPath = ipcRenderer.sendSync(\"user-data\", \"ping\");\n  const dataPath = localStorage.getItem(\"storageLocation\")\n    ? localStorage.getItem(\"storageLocation\")\n    : window\n        .require(\"electron\")\n        .ipcRenderer.sendSync(\"storage-location\", \"ping\");\n  var reader = new FileReader();\n  reader.readAsArrayBuffer(file);\n  reader.onload = async (event) => {\n    if (!event.target) return;\n    fs.writeFileSync(\n      path.join(dirPath, file.name),\n      Buffer.from(event.target.result as any)\n    );\n    var zip = new AdmZip(path.join(dirPath, file.name));\n    zip.extractAllTo(/*target path*/ dataPath, /*overwrite*/ true);\n    const fs_extra = window.require(\"fs-extra\");\n    fs_extra.copy(\n      path.join(dirPath, file.name),\n      path.join(dataPath, file.name),\n      function (err) {\n        if (err) return;\n      }\n    );\n    if (driveIndex === 4) {\n      let deleteBooks = books.map((item) => {\n        return localforage.removeItem(item.key);\n      });\n      await Promise.all(deleteBooks);\n    }\n    if (driveIndex === 5) {\n      handleFinish();\n    }\n  };\n};\n//改变数据存储路径\nexport const changePath = (oldPath: string, newPath: string) => {\n  return new Promise<number>((resolve, reject) => {\n    const fs = window.require(\"fs-extra\");\n    try {\n      fs.readdir(newPath, (err, files: string[]) => {\n        let isConfiged: boolean = false;\n        files.forEach((file: string) => {\n          if (file === \"config.zip\") {\n            isConfiged = true;\n          }\n        });\n        if (isConfiged) {\n          localStorage.setItem(\"storageLocation\", newPath);\n          resolve(1);\n        } else {\n          fs.copy(oldPath, newPath, function (err) {\n            if (err) return;\n            fs.emptyDirSync(oldPath);\n            resolve(2);\n          });\n        }\n      });\n    } catch (error) {\n      console.log(error);\n      resolve(0);\n    }\n  });\n};\nexport const syncData = (blob: Blob, books: BookModel[] = [], isSync: true) => {\n  return new Promise<boolean>((resolve, reject) => {\n    let file = new File([blob], \"config.zip\", {\n      lastModified: new Date().getTime(),\n      type: blob.type,\n    });\n    const fs = window.require(\"fs\");\n    const path = window.require(\"path\");\n    const AdmZip = window.require(\"adm-zip\");\n    const dataPath = localStorage.getItem(\"storageLocation\")\n      ? localStorage.getItem(\"storageLocation\")\n      : window\n          .require(\"electron\")\n          .ipcRenderer.sendSync(\"storage-location\", \"ping\");\n    var reader = new FileReader();\n    reader.readAsArrayBuffer(file);\n    reader.onload = async (event) => {\n      if (!event.target) return;\n      fs.writeFileSync(\n        path.join(dataPath, file.name),\n        Buffer.from(event.target.result as any)\n      );\n      var zip = new AdmZip(path.join(dataPath, file.name));\n      zip.extractAllTo(/*target path*/ dataPath, /*overwrite*/ true);\n\n      if (!isSync) {\n        let deleteBooks = books.map((item) => {\n          return localforage.removeItem(item.key);\n        });\n        await Promise.all(deleteBooks);\n        resolve(true);\n      } else {\n        resolve(true);\n      }\n    };\n  });\n};\n\nexport const zipBook = (zip: any, books: BookModel[]) => {\n  return new Promise<boolean>(async (resolve, reject) => {\n    let bookZip = zip.folder(\"book\");\n    let data: any = [];\n    books &&\n      books.forEach((item) => {\n        data.push(\n          !isElectron\n            ? localforage.getItem(item.key)\n            : BookUtil.fetchBook(item.key, false, item.path)\n        );\n      });\n    try {\n      let results = await Promise.all(data);\n      for (let i = 0; i < books.length; i++) {\n        results[i] && bookZip.file(`${books[i].key}`, results[i]);\n      }\n      resolve(true);\n    } catch (error) {\n      resolve(false);\n    }\n  });\n};\n\nexport const unzipConfig = (file: File) => {\n  return new Promise<boolean>((resolve, reject) => {\n    let zip = new JSZip();\n    let count = 0;\n    configArr.forEach((item) => {\n      zip\n        .loadAsync(file)\n        .then((content: any) => {\n          return content.files[\n            content.files[`${item}.json`]\n              ? `${item}.json`\n              : `config/${item}.json`\n          ].async(\"text\");\n        })\n        .then(async (text: any) => {\n          if (text) {\n            if (item === \"notes\" || item === \"books\" || item === \"bookmarks\") {\n              localforage.setItem(item, JSON.parse(text));\n            } else {\n              localStorage.setItem(item, text);\n            }\n          }\n          count++;\n          if (count === configArr.length) {\n            resolve(true);\n          }\n        })\n        .catch((err: any) => {\n          reject(false);\n          console.log(err, \"Error happen\");\n        });\n    });\n  });\n};\n\nexport const unzipBook = (file: File) => {\n  return new Promise<boolean>((resolve, reject) => {\n    localforage.getItem(\"books\").then((value: any) => {\n      let zip = new JSZip();\n      let count = 0;\n      value &&\n        value.length > 0 &&\n        value.forEach((item: any) => {\n          zip\n            .loadAsync(file)\n            .then((content: any) => {\n              if (content.files[`book/${item.key}`]) {\n                return content.files[`book/${item.key}`].async(\"arraybuffer\");\n              } else if (content.files[`${item.key}`]) {\n                return content.files[`${item.key}`].async(\"arraybuffer\");\n              }\n              if (\n                content.files[`book/${item.name}.pdf`] &&\n                item.description === \"pdf\"\n              ) {\n                //兼容之前的版本\n                return content.files[`book/${item.name}.pdf`].async(\n                  \"arraybuffer\"\n                ); // a promise of \"Hello World\\n\"\n              } else if (content.files[`book/${item.name}.epub`]) {\n                return content.files[`book/${item.name}.epub`].async(\n                  \"arraybuffer\"\n                ); // a promise of \"Hello World\\n\"\n              }\n            })\n            .then(async (book: ArrayBuffer) => {\n              await BookUtil.addBook(item.key, book);\n              count++;\n              if (count === value.length) {\n                resolve(true);\n              }\n            })\n            .catch((err: any) => {\n              resolve(false);\n            });\n        });\n    });\n  });\n};\n\nexport const zipConfig = (\n  zip: any,\n  books: BookModel[],\n  notes: NoteModel[],\n  bookmarks: BookmarkModel[]\n) => {\n  return new Promise<boolean>((resolve, reject) => {\n    try {\n      let configZip = zip.folder(\"config\");\n      configZip\n        .file(\"notes.json\", JSON.stringify(notes))\n        .file(\"books.json\", JSON.stringify(books))\n        .file(\"bookmarks.json\", JSON.stringify(bookmarks))\n        .file(\"readerConfig.json\", localStorage.getItem(\"readerConfig\") || \"\")\n        .file(\"themeColors.json\", localStorage.getItem(\"themeColors\") || \"\")\n        .file(\n          \"bookSortCode.json\",\n          localStorage.getItem(\"bookSortCode\") ||\n            JSON.stringify({ sort: 0, order: 2 })\n        )\n        .file(\n          \"noteSortCode.json\",\n          localStorage.getItem(\"noteSortCode\") ||\n            JSON.stringify({ sort: 2, order: 2 })\n        )\n        .file(\"readingTime.json\", localStorage.getItem(\"readingTime\") || \"\")\n        .file(\"recentBooks.json\", localStorage.getItem(\"recentBooks\") || [])\n        .file(\"deletedBooks.json\", localStorage.getItem(\"deletedBooks\") || [])\n        .file(\"favoriteBooks.json\", localStorage.getItem(\"favoriteBooks\") || [])\n        .file(\"shelfList.json\", localStorage.getItem(\"shelfList\") || [])\n        .file(\"noteTags.json\", localStorage.getItem(\"noteTags\") || [])\n        .file(\"pdfjs.history.json\", localStorage.getItem(\"pdfjs.history\") || [])\n        .file(\n          \"recordLocation.json\",\n          localStorage.getItem(\"recordLocation\") || \"\"\n        );\n      resolve(true);\n    } catch (error) {\n      resolve(false);\n    }\n  });\n};\n","import { getIframeDoc } from \"../serviceUtils/docUtil\";\nimport StorageUtil from \"../serviceUtils/storageUtil\";\n\nclass styleUtil {\n  // 为 iframe 添加默认的样式\n  static addDefaultCss() {\n    let doc = getIframeDoc();\n    if (!doc) return;\n\n    let css = this.getDefaultCss();\n    let background = document.querySelector(\".viewer\");\n    if (!background) return;\n    background.setAttribute(\n      \"style\",\n      `background-color:${\n        StorageUtil.getReaderConfig(\"isMergeWord\") === \"yes\"\n          ? \"rgba(0,0,0,0)\"\n          : StorageUtil.getReaderConfig(\"backgroundColor\")\n      };filter: brightness(${\n        StorageUtil.getReaderConfig(\"brightness\") || 1\n      }) invert(${StorageUtil.getReaderConfig(\"isInvert\") === \"yes\" ? 1 : 0})`\n    );\n    if (!doc.head) {\n      return;\n    }\n\n    let style = doc.createElement(\"style\");\n    style.id = \"default-style\";\n    style.textContent = css;\n    doc.head.appendChild(style);\n  }\n  // 获取为文档默认应用的css样式\n  static getDefaultCss() {\n    let colors = [\"#FBF1D1\", \"#EFEEB0\", \"#CAEFC9\", \"#76BEE9\"];\n    let lines = [\"#FF0000\", \"#000080\", \"#0000FF\", \"#2EFF2E\"];\n\n    return `::selection{background:#f3a6a68c}::-moz-selection{background:#f3a6a68c}[class*=color-]:hover{cursor:pointer;background-image:linear-gradient(0,rgba(0,0,0,.075),rgba(0,0,0,.075))}.color-0{background-color:${colors[0]}}.color-1{background-color:${colors[1]}}.color-2{background-color:${colors[2]}}.color-3{background-color:${colors[3]}}.line-0{border-bottom:2px solid ${lines[0]}}.line-1{border-bottom:2px solid ${lines[1]}}.line-2{border-bottom:2px solid ${lines[2]}}.line-3{border-bottom:2px solid ${lines[3]}}}img{max-width:100% !important}`;\n  }\n  static getCustomCss(isJSON: boolean = true) {\n    if (isJSON) {\n      return `font-size: ${\n        StorageUtil.getReaderConfig(\"fontSize\") || 17\n      }px !important;line-height: ${\n        StorageUtil.getReaderConfig(\"lineHeight\") || \"1.25\"\n      } !important;font-family: ${\n        StorageUtil.getReaderConfig(\"fontFamily\") || \"\"\n      } !important;background-color: transparent;color: ${\n        StorageUtil.getReaderConfig(\"textColor\")\n          ? StorageUtil.getReaderConfig(\"textColor\")\n          : StorageUtil.getReaderConfig(\"backgroundColor\") ===\n              \"rgba(44,47,49,1)\" ||\n            StorageUtil.getReaderConfig(\"appSkin\") === \"night\" ||\n            (StorageUtil.getReaderConfig(\"appSkin\") === \"system\" &&\n              StorageUtil.getReaderConfig(\"isOSNight\") === \"yes\")\n          ? \"white\"\n          : \"\"\n      } !important;letter-spacing: ${\n        StorageUtil.getReaderConfig(\"letterSpacing\")\n          ? StorageUtil.getReaderConfig(\"letterSpacing\")\n          : \"\"\n      }px !important;text-align: ${\n        StorageUtil.getReaderConfig(\"textAlign\")\n          ? StorageUtil.getReaderConfig(\"textAlign\")\n          : \"\"\n      } !important;\n      font-weight: ${\n        StorageUtil.getReaderConfig(\"isBold\") === \"yes\" ? \"bold !important\" : \"\"\n      };font-style: ${\n        StorageUtil.getReaderConfig(\"isItalic\") === \"yes\"\n          ? \"italic !important\"\n          : \"\"\n      };text-shadow: ${\n        StorageUtil.getReaderConfig(\"isShadow\") === \"yes\"\n          ? \"2px 2px 2px #cccccc !important\"\n          : \"\"\n      };text-indent: ${\n        StorageUtil.getReaderConfig(\"isIndent\") === \"yes\" ? \"2rem\" : \"\"\n      };text-decoration: ${\n        StorageUtil.getReaderConfig(\"isUnderline\") === \"yes\"\n          ? \"underline !important\"\n          : \"\"\n      };margin-bottom: ${\n        StorageUtil.getReaderConfig(\"paraSpacing\") || 0\n      }px !important;padding:0;word-wrap: break-word;`;\n    } else {\n      return {\n        \"a, article, cite, code, div, li, p, pre, span, table, body\": {\n          \"font-size\": `${\n            StorageUtil.getReaderConfig(\"fontSize\") || 17\n          }px !important`,\n          \"line-height\": `${\n            StorageUtil.getReaderConfig(\"lineHeight\") || \"1.25\"\n          } !important`,\n          \"font-family\": `${\n            StorageUtil.getReaderConfig(\"fontFamily\") || \"\"\n          } !important`,\n          \"background-color\": \"transparent\",\n          color: `${\n            StorageUtil.getReaderConfig(\"textColor\")\n              ? StorageUtil.getReaderConfig(\"textColor\")\n              : StorageUtil.getReaderConfig(\"backgroundColor\") ===\n                  \"rgba(44,47,49,1)\" ||\n                StorageUtil.getReaderConfig(\"appSkin\") === \"night\" ||\n                (StorageUtil.getReaderConfig(\"appSkin\") === \"system\" &&\n                  StorageUtil.getReaderConfig(\"isOSNight\") === \"yes\")\n              ? \"white\"\n              : \"\"\n          } !important`,\n          \"letter-spacing\": `${\n            StorageUtil.getReaderConfig(\"letterSpacing\")\n              ? `${StorageUtil.getReaderConfig(\"letterSpacing\")}px`\n              : \"\"\n          } !important`,\n          \"text-align\": `${\n            StorageUtil.getReaderConfig(\"textAlign\")\n              ? `${StorageUtil.getReaderConfig(\"textAlign\")}`\n              : \"\"\n          } !important`,\n          \"font-weight\": `${\n            StorageUtil.getReaderConfig(\"isBold\") === \"yes\"\n              ? \"bold !important\"\n              : \"\"\n          }`,\n          \"text-indent\": `${\n            StorageUtil.getReaderConfig(\"isIndent\") === \"yes\" ? \"2rem\" : \"\"\n          }`,\n          \"font-style\": `${\n            StorageUtil.getReaderConfig(\"isItalic\") === \"yes\"\n              ? \"italic !important\"\n              : \"\"\n          }`,\n          \"text-shadow\": `${\n            StorageUtil.getReaderConfig(\"isShadow\") === \"yes\"\n              ? \"2px 2px 2px #cccccc !important\"\n              : \"\"\n          }`,\n          \"text-decoration\": `${\n            StorageUtil.getReaderConfig(\"isUnderline\") === \"yes\"\n              ? \"underline !important\"\n              : \"\"\n          }`,\n          \"margin-bottom\": `${\n            StorageUtil.getReaderConfig(\"paraSpacing\") || 0\n          }px !important`,\n        },\n      };\n    }\n  }\n  static addStyle = (url: string) => {\n    const style = document.createElement(\"link\");\n    style.href = url;\n    style.rel = \"stylesheet\";\n    document.head.appendChild(style);\n  };\n\n  static applyTheme() {\n    StorageUtil.getReaderConfig(\"themeColor\") &&\n      StorageUtil.getReaderConfig(\"themeColor\") !== \"default\" &&\n      this.addStyle(\n        \"./assets/styles/\" + StorageUtil.getReaderConfig(\"themeColor\") + \".css\"\n      );\n  }\n}\n\nexport default styleUtil;\n","export const backgroundList = [\n  \"rgba(255,255,255,1)\",\n  \"rgba(44,47,49,1)\",\n  \"rgba(233, 216, 188,1)\",\n  \"rgba(197, 231, 207,1)\",\n];\nexport const textList = [\n  \"rgba(0,0,0,1)\",\n  \"rgba(255,255,255,1)\",\n  \"rgba(89, 68, 41,1)\",\n  \"rgba(54, 80, 62,1)\",\n];\nexport const themeList = [\n  {\n    id: 0,\n    color: \"rgba(75, 75, 75, 1)\",\n    name: \"default\",\n    title: \"Default\",\n  },\n  {\n    id: 1,\n    color: \"rgba(1, 121, 202, 1)\",\n    name: \"blue\",\n    title: \"Blue\",\n  },\n  {\n    id: 2,\n    color: \"rgba(0, 143, 145, 1)\",\n    name: \"green\",\n    title: \"Green\",\n  },\n\n  {\n    id: 3,\n    color: \"rgba(241, 100, 100, 1)\",\n    name: \"red\",\n    title: \"Red\",\n  },\n  {\n    id: 4,\n    color: \"rgba(104, 103, 209, 1)\",\n    name: \"purple\",\n    title: \"Purple\",\n  },\n];\n","import { isElectron } from \"react-device-detect\";\nimport StorageUtil from \"./storageUtil\";\n\nexport const openExternalUrl = (url: string) => {\n  isElectron\n    ? StorageUtil.getReaderConfig(\"isUseBuiltIn\") === \"yes\"\n      ? window.open(url)\n      : window.require(\"electron\").shell.openExternal(url)\n    : window.open(url);\n};\n","class ReadingTime {\n  static setTime(bookKey: string, time: number) {\n    let json = localStorage.getItem(\"readingTime\");\n    let obj = JSON.parse(json!) || {};\n    obj[bookKey] = time;\n    localStorage.setItem(\"readingTime\", JSON.stringify(obj));\n  }\n\n  static getTime(bookKey: string) {\n    let json = localStorage.getItem(\"readingTime\");\n    let obj = JSON.parse(json!) || {};\n    return obj[bookKey] || 0;\n  }\n  static getAllTime() {\n    let json = localStorage.getItem(\"readingTime\");\n    let obj = JSON.parse(json!) || {};\n    return obj || [];\n  }\n  static clearTime(bookKey: string) {\n    let json = localStorage.getItem(\"readingTime\");\n    let obj = JSON.parse(json!) || {};\n    delete obj[bookKey];\n    localStorage.setItem(\"readingTime\", JSON.stringify(obj));\n  }\n}\n\nexport default ReadingTime;\n","export const settingList = [\n  {\n    isElectron: false,\n    title: \"Turn on touch screen mode\",\n    desc: \"Gesture and UI optimization for touch screen\",\n    propName: \"isTouch\",\n  },\n  {\n    isElectron: false,\n    title: \"Prevent accidental trigger\",\n    desc: \"Reader menu will not be triggered by hovering but clicking on the area\",\n    propName: \"isPreventTrigger\",\n  },\n  {\n    isElectron: true,\n    title: \"Import books as link\",\n    desc: \"The imported books will not be copied to library, only linked to the original book path\",\n    propName: \"isImportPath\",\n  },\n  {\n    isElectron: true,\n    title: \"Merge reader into Word\",\n    desc: \"Get rid of window frame, make reader hide into Word or any text editor, and can't be detected. You need to set up the reader's position, size and style first.\",\n    propName: \"isMergeWord\",\n  },\n  {\n    isElectron: false,\n    title: \"Auto open last-read book\",\n    desc: \"The book that you read from last time will be open automatically when launching\",\n    propName: \"isOpenBook\",\n  },\n  {\n    isElectron: true,\n    title: \"Auto open book in fullscreen\",\n    desc: \"Reader window will be maximized to fit the screen when opening a book\",\n    propName: \"isAutoFullscreen\",\n  },\n  {\n    isElectron: false,\n    title: \"Auto expand content\",\n    desc: \"All the folded content will be expanded in the navigation panel\",\n    propName: \"isExpandContent\",\n  },\n  {\n    isElectron: true,\n    title: \"Disable screen blanking\",\n    desc: \"When Koodo is running, your computer won't enter sleep mode\",\n    propName: \"isPreventSleep\",\n  },\n  {\n    isElectron: true,\n    title: \"Open book without adding it to library\",\n    desc: \"When opening books in the file manager with Koodo, the opened books won't be added to the library\",\n    propName: \"isPreventAdd\",\n  },\n  {\n    isElectron: false,\n    title: \"Open books in the main window\",\n    desc: \"Book won't be opened in a seperate window but directly opened in the main window\",\n    propName: \"isOpenInMain\",\n  },\n  {\n    isElectron: true,\n    title: \"Disable update notification\",\n    propName: \"isDisableUpdate\",\n  },\n  {\n    isElectron: false,\n    title: \"Disable analytics service\",\n    propName: \"isDisableAnalytics\",\n  },\n  {\n    isElectron: false,\n    title: \"Use first page as PDF cover\",\n    propName: \"isPDFCover\",\n  },\n  {\n    isElectron: true,\n    title: \"Open url with built-in browser\",\n    propName: \"isUseBuiltIn\",\n  },\n];\nexport const langList = [\n  { label: \"简体中文\", value: \"zh\" },\n  { label: \"繁體中文\", value: \"cht\" },\n  { label: \"English\", value: \"en\" },\n  { label: \"русский\", value: \"ru\" },\n  { label: \"فارسی\", value: \"fa\" },\n  { label: \"Español\", value: \"es\" },\n  { label: \"Français\", value: \"fr\" },\n  { label: \"Português\", value: \"ptBR\" },\n];\n\nexport const searchList = [\n  { label: \"Google\", value: \"google\" },\n  { label: \"Baidu\", value: \"baidu\" },\n  { label: \"Bing\", value: \"bing\" },\n  { label: \"DuckDuckGo\", value: \"duckduckgo\" },\n  { label: \"Yandex\", value: \"yandex\" },\n  { label: \"Yahoo\", value: \"yahoo\" },\n  { label: \"Naver\", value: \"naver\" },\n  { label: \"Baidu Baike\", value: \"baike\" },\n  { label: \"Wikipedia\", value: \"wiki\" },\n];\nexport const skinList = [\n  { label: \"Light Mode\", value: \"light\" },\n  { label: \"Night Mode\", value: \"night\" },\n  { label: \"Follow OS\", value: \"system\" },\n];\n\nexport const readerSettingList = [\n  {\n    title: \"Sliding Animation\",\n    propName: \"isSliding\",\n  },\n  {\n    title: \"Text Indent\",\n    propName: \"isIndent\",\n  },\n  {\n    title: \"Bold\",\n    propName: \"isBold\",\n  },\n  {\n    title: \"Italic\",\n    propName: \"isItalic\",\n  },\n  {\n    title: \"Text underline\",\n    propName: \"isUnderline\",\n  },\n  {\n    title: \"Text shadow\",\n    propName: \"isShadow\",\n  },\n  {\n    title: \"Invert color\",\n    propName: \"isInvert\",\n  },\n  {\n    title: \"Hide footer\",\n    propName: \"isHideFooter\",\n  },\n  {\n    title: \"Hide header\",\n    propName: \"isHideHeader\",\n  },\n  {\n    title: \"Hide mimical background\",\n    propName: \"isHideBackground\",\n  },\n  {\n    title: \"Hide navigation button\",\n    propName: \"isHidePageButton\",\n  },\n  {\n    title: \"Hide menu button\",\n    propName: \"isHideMenuButton\",\n  },\n];\n","class TagUtil {\n  static setTags(tagName: string) {\n    let tagArr =\n      localStorage.getItem(\"noteTags\") !== \"{}\" &&\n      localStorage.getItem(\"noteTags\")\n        ? JSON.parse(localStorage.getItem(\"noteTags\") || \"\")\n        : [];\n    const index = tagArr.indexOf(tagName);\n    if (index > -1) {\n      tagArr.splice(index, 1);\n      tagArr.unshift(tagName);\n    } else {\n      tagArr.unshift(tagName);\n    }\n\n    localStorage.setItem(\"noteTags\", JSON.stringify(tagArr));\n  }\n\n  static clear(tagName: string) {\n    let tagArr =\n      localStorage.getItem(\"noteTags\") !== \"{}\" &&\n      localStorage.getItem(\"noteTags\")\n        ? JSON.parse(localStorage.getItem(\"noteTags\") || \"\")\n        : [];\n    const index = tagArr.indexOf(tagName);\n    if (index > -1) {\n      tagArr.splice(index, 1);\n    }\n    localStorage.setItem(\"noteTags\", JSON.stringify(tagArr));\n  }\n  static getAllTags() {\n    let tagArr =\n      localStorage.getItem(\"noteTags\") !== \"{}\" &&\n      localStorage.getItem(\"noteTags\")\n        ? JSON.parse(localStorage.getItem(\"noteTags\") || \"\")\n        : [];\n    return tagArr || [];\n  }\n}\n\nexport default TagUtil;\n","import React from \"react\";\nimport \"./emptyCover.css\";\n\nconst emptyCover = (props) => (\n  <div className=\"empty-cover\" style={{ transform: `scale(${props.scale})` }}>\n    <div\n      className=\"cover-banner\"\n      style={{\n        backgroundColor:\n          props.format === \"PDF\"\n            ? \"rgba(55, 170, 81, 0.7)\"\n            : props.format === \"TXT\"\n            ? \"rgba(251, 191, 16,1)\"\n            : props.format === \"EPUB\"\n            ? \"rgba(33, 165, 241,1)\"\n            : props.format === \"MOBI\"\n            ? \"rgba(255, 108, 110,1)\"\n            : props.format === \"AZW3\"\n            ? \" #ff9900\"\n            : props.format === \"MD\"\n            ? \"#5e7fff\"\n            : props.format === \"DJVU\"\n            ? \"#109870\"\n            : props.format === \"FB2\"\n            ? \"#0063b1\"\n            : props.format === \"DOCX\" || props.format === \"RTF\"\n            ? \" #6867d1\"\n            : props.format === \"CBT\" ||\n              props.format === \"CBZ\" ||\n              props.format === \"CBR\"\n            ? \"#00b6c2\"\n            : \"rgba(104, 103, 209, 1)\",\n      }}\n    >\n      {props.format || \"BOOK\"}\n    </div>\n    <div\n      className=\"cover-title\"\n      style={{ fontSize: props.scale === 1.15 ? \"13px\" : \"\" }}\n    >\n      {props.title}\n    </div>\n    <div className=\"cover-footer\">Koodo Reader</div>\n  </div>\n);\n\nexport default emptyCover;\n","//笔记书摘的标签\nimport React from \"react\";\nimport \"./noteTag.css\";\nimport { NoteTagProps, NoteTagState } from \"./interface\";\nimport TagUtil from \"../../utils/readUtils/tagUtil\";\nimport DeleteIcon from \"../deleteIcon\";\nimport { Trans } from \"react-i18next\";\n\nclass NoteTag extends React.Component<NoteTagProps, NoteTagState> {\n  constructor(props: NoteTagProps) {\n    super(props);\n    this.state = {\n      tagIndex: [],\n      isInput: false,\n      deleteIndex: -1,\n      isShowTags: false,\n    };\n  }\n  componentDidMount() {\n    if (this.props.isReading) {\n      this.setState({ tagIndex: this.tagToIndex(this.props.tag) });\n    }\n  }\n  componentWillReceiveProps(nextProps: NoteTagProps) {\n    if (\n      this.props.isReading &&\n      nextProps.tag &&\n      nextProps.tag.length > 0 &&\n      this.props.tag !== nextProps.tag\n    ) {\n      this.setState({ tagIndex: this.tagToIndex(nextProps.tag) });\n    }\n  }\n  tagToIndex = (tag: string[]) => {\n    let temp: number[] = [];\n    if (!tag) return [];\n    for (let i = 0; i < TagUtil.getAllTags().length; i++) {\n      if (tag.indexOf(TagUtil.getAllTags()[i]) > -1) {\n        temp.push(i);\n      }\n    }\n    return temp;\n  };\n  indextoTag = (tagIndex: number[]) => {\n    let temp: any = [];\n    for (let i = 0; i < tagIndex.length; i++) {\n      temp.push(TagUtil.getAllTags()[tagIndex[i]]);\n    }\n    return temp;\n  };\n  handleChangeTag = (index: number) => {\n    let temp: number[] = [...this.state.tagIndex];\n    if (this.state.tagIndex.indexOf(index) > -1) {\n      temp = [...this.state.tagIndex];\n      let indexResult = temp.indexOf(index);\n      temp.splice(indexResult, 1);\n      this.setState({ tagIndex: temp });\n      this.props.handleTag(this.indextoTag(temp));\n    } else {\n      temp.push(index);\n      this.setState({ tagIndex: temp });\n      this.props.handleTag(this.indextoTag(temp));\n    }\n  };\n  handleAddTag = (event: any) => {\n    this.setState({ isInput: false });\n    if (!event.target.value) {\n      return;\n    }\n    TagUtil.setTags(event.target.value);\n    this.setState({ tagIndex: [] });\n    this.props.handleTag(this.indextoTag([]));\n  };\n  handleInput = () => {\n    this.setState({ isInput: true }, () => {\n      document.getElementById(\"newTag\")?.focus();\n    });\n  };\n  handleShowTags = (bool: boolean) => {\n    this.setState({ isShowTags: bool }, () => {\n      if (document.querySelector(\".card-list-container\")) {\n        (document.querySelector(\".card-list-container\") as any)?.setAttribute(\n          \"style\",\n          `height:calc(100% - ${\n            (document.querySelector(\".card-list-container\") as any)?.offsetTop\n          }px)`\n        );\n      }\n    });\n  };\n  render() {\n    const renderTag = () => {\n      let noteTags = this.props.isCard ? this.props.tag : TagUtil.getAllTags();\n      return noteTags.map((item: any, index: number) => {\n        return (\n          <li\n            key={item}\n            className={\n              this.state.tagIndex.indexOf(index) > -1 && !this.props.isCard\n                ? \"tag-list-item active-tag \"\n                : \"tag-list-item\"\n            }\n          >\n            <div className=\"delete-tag-container\">\n              {this.state.tagIndex.indexOf(index) > -1 &&\n              !this.props.isReading &&\n              !this.props.isCard ? (\n                <DeleteIcon\n                  {...{\n                    tagName: item,\n                    mode: \"tags\",\n                    index: index,\n                    handleChangeTag: this.handleChangeTag,\n                  }}\n                />\n              ) : null}\n            </div>\n            <div\n              className=\"center\"\n              onClick={() => {\n                this.handleChangeTag(index);\n              }}\n            >\n              <Trans>{item}</Trans>\n            </div>\n          </li>\n        );\n      });\n    };\n    return (\n      <div\n        className=\"note-tag-container\"\n        style={this.props.isReading ? { width: \"1999px\" } : {}}\n      >\n        {this.props.isReading || this.props.isCard ? null : (\n          <div className=\"tag-title\">\n            <Trans>All Tags</Trans>\n            <span\n              className=\"icon-dropdown tag-dropdown-icon\"\n              onClick={() => {\n                this.handleShowTags(!this.state.isShowTags);\n              }}\n              style={\n                !this.state.isShowTags ? {} : { transform: \"rotate(-90deg)\" }\n              }\n            ></span>\n          </div>\n        )}\n\n        {(this.state.isShowTags ||\n          this.props.isReading ||\n          this.props.isCard) && (\n          <ul className=\"tag-container\">\n            {!this.props.isCard && (\n              <li\n                className=\"tag-list-item-new\"\n                onClick={() => {\n                  this.handleInput();\n                }}\n                style={this.state.isInput ? { width: \"80px\" } : {}}\n              >\n                <div className=\"center\">\n                  {this.state.isInput ? (\n                    <input\n                      type=\"text\"\n                      name=\"newTag\"\n                      id=\"newTag\"\n                      onBlur={(event) => {\n                        this.handleAddTag(event);\n                      }}\n                    />\n                  ) : (\n                    <span className=\"icon-add\"></span>\n                  )}\n                </div>\n              </li>\n            )}\n            {renderTag()}\n          </ul>\n        )}\n      </div>\n    );\n  }\n}\nexport default NoteTag;\n","import { connect } from \"react-redux\";\nimport { handleSearchResults, handleSearch } from \"../../store/actions\";\nimport { stateType } from \"../../store\";\nimport { withTranslation } from \"react-i18next\";\nimport NoteTag from \"./component\";\nconst mapStateToProps = (state: stateType) => {\n  return {\n    isReading: state.book.isReading,\n    noteKey: state.reader.noteKey,\n  };\n};\nconst actionCreator = {\n  handleSearchResults,\n  handleSearch,\n};\nexport default connect(\n  mapStateToProps,\n  actionCreator\n)(withTranslation()(NoteTag as any));\n","declare var window: any;\nvar pdfjsLib = window[\"pdfjs-dist/build/pdf\"];\nexport const getHightlightCoords = () => {\n  let pageArea = document.getElementById(\"page-area\");\n  if (!pageArea) return;\n  let iframe = pageArea.getElementsByTagName(\"iframe\")[0];\n  if (!iframe) return;\n  let iWin: any = iframe.contentWindow || iframe.contentDocument?.defaultView;\n  var pageIndex = iWin!.PDFViewerApplication.pdfViewer.currentPageNumber - 1;\n  var page = iWin!.PDFViewerApplication.pdfViewer.getPageView(pageIndex);\n  var pageRect = page.canvas.getClientRects()[0];\n  var selectionRects = iWin.getSelection()!.getRangeAt(0).getClientRects();\n  var viewport = page.viewport;\n  let tempRect: { bottom: number; top: number; left: number; right: number }[] =\n    [];\n  for (let i = 0; i < selectionRects.length; i++) {\n    if (i === 0) {\n      tempRect.push({\n        bottom: selectionRects[i].bottom,\n        top: selectionRects[i].top,\n        left: selectionRects[i].left,\n        right: selectionRects[i].right,\n      });\n    } else if (\n      Math.abs(\n        tempRect[tempRect.length - 1].bottom - selectionRects[i].bottom\n      ) < 5\n    ) {\n      if (tempRect[tempRect.length - 1].left > selectionRects[i].left) {\n        tempRect[tempRect.length - 1].left = selectionRects[i].left;\n      }\n      if (tempRect[tempRect.length - 1].right < selectionRects[i].right) {\n        tempRect[tempRect.length - 1].right = selectionRects[i].right;\n      }\n    } else {\n      tempRect.push({\n        bottom: selectionRects[i].bottom,\n        top: selectionRects[i].top,\n        left: selectionRects[i].left,\n        right: selectionRects[i].right,\n      });\n    }\n  }\n  var selected = tempRect.map(function (r: any) {\n    return viewport\n      .convertToPdfPoint(r.left - pageRect.x, r.top - pageRect.y)\n      .concat(\n        viewport.convertToPdfPoint(r.right - pageRect.x, r.bottom - pageRect.y)\n      );\n  });\n  return { page: pageIndex, coords: selected };\n};\nexport const getPDFCover = (file: ArrayBuffer) => {\n  return new Promise<string>((resolve, reject) => {\n    pdfjsLib\n      .getDocument({ data: file })\n      .promise.then((pdfDoc: any) => {\n        pdfDoc.getPage(1).then((page: any) => {\n          var scale = 1.5;\n          var viewport = page.getViewport({\n            scale: scale,\n          });\n          var canvas: any = document.getElementById(\"the-canvas\");\n          var context = canvas.getContext(\"2d\");\n          canvas.height =\n            viewport.height || viewport.viewBox[3]; /* viewport.height is NaN */\n          canvas.width =\n            viewport.width ||\n            viewport.viewBox[2]; /* viewport.width is also NaN */\n          var task = page.render({\n            canvasContext: context,\n            viewport: viewport,\n          });\n          task.promise.then(async () => {\n            let cover: any = canvas.toDataURL(\"image/jpeg\");\n\n            resolve(cover);\n          });\n        });\n      })\n      .catch((err: any) => {\n        resolve(\"\");\n      });\n  });\n};\n","class Note {\n  key: string;\n  bookKey: string;\n  date: { year: number; month: number; day: number };\n  chapter: string;\n  chapterIndex: number;\n  text: string;\n  cfi: string;\n  range: string;\n  notes: string;\n  percentage: number;\n  color: number;\n  tag: string[];\n  constructor(\n    bookKey: string,\n    chapter: string,\n    chapterIndex: number,\n    text: string,\n    cfi: string,\n    range: string,\n    notes: string,\n    percentage: number,\n    color: number,\n    tag: string[]\n  ) {\n    this.key = new Date().getTime() + \"\"; //笔记的键值\n    this.bookKey = bookKey; //笔记的所在书的键值\n    this.date = {\n      year: new Date().getFullYear(),\n      month: new Date().getMonth() + 1,\n      day: new Date().getDate(),\n    }; //笔记的添加日期\n    this.chapter = chapter; //笔记的所在章节\n    this.chapterIndex = chapterIndex; //笔记的所在章节\n    this.text = text; //笔记对应的书本的内容\n    this.cfi = cfi; //添加笔记的位置\n    this.range = range; // Rangy.js产生的将Range对象序列化后的字符串\n    this.notes = notes || \"\"; //笔记的内容\n    this.percentage = percentage; //笔记在文中的进度\n    this.color = color; //笔记高亮的颜色\n    this.tag = tag; //笔记高亮的颜色\n  }\n}\n\nexport default Note;\n","//添加笔记的弹窗\nimport React from \"react\";\nimport \"./popupNote.css\";\nimport Note from \"../../../model/Note\";\nimport localforage from \"localforage\";\nimport { PopupNoteProps, PopupNoteState } from \"./interface\";\nimport RecordLocation from \"../../../utils/readUtils/recordLocation\";\nimport NoteTag from \"../../noteTag\";\nimport NoteModel from \"../../../model/Note\";\nimport { Trans } from \"react-i18next\";\nimport toast from \"react-hot-toast\";\nimport { getHightlightCoords } from \"../../../utils/fileUtils/pdfUtil\";\ndeclare var window: any;\n\nclass PopupNote extends React.Component<PopupNoteProps, PopupNoteState> {\n  constructor(props: PopupNoteProps) {\n    super(props);\n    this.state = { tag: [] };\n  }\n  componentDidMount() {\n    let textArea: any = document.querySelector(\".editor-box\");\n    textArea && textArea.focus();\n  }\n  handleTag = (tag: string[]) => {\n    this.setState({ tag });\n  };\n  createNote() {\n    let notes = (document.querySelector(\".editor-box\") as HTMLInputElement)\n      .value;\n    if (this.props.noteKey) {\n      //编辑笔记\n      this.props.notes.forEach((item) => {\n        if (item.key === this.props.noteKey) {\n          item.notes = notes;\n          item.tag = this.state.tag;\n        }\n      });\n      localforage.setItem(\"notes\", this.props.notes).then(() => {\n        this.props.handleOpenMenu(false);\n        toast.success(this.props.t(\"Add Successfully\"));\n        this.props.handleFetchNotes();\n        this.props.handleMenuMode(\"highlight\");\n        this.props.handleNoteKey(\"\");\n      });\n    } else {\n      //创建笔记\n      let bookKey = this.props.currentBook.key;\n      let cfi = \"\";\n      if (this.props.currentBook.format === \"EPUB\") {\n        cfi = RecordLocation.getCfi(this.props.currentBook.key).cfi;\n      } else if (this.props.currentBook.format === \"PDF\") {\n        cfi = JSON.stringify(\n          RecordLocation.getPDFLocation(this.props.currentBook.md5)\n        );\n      } else {\n        cfi = JSON.stringify(\n          RecordLocation.getHtmlLocation(this.props.currentBook.key)\n        );\n      }\n\n      let pageArea = document.getElementById(\"page-area\");\n      if (!pageArea) return;\n      let iframe = pageArea.getElementsByTagName(\"iframe\")[0];\n      if (!iframe) return;\n      let doc = iframe.contentDocument;\n      if (!doc) {\n        return;\n      }\n      let charRange;\n      if (this.props.currentBook.format !== \"PDF\") {\n        charRange = window.rangy\n          .getSelection(iframe)\n          .saveCharacterRanges(doc.body)[0];\n      }\n\n      let range =\n        this.props.currentBook.format === \"PDF\"\n          ? JSON.stringify(getHightlightCoords())\n          : JSON.stringify(charRange);\n      let text = doc.getSelection()?.toString();\n      if (!text) {\n        return;\n      }\n      text = text.replace(/\\s\\s/g, \"\");\n      text = text.replace(/\\r/g, \"\");\n      text = text.replace(/\\n/g, \"\");\n      text = text.replace(/\\t/g, \"\");\n      text = text.replace(/\\f/g, \"\");\n      let percentage = 0;\n      if (this.props.currentBook.format === \"EPUB\") {\n        percentage = RecordLocation.getCfi(this.props.currentBook.key)\n          .percentage\n          ? RecordLocation.getCfi(this.props.currentBook.key).percentage\n          : 0;\n      }\n\n      let color = this.props.color || 0;\n      let tag = this.state.tag;\n\n      let note = new Note(\n        bookKey,\n        this.props.chapter,\n        this.props.chapterIndex,\n        text,\n        cfi,\n        range,\n        notes,\n        percentage,\n        color,\n        tag\n      );\n\n      let noteArr = this.props.notes;\n      noteArr.push(note);\n      localforage.setItem(\"notes\", noteArr).then(() => {\n        this.props.handleOpenMenu(false);\n        toast.success(this.props.t(\"Add Successfully\"));\n        this.props.handleFetchNotes();\n        this.props.handleMenuMode(\"highlight\");\n      });\n    }\n  }\n  handleClose = () => {\n    let noteIndex = -1;\n    if (this.props.noteKey) {\n      this.props.notes.forEach((item, index) => {\n        if (item.key === this.props.noteKey) {\n          noteIndex = index;\n        }\n      });\n      if (noteIndex > -1) {\n        this.props.notes.splice(noteIndex, 1);\n        localforage.setItem(\"notes\", this.props.notes).then(() => {\n          this.props.handleOpenMenu(false);\n          this.props.handleMenuMode(\"menu\");\n          toast.success(this.props.t(\"Delete Successfully\"));\n          this.props.handleMenuMode(\"highlight\");\n          this.props.handleFetchNotes();\n          this.props.handleNoteKey(\"\");\n        });\n      }\n    } else {\n      this.props.handleOpenMenu(false);\n      this.props.handleMenuMode(\"menu\");\n      this.props.handleNoteKey(\"\");\n    }\n  };\n\n  render() {\n    let note: NoteModel;\n    if (this.props.noteKey) {\n      this.props.notes.forEach((item) => {\n        if (item.key === this.props.noteKey) {\n          note = item;\n        }\n      });\n    }\n\n    const renderNoteEditor = () => {\n      return (\n        <div className=\"note-editor\">\n          <div className=\"editor-box-parent\">\n            <textarea className=\"editor-box\" />\n          </div>\n          <div\n            className=\"note-tags\"\n            style={{ position: \"absolute\", bottom: \"0px\", height: \"70px\" }}\n          >\n            <NoteTag\n              {...{\n                handleTag: this.handleTag,\n                tag: this.props.noteKey && note ? note.tag : [],\n              }}\n            />\n          </div>\n\n          <div className=\"note-button-container\">\n            <span\n              className=\"book-manage-title\"\n              onClick={() => {\n                this.handleClose();\n              }}\n            >\n              {this.props.noteKey ? (\n                <Trans>Delete</Trans>\n              ) : (\n                <Trans>Cancel</Trans>\n              )}\n            </span>\n            <span\n              className=\"book-manage-title\"\n              onClick={() => {\n                this.createNote();\n              }}\n            >\n              <Trans>Confirm</Trans>\n            </span>\n          </div>\n        </div>\n      );\n    };\n    return renderNoteEditor();\n  }\n}\nexport default PopupNote;\n","import { connect } from \"react-redux\";\nimport {\n  handleOpenMenu,\n  handleMenuMode,\n  handleNoteKey,\n  handleFetchNotes,\n} from \"../../../store/actions\";\nimport { stateType } from \"../../../store\";\nimport { withTranslation } from \"react-i18next\";\nimport PopupNote from \"./component\";\nconst mapStateToProps = (state: stateType) => {\n  return {\n    currentEpub: state.book.currentEpub,\n    currentBook: state.book.currentBook,\n    notes: state.reader.notes,\n    color: state.reader.color,\n    flattenChapters: state.reader.flattenChapters,\n    noteKey: state.reader.noteKey,\n  };\n};\nconst actionCreator = {\n  handleOpenMenu,\n  handleMenuMode,\n  handleNoteKey,\n  handleFetchNotes,\n};\nexport default connect(\n  mapStateToProps,\n  actionCreator\n)(withTranslation()(PopupNote as any));\n","import React from \"react\";\nimport StorageUtil from \"../../utils/serviceUtils/storageUtil\";\nimport \"./colorOption.css\";\nimport { ColorProps, ColorStates } from \"./interface\";\n\nclass ColorOption extends React.Component<ColorProps, ColorStates> {\n  constructor(props: ColorProps) {\n    super(props);\n    this.state = {\n      isLine: this.props.color > 3 ? true : false,\n    };\n  }\n  handleChangeOption = () => {\n    this.setState({ isLine: !this.state.isLine });\n  };\n  render() {\n    const renderLine = () => {\n      return [\"#FF0000\", \"#000080\", \"#0000FF\", \"#2EFF2E\"].map((item, index) => {\n        return (\n          <div\n            className=\"line-option\"\n            style={{\n              border: `${this.props.color === index + 4 ? \"\" : \"2px\"}`,\n            }}\n            key={item}\n            onClick={() => {\n              this.props.handleColor(index + 4);\n              StorageUtil.setReaderConfig(\n                \"highlightIndex\",\n                (index + 4).toString()\n              );\n            }}\n          >\n            <div\n              className=\"demo-line\"\n              style={{ borderBottom: `solid 2px ${item}` }}\n            ></div>\n          </div>\n        );\n      });\n    };\n    const renderColor = () => {\n      return [\"#FBF1D1\", \"#EFEEB0\", \"#CAEFC9\", \"#76BEE9\"].map((item, index) => {\n        return (\n          <div\n            className=\"color-option\"\n            style={{\n              backgroundColor: item,\n              border: `${this.props.color === index ? \"\" : \"0px\"}`,\n            }}\n            key={item}\n            onClick={() => {\n              this.props.handleColor(index);\n              StorageUtil.setReaderConfig(\"highlightIndex\", index.toString());\n            }}\n          ></div>\n        );\n      });\n    };\n    return (\n      <div className=\"color-option-container\">\n        {!this.state.isLine && renderColor()}\n        <span\n          className=\"icon-sort popup-color-more\"\n          onClick={() => {\n            this.handleChangeOption();\n          }}\n        ></span>\n        {this.state.isLine && renderLine()}\n      </div>\n    );\n  }\n}\n\nexport default ColorOption;\n","import { connect } from \"react-redux\";\nimport { handleColor, handleSelection } from \"../../store/actions\";\nimport { stateType } from \"../../store\";\nimport About from \"./component\";\nconst mapStateToProps = (state: stateType) => {\n  return {\n    color: state.reader.color,\n    currentEpub: state.book.currentEpub,\n    currentBook: state.book.currentBook,\n  };\n};\nconst actionCreator = {\n  handleColor,\n  handleSelection,\n};\nexport default connect(mapStateToProps, actionCreator)(About);\n","export const popupList = [\n  { name: \"note\", title: \"Take Note\", icon: \"note\" },\n  { name: \"digest\", title: \"Highlight\", icon: \"highlight\" },\n  { name: \"translation\", title: \"Translate\", icon: \"translation\" },\n  { name: \"copy\", title: \"Copy\", icon: \"copy\" },\n  { name: \"search-book\", title: \"Search in the book\", icon: \"search-book\" },\n  { name: \"google\", title: \"Search on the internet\", icon: \"google\" },\n  { name: \"speaker\", title: \"Speak the text\", icon: \"Speaker\" },\n];\n","import React from \"react\";\nimport \"./popupOption.css\";\nimport localforage from \"localforage\";\nimport Note from \"../../../model/Note\";\nimport { PopupOptionProps } from \"./interface\";\nimport ColorOption from \"../../colorOption\";\nimport RecordLocation from \"../../../utils/readUtils/recordLocation\";\nimport { Tooltip } from \"react-tippy\";\nimport { popupList } from \"../../../constants/popupList\";\nimport StorageUtil from \"../../../utils/serviceUtils/storageUtil\";\nimport toast from \"react-hot-toast\";\nimport { getSelection } from \"../../../utils/serviceUtils/mouseEvent\";\nimport copy from \"copy-text-to-clipboard\";\nimport { getHightlightCoords } from \"../../../utils/fileUtils/pdfUtil\";\nimport { getIframeDoc } from \"../../../utils/serviceUtils/docUtil\";\nimport { openExternalUrl } from \"../../../utils/serviceUtils/urlUtil\";\n\ndeclare var window: any;\n\nclass PopupOption extends React.Component<PopupOptionProps> {\n  handleNote = () => {\n    this.props.handleChangeDirection(false);\n    this.props.handleMenuMode(\"note\");\n    this.handleEdge();\n  };\n  handleEdge = () => {\n    let page: any = { offsetLeft: 0 };\n    if (this.props.currentBook.format !== \"PDF\") {\n      page = document.getElementById(\"page-area\");\n      if (!page.clientWidth) return;\n    }\n    let popupMenu: any = document.querySelector(\".popup-menu-container\");\n    let posX = popupMenu?.style.left;\n    let posY = popupMenu?.style.top;\n    posX = parseInt(posX.substr(0, posX.length - 2));\n    posY = parseInt(posY.substr(0, posY.length - 2));\n    let rightEdge = this.props.pageWidth - 310 + page.offsetLeft * 2;\n\n    if (posX > rightEdge) {\n      popupMenu?.setAttribute(\"style\", `left:${rightEdge}px;top:${posY}px`);\n    }\n  };\n  handleCopy = () => {\n    let text = getSelection();\n    if (!text) return;\n    copy(text);\n    this.props.handleOpenMenu(false);\n    let doc = getIframeDoc();\n    if (!doc) return;\n    doc.getSelection()?.empty();\n    toast.success(this.props.t(\"Copy Successfully\"));\n  };\n  handleTrans = () => {\n    this.props.handleMenuMode(\"trans\");\n    this.props.handleOriginalText(getSelection() || \"\");\n    this.handleEdge();\n  };\n  handleDigest = () => {\n    let bookKey = this.props.currentBook.key;\n    let cfi = \"\";\n    if (this.props.currentBook.format === \"EPUB\") {\n      cfi = RecordLocation.getCfi(this.props.currentBook.key).cfi;\n    } else if (this.props.currentBook.format === \"PDF\") {\n      cfi = JSON.stringify(\n        RecordLocation.getPDFLocation(this.props.currentBook.md5)\n      );\n    } else {\n      cfi = JSON.stringify(\n        RecordLocation.getHtmlLocation(this.props.currentBook.key)\n      );\n    }\n    let percentage = RecordLocation.getCfi(this.props.currentBook.key)\n      .percentage\n      ? RecordLocation.getCfi(this.props.currentBook.key).percentage\n      : 0;\n    let color = this.props.color;\n    let notes = \"\";\n    let pageArea = document.getElementById(\"page-area\");\n    if (!pageArea) return;\n    let iframe = pageArea.getElementsByTagName(\"iframe\")[0];\n    if (!iframe) return;\n    let doc = iframe.contentDocument;\n    if (!doc) return;\n    let charRange;\n    if (this.props.currentBook.format !== \"PDF\") {\n      charRange = window.rangy\n        .getSelection(iframe)\n        .saveCharacterRanges(doc.body)[0];\n    }\n    let range =\n      this.props.currentBook.format === \"PDF\"\n        ? JSON.stringify(getHightlightCoords())\n        : JSON.stringify(charRange);\n    let text = doc.getSelection()?.toString();\n    if (!text) return;\n    text = text.replace(/\\s\\s/g, \"\");\n    text = text.replace(/\\r/g, \"\");\n    text = text.replace(/\\n/g, \"\");\n    text = text.replace(/\\t/g, \"\");\n    text = text.replace(/\\f/g, \"\");\n    let digest = new Note(\n      bookKey,\n      this.props.chapter,\n      this.props.chapterIndex,\n      text,\n      cfi,\n      range,\n      notes,\n      percentage,\n      color,\n      []\n    );\n    let noteArr = this.props.notes;\n    noteArr.push(digest);\n    localforage.setItem(\"notes\", noteArr).then(() => {\n      this.props.handleOpenMenu(false);\n      toast.success(this.props.t(\"Add Successfully\"));\n      this.props.handleFetchNotes();\n      this.props.handleMenuMode(\"highlight\");\n    });\n    // let classes = [\n    //   \"color-0\",\n    //   \"color-1\",\n    //   \"color-2\",\n    //   \"color-3\",\n    //   \"line-0\",\n    //   \"line-1\",\n    //   \"line-2\",\n    //   \"line-3\",\n    // ];\n    // if (this.props.currentBook.format === \"PDF\") {\n    //   showHighlight(JSON.parse(range), classes[color]);\n    // }\n  };\n  handleJump = (url: string) => {\n    openExternalUrl(url);\n  };\n  handleSearchInternet = () => {\n    switch (StorageUtil.getReaderConfig(\"searchEngine\")) {\n      case \"google\":\n        this.handleJump(\"https://www.google.com/search?q=\" + getSelection());\n        break;\n      case \"baidu\":\n        this.handleJump(\"https://www.baidu.com/s?wd=\" + getSelection());\n        break;\n      case \"bing\":\n        this.handleJump(\"https://www.bing.com/search?q=\" + getSelection());\n        break;\n      case \"duckduckgo\":\n        this.handleJump(\"https://duckduckgo.com/?q=\" + getSelection());\n        break;\n      case \"yandex\":\n        this.handleJump(\"https://yandex.com/search/?text=\" + getSelection());\n        break;\n      case \"yahoo\":\n        this.handleJump(\"https://search.yahoo.com/search?p=\" + getSelection());\n        break;\n      case \"naver\":\n        this.handleJump(\n          \"https://search.naver.com/search.naver?where=nexearch&sm=top_hty&fbm=1&ie=utf8&query=\" +\n            getSelection()\n        );\n        break;\n      case \"baike\":\n        this.handleJump(\"https://baike.baidu.com/item/\" + getSelection());\n        break;\n      case \"wiki\":\n        this.handleJump(\"https://en.wikipedia.org/wiki/\" + getSelection());\n        break;\n      default:\n        this.handleJump(\n          navigator.language === \"zh-CN\"\n            ? \"https://www.baidu.com/s?wd=\" + getSelection()\n            : \"https://www.google.com/search?q=\" + getSelection()\n        );\n        break;\n    }\n  };\n  handleSearchBook = () => {\n    let leftPanel = document.querySelector(\".left-panel\");\n    const clickEvent = new MouseEvent(\"click\", {\n      view: window,\n      bubbles: true,\n      cancelable: true,\n    });\n    if (!leftPanel) return;\n    leftPanel.dispatchEvent(clickEvent);\n    const focusEvent = new MouseEvent(\"focus\", {\n      view: window,\n      bubbles: true,\n      cancelable: true,\n    });\n    let searchBox: any = document.querySelector(\".header-search-box\");\n    searchBox.dispatchEvent(focusEvent);\n    let searchIcon = document.querySelector(\".header-search-icon\");\n    searchIcon?.dispatchEvent(clickEvent);\n    searchBox.value = getSelection() || \"\";\n    const keyEvent: any = new KeyboardEvent(\"keydown\", {\n      bubbles: true,\n      cancelable: true,\n      keyCode: 13,\n    } as any);\n    searchBox.dispatchEvent(keyEvent);\n    this.props.handleOpenMenu(false);\n  };\n\n  handleSpeak = () => {\n    var msg = new SpeechSynthesisUtterance();\n    msg.text = getSelection() || \"\";\n    msg.voice = window.speechSynthesis.getVoices()[0];\n    window.speechSynthesis.speak(msg);\n  };\n  render() {\n    const renderMenuList = () => {\n      return (\n        <>\n          <div className=\"menu-list\">\n            {popupList.map((item, index) => {\n              return (\n                <div\n                  key={item.name}\n                  className={item.name + \"-option\"}\n                  onClick={() => {\n                    switch (index) {\n                      case 0:\n                        this.handleNote();\n                        break;\n                      case 1:\n                        this.handleDigest();\n                        break;\n                      case 2:\n                        this.handleTrans();\n                        break;\n                      case 3:\n                        this.handleCopy();\n                        break;\n                      case 4:\n                        this.handleSearchBook();\n                        break;\n                      case 5:\n                        this.handleSearchInternet();\n                        break;\n                      case 6:\n                        this.handleSpeak();\n                        break;\n\n                      default:\n                        break;\n                    }\n                  }}\n                >\n                  <Tooltip\n                    title={this.props.t(item.title)}\n                    position=\"top\"\n                    trigger=\"mouseenter\"\n                  >\n                    <span\n                      className={`icon-${item.icon} ${item.name}-icon`}\n                    ></span>\n                  </Tooltip>\n                </div>\n              );\n            })}\n          </div>\n          <ColorOption />\n        </>\n      );\n    };\n    return renderMenuList();\n  }\n}\n\nexport default PopupOption;\n","import { connect } from \"react-redux\";\nimport {\n  handleOpenMenu,\n  handleMenuMode,\n  handleChangeDirection,\n} from \"../../../store/actions\";\nimport { handleFetchNotes, handleOriginalText } from \"../../../store/actions\";\nimport { stateType } from \"../../../store\";\nimport { withTranslation } from \"react-i18next\";\nimport PopupOption from \"./component\";\nconst mapStateToProps = (state: stateType) => {\n  return {\n    currentBook: state.book.currentBook,\n    currentEpub: state.book.currentEpub,\n    selection: state.viewArea.selection,\n    notes: state.reader.notes,\n    color: state.reader.color,\n    flattenChapters: state.reader.flattenChapters,\n  };\n};\nconst actionCreator = {\n  handleOpenMenu,\n  handleMenuMode,\n  handleFetchNotes,\n  handleOriginalText,\n  handleChangeDirection,\n};\nexport default connect(\n  mapStateToProps,\n  actionCreator\n)(withTranslation()(PopupOption as any));\n","export const translationList = [\n  {\n    name: \"简体中文\",\n    value: \"zh\",\n    lang: \"zh-CN\",\n  },\n  {\n    name: \"繁体中文\",\n    value: \"cht\",\n  },\n  {\n    name: \"English\",\n    value: \"en\",\n  },\n  {\n    name: \"한국어\",\n    value: \"kor\",\n  },\n  {\n    name: \"日本語\",\n    value: \"jp\",\n  },\n  {\n    name: \"español\",\n    value: \"spa\",\n  },\n  {\n    name: \"Русский\",\n    value: \"ru\",\n  },\n  {\n    name: \"italiano\",\n    value: \"it\",\n  },\n  {\n    name: \"português\",\n    value: \"pt\",\n  },\n  {\n    name: \"français\",\n    value: \"fra\",\n  },\n  {\n    name: \"العربية\",\n    value: \"ara\",\n  },\n  {\n    name: \"ไทย\",\n    value: \"th\",\n  },\n  {\n    name: \"Deutsch\",\n    value: \"de\",\n  },\n  {\n    name: \"Ελληνικά\",\n    value: \"el\",\n  },\n  {\n    name: \"Nederlands\",\n    value: \"Polskie\",\n  },\n  {\n    name: \"български\",\n    value: \"bul\",\n  },\n  {\n    name: \"Eestlane\",\n    value: \"est\",\n  },\n  {\n    name: \"dansk\",\n    value: \"dan\",\n  },\n  {\n    name: \"Suomalainen\",\n    value: \"fin\",\n  },\n  {\n    name: \"čeština\",\n    value: \"cs\",\n  },\n  {\n    name: \"Română\",\n    value: \"rom\",\n  },\n  {\n    name: \"Slovenščina\",\n    value: \"slo\",\n  },\n  {\n    name: \"svenska\",\n    value: \"swe\",\n  },\n  {\n    name: \"Magyar\",\n    value: \"hu\",\n  },\n  {\n    name: \"Tiếng Việt\",\n    value: \"vie\",\n  },\n];\n","import React from \"react\";\nimport \"./popupTrans.css\";\nimport { PopupTransProps, PopupTransState } from \"./interface\";\nimport md5 from \"md5\";\nimport { Trans } from \"react-i18next\";\nimport { translationList } from \"../../../constants/translationList\";\nimport StorageUtil from \"../../../utils/serviceUtils/storageUtil\";\n\nclass PopupTrans extends React.Component<PopupTransProps, PopupTransState> {\n  constructor(props: PopupTransProps) {\n    super(props);\n    this.state = {\n      translatedText: \"\",\n    };\n  }\n  componentDidMount() {\n    let originalText = this.props.originalText.replace(/(\\r\\n|\\n|\\r)/gm, \"\");\n    this.handleTrans(originalText);\n  }\n  handleTrans = (text: string) => {\n    var script = document.createElement(\"script\");\n    script.type = \"text/javascript\";\n    script.src = `https://fanyi-api.baidu.com/api/trans/vip/translate?q=${text}&from=auto&to=${\n      StorageUtil.getReaderConfig(\"transTarget\") || \"auto\"\n    }&appid=20200802000531425&salt=1435660288&sign=${md5(\n      // eslint-disable-next-line\n      \"20200802000531425\" + text + \"1435660288\" + \"sJRHTorJq8j8_ru2GkHl\"\n    )}&callback=handleCallback`;\n    document.head.appendChild(script);\n    (window as any).handleCallback = (res: any) => {\n      if (res.error_code && res.error_code === 54003) {\n        this.setState({\n          translatedText: this.props.t(\"Reach frequency limit\"),\n        });\n      } else {\n        this.setState({\n          translatedText: res.trans_result\n            ? res.trans_result[0].dst\n            : this.props.t(\"Error happens\"),\n        });\n      }\n    };\n  };\n  render() {\n    const renderNoteEditor = () => {\n      return (\n        <div className=\"trans-container\">\n          <div className=\"trans-text-box\">{this.state.translatedText}</div>\n          <div className=\"target-lang-container\">\n            <p className=\"general-setting-title\" style={{ display: \"inline\" }}>\n              <Trans>Target</Trans>\n            </p>\n            <select\n              className=\"booklist-shelf-list\"\n              style={{ width: \"100px\" }}\n              onChange={(event: React.ChangeEvent<HTMLSelectElement>) => {\n                let targetLang = event.target.value;\n                StorageUtil.setReaderConfig(\"transTarget\", targetLang);\n                this.handleTrans(\n                  this.props.originalText.replace(/(\\r\\n|\\n|\\r)/gm, \"\")\n                );\n              }}\n            >\n              {translationList.map((item, index) => {\n                return (\n                  <option\n                    value={item.value}\n                    key={index}\n                    className=\"add-dialog-shelf-list-option\"\n                    selected={\n                      StorageUtil.getReaderConfig(\"transTarget\") === item.value\n                        ? true\n                        : false\n                    }\n                  >\n                    {item.name}\n                  </option>\n                );\n              })}\n            </select>\n          </div>\n        </div>\n      );\n    };\n    return renderNoteEditor();\n  }\n}\nexport default PopupTrans;\n","import { connect } from \"react-redux\";\nimport { handleOpenMenu, handleMenuMode } from \"../../../store/actions\";\nimport { stateType } from \"../../../store\";\nimport { withTranslation } from \"react-i18next\";\nimport PopupTrans from \"./component\";\nconst mapStateToProps = (state: stateType) => {\n  return {\n    originalText: state.reader.originalText,\n  };\n};\nconst actionCreator = {\n  handleOpenMenu,\n  handleMenuMode,\n};\nexport default connect(\n  mapStateToProps,\n  actionCreator\n)(withTranslation()(PopupTrans as any));\n","import React from \"react\";\nimport \"./popupMenu.css\";\nimport PopupNote from \"../popupNote\";\nimport PopupOption from \"../popupOption\";\nimport PopupTrans from \"../popupTrans\";\nimport { PopupMenuProps, PopupMenuStates } from \"./interface\";\nimport StorageUtil from \"../../../utils/serviceUtils/storageUtil\";\nimport {\n  getIframeDoc,\n  getPDFIframeDoc,\n} from \"../../../utils/serviceUtils/docUtil\";\nlet colors = [\"#fac106\", \"#ebe702\", \"#0be603\", \"#0493e6\"];\nlet lines = [\"#FF0000\", \"#000080\", \"#0000FF\", \"#2EFF2E\"];\n\ndeclare var window: any;\n\nclass PopupMenu extends React.Component<PopupMenuProps, PopupMenuStates> {\n  highlighter: any;\n  timer!: NodeJS.Timeout;\n  key: any;\n  mode: string;\n  showNote: boolean;\n  isFirstShow: boolean;\n  rect: any;\n  constructor(props: PopupMenuProps) {\n    super(props);\n    this.showNote = false;\n    this.isFirstShow = false;\n    this.highlighter = null;\n    this.mode = \"\";\n    this.state = {\n      deleteKey: \"\",\n      rect: this.props.rect,\n    };\n  }\n\n  componentDidMount() {\n    this.props.rendition.on(\"rendered\", () => {\n      new Promise<void>((resolve, reject) => {\n        this.getHighlighter();\n        resolve();\n      }).then(() => {\n        this.renderHighlighters();\n      });\n      let doc = getIframeDoc();\n      if (!doc) return;\n      doc.addEventListener(\"mousedown\", this.openMenu);\n      if (this.props.currentBook.format === \"PDF\") {\n        setTimeout(() => {\n          this.renderHighlighters();\n        }, 1000);\n\n        doc.addEventListener(\"mousewheel\", () => {\n          this.renderHighlighters();\n        });\n      }\n    });\n  }\n  componentWillReceiveProps(nextProps: PopupMenuProps) {\n    if (nextProps.rect !== this.props.rect) {\n      this.setState(\n        {\n          rect: nextProps.rect,\n        },\n        () => {\n          this.openMenu();\n        }\n      );\n    }\n  }\n  //新建高亮\n  getHighlighter = () => {\n    // 注意点一\n    // 为了每次切换章节时都有与当前文档相关联的 pen\n    let doc = getIframeDoc();\n    if (!doc) return;\n    this.highlighter = window.rangy.createHighlighter(doc);\n    let classes = [\n      \"color-0\",\n      \"color-1\",\n      \"color-2\",\n      \"color-3\",\n      \"line-0\",\n      \"line-1\",\n      \"line-2\",\n      \"line-3\",\n    ];\n    classes.forEach((item) => {\n      let config = {\n        ignoreWhiteSpace: true,\n        elementTagName: \"span\",\n        elementProperties: {\n          onclick: this.handleNoteClick,\n        },\n        onElementCreate: (element: any) => {\n          setTimeout(() => {\n            element.dataset.key =\n              this.key || this.props.notes[this.props.notes.length - 1].key;\n          }, 100);\n        },\n      };\n      let applier = window.rangy.createClassApplier(item, config);\n      this.highlighter.addClassApplier(applier);\n    });\n  };\n  handleNoteClick = (event: any) => {\n    let doc = getIframeDoc();\n    if (!doc) return;\n    this.props.handleMenuMode(\"note\");\n    let sel = doc.getSelection();\n    if (!sel) return;\n    let range = sel.getRangeAt(0);\n    sel.removeAllRanges();\n    sel.addRange(range);\n    this.setState({ rect: range.getBoundingClientRect() }, () => {\n      this.showMenu();\n      this.handleClickHighlighter(event.currentTarget.dataset.key);\n      event.stopPropagation();\n    });\n  };\n  handlePDFClick = (event: any) => {\n    this.props.handleMenuMode(\"note\");\n    this.setState({ rect: event.currentTarget.getBoundingClientRect() }, () => {\n      this.showMenu();\n      this.handleClickHighlighter(event.currentTarget.getAttribute(\"key\"));\n      event.stopPropagation();\n    });\n  };\n\n  showHighlight = (selected: any, colorCode: string, noteKey: string) => {\n    let iWin = getPDFIframeDoc();\n    if (!iWin) return;\n    var pageIndex = selected.page;\n    if (!iWin.PDFViewerApplication.pdfViewer) return;\n    var page = iWin.PDFViewerApplication.pdfViewer.getPageView(pageIndex);\n    if (page && page.div && page.textLayer && page.textLayer.textLayerDiv) {\n      var pageElement =\n        colorCode.indexOf(\"color\") > -1\n          ? page.textLayer.textLayerDiv\n          : page.div;\n\n      var viewport = page.viewport;\n      selected.coords.forEach((rect) => {\n        var bounds = viewport.convertToViewportRectangle(rect);\n        var el = iWin.document.createElement(\"div\");\n\n        el?.setAttribute(\n          \"style\",\n          \"position: absolute;\" +\n            (colorCode.indexOf(\"color\") > -1\n              ? \"background-color: \"\n              : \"border-bottom: \") +\n            (colorCode.indexOf(\"color\") > -1\n              ? colors[colorCode.split(\"-\")[1]]\n              : `2px solid ${lines[colorCode.split(\"-\")[1]]}`) +\n            \"; left:\" +\n            Math.min(bounds[0], bounds[2]) +\n            \"px; top:\" +\n            Math.min(bounds[1], bounds[3]) +\n            \"px;\" +\n            \"width:\" +\n            Math.abs(bounds[0] - bounds[2]) +\n            \"px; height:\" +\n            Math.abs(bounds[1] - bounds[3]) +\n            \"px; z-index:0;\"\n        );\n        el?.setAttribute(\"key\", noteKey);\n        el?.addEventListener(\"click\", (event: any) => {\n          this.handlePDFClick(event);\n        });\n\n        pageElement.appendChild(el);\n      });\n    }\n  };\n  handleClickHighlighter = (key: string) => {\n    let dialog: HTMLInputElement | null = document.querySelector(\".editor-box\");\n    if (!dialog) return;\n    let note = this.props.notes.filter((item) => item.key === key)[0];\n    if (note && note.notes) {\n      dialog.value = note.notes;\n    }\n    dialog?.focus();\n    this.props.handleNoteKey(key);\n  };\n  handleShowDelete = (deleteKey: string) => {\n    this.setState({ deleteKey });\n  };\n  showMenu = () => {\n    let rect = this.state.rect;\n    if (!rect) return;\n    this.props.handleChangeDirection(false);\n    // const rect = this.rect;\n    let page: any = { offsetLeft: 0 };\n    if (this.props.currentBook.format !== \"PDF\") {\n      page = document.getElementById(\"page-area\");\n      if (!page.clientWidth) return;\n    }\n\n    let height = 200;\n    let x =\n      this.props.currentBook.format === \"PDF\"\n        ? rect.left\n        : StorageUtil.getReaderConfig(\"readerMode\") === \"single\"\n        ? (rect.x % this.props.pageWidth) + page.offsetLeft\n        : StorageUtil.getReaderConfig(\"readerMode\") === \"scroll\"\n        ? rect.left + page.offsetLeft\n        : rect.x % this.props.pageWidth;\n    let y = rect.y % this.props.pageHeight;\n    let posX = x + rect.width / 2 - 20;\n    //防止menu超出图书\n    let rightEdge =\n      this.props.menuMode === \"note\" || this.props.menuMode === \"trans\"\n        ? this.props.pageWidth - 310 + page.offsetLeft * 2\n        : this.props.pageWidth - 200 + page.offsetLeft * 2;\n    let posY: number;\n    //控制menu方向\n    if (y < height) {\n      this.props.handleChangeDirection(true);\n      posY = y + 67;\n    } else {\n      posY = y - height / 2 - 57;\n    }\n    posX = posX > rightEdge ? rightEdge : posX;\n    this.props.handleOpenMenu(true);\n    let popupMenu = document.querySelector(\".popup-menu-container\");\n    popupMenu?.setAttribute(\"style\", `left:${posX}px;top:${posY}px`);\n    this.setState({ rect: null });\n  };\n  //渲染高亮\n  renderHighlighters = () => {\n    let highlighters: any = this.props.notes;\n    if (!highlighters) return;\n    let highlightersByChapter = highlighters.filter((item: any) => {\n      return (\n        item.chapterIndex === this.props.chapterIndex &&\n        item.chapter === this.props.chapter &&\n        item.bookKey === this.props.currentBook.key\n      );\n    });\n    let pageArea = document.getElementById(\"page-area\");\n    if (!pageArea) return;\n    let iframe = pageArea.getElementsByTagName(\"iframe\")[0];\n    if (!iframe || !iframe.contentWindow) return;\n    let iWin = iframe.contentWindow || iframe.contentDocument?.defaultView;\n    this.highlighter && this.highlighter.removeAllHighlights(); // 为了避免下次反序列化失败，必须先清除已有的高亮\n\n    let classes = [\n      \"color-0\",\n      \"color-1\",\n      \"color-2\",\n      \"color-3\",\n      \"line-0\",\n      \"line-1\",\n      \"line-2\",\n      \"line-3\",\n    ];\n\n    highlightersByChapter &&\n      highlightersByChapter.forEach((item: any) => {\n        this.key = item.key;\n        //控制渲染指定图书的指定高亮\n        if (item.bookKey === this.props.currentBook.key) {\n          try {\n            if (this.props.currentBook.format === \"PDF\") {\n              this.showHighlight(\n                JSON.parse(item.range),\n                classes[item.color],\n                item.key\n              );\n            } else {\n              let temp = JSON.parse(item.range);\n              temp = [temp];\n              let doc = iframe.contentDocument;\n              window.rangy\n                .getSelection(iframe)\n                .restoreCharacterRanges(doc, temp);\n              this.highlighter.highlightSelection(classes[item.color]);\n            }\n          } catch (e) {\n            console.warn(\n              e,\n              \"Exception has been caught when restore character ranges.\"\n            );\n            return;\n          }\n        }\n      });\n    if (!iWin || !iWin.getSelection()) return;\n    iWin.getSelection()?.empty(); // 清除文本选取\n    // this.props.isOpenMenu &&\n    //   window.rangy.deserializeSelection(serial, null, iWin); // （为了选取文本后不被上一行代码清除掉）恢复原本的文本选取\n  };\n  //控制弹窗\n  openMenu = () => {\n    this.setState({ deleteKey: \"\" });\n    let pageArea = document.getElementById(\"page-area\");\n    if (!pageArea) return;\n    let iframe = pageArea.getElementsByTagName(\"iframe\")[0];\n    if (!iframe) return;\n    let doc = iframe.contentDocument;\n    if (!doc) return;\n    let sel = doc.getSelection();\n    this.props.handleChangeDirection(false);\n    // 如果 popmenu正在被展示，则隐藏\n    if (this.props.isOpenMenu) {\n      this.props.handleMenuMode(\"menu\");\n      this.props.handleOpenMenu(false);\n      this.props.handleNoteKey(\"\");\n    }\n    if (!sel) return;\n    // 使弹出菜单更加灵活可控;\n    if (sel.isCollapsed) {\n      this.props.isOpenMenu && this.props.handleOpenMenu(false);\n      this.props.handleMenuMode(\"menu\");\n      this.props.handleNoteKey(\"\");\n      return;\n    }\n    this.showMenu();\n    this.props.handleMenuMode(\"menu\");\n  };\n  //添加高亮\n  handleHighlight() {\n    let pageArea = document.getElementById(\"page-area\");\n    if (!pageArea) return;\n    let iframe = pageArea.getElementsByTagName(\"iframe\")[0];\n    if (!iframe) return;\n    let doc = iframe.contentDocument;\n    if (!doc) return;\n    let color = this.props.color;\n    let classes = [\n      \"color-0\",\n      \"color-1\",\n      \"color-2\",\n      \"color-3\",\n      \"line-0\",\n      \"line-1\",\n      \"line-2\",\n      \"line-3\",\n    ];\n    if (!this.highlighter) return;\n    this.highlighter.highlightSelection(classes[color]);\n    this.props.handleMenuMode(\"menu\");\n    this.props.handleOpenMenu(false);\n\n    doc.getSelection()?.empty();\n    this.props.handleMenuMode(\"menu\");\n    this.highlighter && this.highlighter.removeAllHighlights();\n    new Promise<void>((resolve) => {\n      this.getHighlighter();\n      resolve();\n    }).then(() => {\n      this.renderHighlighters();\n    });\n  }\n  render() {\n    if (this.props.menuMode === \"highlight\") {\n      // this.getHighlighter();\n      this.handleHighlight();\n    }\n    const PopupProps = {\n      pageWidth: this.props.pageWidth,\n      pageHeight: this.props.pageHeight,\n      chapterIndex: this.props.chapterIndex,\n      chapter: this.props.chapter,\n    };\n    return (\n      <div>\n        <div\n          className=\"popup-menu-container\"\n          style={this.props.isOpenMenu ? {} : { display: \"none\" }}\n        >\n          <div className=\"popup-menu-box\">\n            {this.props.menuMode === \"menu\" ? (\n              <PopupOption {...PopupProps} />\n            ) : this.props.menuMode === \"note\" ? (\n              <PopupNote {...PopupProps} />\n            ) : this.props.menuMode === \"trans\" ? (\n              <PopupTrans {...PopupProps} />\n            ) : null}\n            <span\n              className=\"icon-close popup-close\"\n              onClick={() => {\n                this.props.handleOpenMenu(false);\n              }}\n              style={this.props.isChangeDirection ? { top: \"170px\" } : {}}\n            ></span>\n          </div>\n          {this.props.isChangeDirection ? (\n            <span\n              className=\"icon-popup popup-menu-triangle-up\"\n              style={\n                this.props.menuMode === \"highlight\" ? { bottom: \"110px\" } : {}\n              }\n            ></span>\n          ) : (\n            <span className=\"icon-popup popup-menu-triangle-down\"></span>\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default PopupMenu;\n","import {\n  handleSelection,\n  handleOpenMenu,\n  handleMenuMode,\n  handleChangeDirection,\n  handleNoteKey,\n} from \"../../../store/actions\";\nimport { connect } from \"react-redux\";\nimport { stateType } from \"../../../store\";\nimport PopupMenu from \"./component\";\nimport { withTranslation } from \"react-i18next\";\n\nconst mapStateToProps = (state: stateType) => {\n  return {\n    digests: state.reader.digests,\n    notes: state.reader.notes,\n    noteKey: state.reader.noteKey,\n    currentEpub: state.book.currentEpub,\n    currentBook: state.book.currentBook,\n    isOpenMenu: state.viewArea.isOpenMenu,\n    menuMode: state.viewArea.menuMode,\n    color: state.reader.color,\n    isChangeDirection: state.viewArea.isChangeDirection,\n  };\n};\nconst actionCreator = {\n  handleSelection,\n  handleOpenMenu,\n  handleMenuMode,\n  handleChangeDirection,\n  handleNoteKey,\n};\nexport default connect(\n  mapStateToProps,\n  actionCreator\n)(withTranslation()(PopupMenu));\n","import React from \"react\";\nimport \"./deleteIcon.css\";\nimport { DeleteIconProps, DeleteIconStates } from \"./interface\";\nimport localforage from \"localforage\";\nimport TagUtil from \"../../utils/readUtils/tagUtil\";\nimport DeletePopup from \"../dialogs/deletePopup\";\nimport toast from \"react-hot-toast\";\nclass DeleteIcon extends React.Component<DeleteIconProps, DeleteIconStates> {\n  constructor(props: DeleteIconProps) {\n    super(props);\n    this.state = {\n      deleteIndex: -1,\n      isOpenDelete: false,\n    };\n  }\n\n  handleDelete = () => {\n    let deleteItems =\n      this.props.mode === \"notes\"\n        ? this.props.notes\n        : this.props.mode === \"tags\"\n        ? TagUtil.getAllTags()\n        : this.props.bookmarks;\n    let deleteFunc =\n      this.props.mode === \"notes\"\n        ? this.props.handleFetchNotes\n        : this.props.handleFetchBookmarks;\n    deleteItems.forEach((item: any, index: number) => {\n      if (this.props.mode === \"tags\") {\n        item === this.props.tagName && TagUtil.clear(item);\n        return;\n      }\n      if (item.key === this.props.itemKey) {\n        deleteItems.splice(index, 1);\n        if (deleteItems.length === 0) {\n          localforage\n            .removeItem(this.props.mode)\n            .then(() => {\n              deleteFunc();\n              toast.success(this.props.t(\"Delete Successfully\"));\n            })\n            .catch(() => {\n              console.log(\"删除失败\");\n            });\n        } else {\n          localforage\n            .setItem(this.props.mode, deleteItems)\n            .then(() => {\n              deleteFunc();\n              toast.success(this.props.t(\"Delete Successfully\"));\n            })\n            .catch(() => {\n              console.log(\"修改失败\");\n            });\n        }\n      }\n    });\n  };\n  handleDeletePopup = (isOpenDelete: boolean) => {\n    this.setState({ isOpenDelete });\n    if (!isOpenDelete) {\n      this.props.handleChangeTag(this.props.index);\n    }\n  };\n  render() {\n    const deletePopupProps = {\n      name: this.props.tagName,\n      title: \"Delete this tag\",\n      description: \"This action will clear and remove this tag\",\n      handleDeletePopup: this.handleDeletePopup,\n      handleDeleteOpearion: this.handleDelete,\n    };\n    return (\n      <>\n        {this.state.isOpenDelete && <DeletePopup {...deletePopupProps} />}\n        <div\n          className=\"delete-digest-button\"\n          onClick={() => {\n            this.props.mode === \"tags\"\n              ? this.handleDeletePopup(true)\n              : this.handleDelete();\n          }}\n        >\n          <span className=\"icon-close delete-digest-icon\"></span>\n        </div>\n      </>\n    );\n  }\n}\n\nexport default DeleteIcon;\n","import { connect } from \"react-redux\";\nimport { stateType } from \"../../store\";\nimport {\n  handleFetchBookmarks,\n  handleFetchNotes,\n  handleShowBookmark,\n} from \"../../store/actions\";\nimport DeleteIcon from \"./component\";\nimport { withTranslation } from \"react-i18next\";\nconst mapStateToProps = (state: stateType) => {\n  return {\n    digests: state.reader.digests,\n    bookmarks: state.reader.bookmarks,\n    notes: state.reader.notes,\n    isReading: state.book.isReading,\n  };\n};\nconst actionCreator = {\n  handleFetchBookmarks,\n  handleFetchNotes,\n  handleShowBookmark,\n};\nexport default connect(\n  mapStateToProps,\n  actionCreator\n)(withTranslation()(DeleteIcon as any));\n","class Book {\n  key: string;\n  name: string;\n  author: string;\n  description: string;\n  md5: string;\n  cover: string;\n  format: string;\n  publisher: string;\n  size: number;\n  path: string;\n  charset: string;\n  constructor(\n    key: string,\n    name: string,\n    author: string,\n    description: string,\n    md5: string,\n    cover: string,\n    format: string,\n    publisher: string,\n    size: number,\n    path: string,\n    charset: string\n  ) {\n    this.key = key; // 数据库的键\n    this.name = name; // 书籍名\n    this.author = author; // 作者\n    this.description = description; // 书籍的描述\n    this.md5 = md5; //epub的md5值，防止重复导入\n    this.cover = cover;\n    this.format = format;\n    this.publisher = publisher;\n    this.size = size;\n    this.path = path;\n    this.charset = charset;\n  }\n}\n\nexport default Book;\n","import BookModel from \"../../model/Book\";\nimport NoteModel from \"../../model/Note\";\nclass SearchUtil {\n  static MergeArray(arr1: number[], arr2: number[]) {\n    var _arr: number[] = [];\n    for (let item of arr1) {\n      _arr.push(item);\n    }\n    for (let item of arr2) {\n      var flag = true;\n      for (let subitem of arr1) {\n        if (item === subitem) {\n          flag = false;\n          break;\n        }\n      }\n      if (flag) {\n        _arr.push(item);\n      }\n    }\n    return _arr;\n  }\n  static fuzzyQuery(list: string[], keyWord: string) {\n    var arr: number[] = [];\n    for (var i = 0; i < list.length; i++) {\n      if (list[i].indexOf(keyWord) > -1) {\n        arr.push(i);\n      }\n    }\n    return arr;\n  }\n  static MouseSearch(books: BookModel[]) {\n    let keyword = (\n      document.querySelector(\".header-search-box\") as HTMLInputElement\n    ).value.toLowerCase();\n    let bookNameArr: string[] = [];\n    let AuthorNameArr: string[] = [];\n    if (!books) return [];\n    books.forEach((item) => {\n      bookNameArr.push(item.name.toLowerCase());\n      AuthorNameArr.push(item.author.toLowerCase());\n    });\n    let bookResults = this.fuzzyQuery(bookNameArr, keyword);\n    let authorResults = this.fuzzyQuery(AuthorNameArr, keyword);\n\n    return this.MergeArray(bookResults, authorResults);\n  }\n  static KeySearch(event: any, books: BookModel[]) {\n    if (event && event.keyCode === 13) {\n      let bookNameArr: string[] = [];\n      let AuthorNameArr: string[] = [];\n      if (!books) return [];\n\n      books.forEach((item) => {\n        bookNameArr.push(item.name.toLowerCase());\n        AuthorNameArr.push(item.author.toLowerCase());\n      });\n      let bookResults = this.fuzzyQuery(\n        bookNameArr,\n        event.target.value.toLowerCase()\n      );\n      let authorResults = this.fuzzyQuery(\n        AuthorNameArr,\n        event.target.value.toLowerCase()\n      );\n\n      return this.MergeArray(bookResults, authorResults);\n    }\n  }\n  static MouseNoteSearch(notes: NoteModel[]) {\n    let keyword = (\n      document.querySelector(\".header-search-box\") as HTMLInputElement\n    ).value.toLowerCase();\n    let noteArr: string[] = [];\n    let textArr: string[] = [];\n    notes.forEach((item: NoteModel) => {\n      noteArr.push(item.notes.toLowerCase());\n      textArr.push(item.text.toLowerCase());\n    });\n    let noteResults = this.fuzzyQuery(noteArr, keyword);\n    let textResults = this.fuzzyQuery(textArr, keyword);\n    return this.MergeArray(noteResults, textResults);\n  }\n  static KeyNoteSearch(event: any, notes: NoteModel[]) {\n    if (event && event.keyCode === 13) {\n      let noteArr: string[] = [];\n      let textArr: string[] = [];\n      notes.forEach((item: NoteModel) => {\n        noteArr.push(item.notes.toLowerCase());\n        textArr.push(item.text.toLowerCase());\n      });\n      let noteResults = this.fuzzyQuery(\n        noteArr,\n        event.target.value.toLowerCase()\n      );\n      let textResults = this.fuzzyQuery(\n        textArr,\n        event.target.value.toLowerCase()\n      );\n      return this.MergeArray(noteResults, textResults);\n    }\n  }\n}\nexport default SearchUtil;\n","//搜索框\nimport React from \"react\";\nimport \"./searchBox.css\";\nimport SearchUtil from \"../../utils/serviceUtils/searchUtil\";\nimport { SearchBoxProps } from \"./interface\";\nclass SearchBox extends React.Component<SearchBoxProps> {\n  componentDidMount() {\n    if (this.props.isNavSearch) {\n      let searchBox: any = document.querySelector(\".header-search-box\");\n      searchBox && searchBox.focus();\n    }\n  }\n  handleMouse = () => {\n    let value = (this.refs.searchBox as any).value;\n    if (this.props.isNavSearch) {\n      value && this.search(value);\n    }\n    if (this.props.mode === \"nav\") {\n      this.props.handleSearchState(true);\n    }\n    let results =\n      this.props.tabMode === \"note\"\n        ? SearchUtil.MouseNoteSearch(\n            this.props.notes.filter((item) => item.notes !== \"\")\n          )\n        : this.props.tabMode === \"digest\"\n        ? SearchUtil.MouseNoteSearch(this.props.digests)\n        : SearchUtil.MouseSearch(this.props.books);\n    if (results) {\n      this.props.handleSearchResults(results);\n      this.props.handleSearch(true);\n    }\n  };\n  handleKey = (event: any) => {\n    if (event.keyCode !== 13) {\n      return;\n    }\n    let value = (this.refs.searchBox as any).value.toLowerCase();\n    if (this.props.isNavSearch || this.props.isReading) {\n      value && this.search(value);\n    }\n    let results =\n      this.props.tabMode === \"note\"\n        ? SearchUtil.KeyNoteSearch(\n            event,\n            this.props.notes.filter((item) => item.notes !== \"\")\n          )\n        : this.props.tabMode === \"digest\"\n        ? SearchUtil.KeyNoteSearch(event, this.props.digests)\n        : SearchUtil.KeySearch(event, this.props.books);\n    if (results) {\n      this.props.handleSearchResults(results);\n      this.props.handleSearch(true);\n    }\n  };\n  search = (q: string) => {\n    this.doSearch(q).then((result) => {\n      let searchList = result.map((item: any) => {\n        item.excerpt = item.excerpt.replace(\n          q,\n          `<span class=\"content-search-text\">${q}</span>`\n        );\n        return item;\n      });\n      this.props.handleSearchList(searchList);\n    });\n  };\n  doSearch = (q: string) => {\n    return Promise.all(\n      this.props.currentEpub.spine.spineItems.map((item: any) =>\n        item\n          .load(this.props.currentEpub.load.bind(this.props.currentEpub))\n          .then(item.find.bind(item, q))\n          .finally(item.unload.bind(item))\n      )\n    ).then((results: any) => Promise.resolve([].concat.apply([], results)));\n  };\n  handleCancel = () => {\n    if (this.props.isNavSearch) {\n      this.props.handleSearchList(null);\n    }\n    this.props.handleSearch(false);\n    (document.querySelector(\".header-search-box\") as HTMLInputElement).value =\n      \"\";\n  };\n\n  render() {\n    return (\n      <div style={{ position: \"relative\" }}>\n        <input\n          type=\"text\"\n          ref=\"searchBox\"\n          className=\"header-search-box\"\n          onKeyDown={(event) => {\n            this.handleKey(event);\n          }}\n          onFocus={() => {\n            this.props.mode === \"nav\" && this.props.handleSearchState(true);\n          }}\n          placeholder={\n            this.props.isNavSearch || this.props.mode === \"nav\"\n              ? this.props.t(\"Search the book\")\n              : this.props.tabMode === \"note\"\n              ? this.props.t(\"Search my notes\")\n              : this.props.tabMode === \"digest\"\n              ? this.props.t(\"Search my highlights\")\n              : this.props.t(\"Search my library\")\n          }\n          style={\n            this.props.mode === \"nav\"\n              ? { width: this.props.width, height: this.props.height }\n              : { paddingRight: \"50px\" }\n          }\n        />\n        {this.props.isSearch ? (\n          <span\n            className=\"header-search-text\"\n            onClick={() => {\n              this.handleCancel();\n            }}\n            style={\n              this.props.mode === \"nav\" ? { right: \"-9px\", top: \"14px\" } : {}\n            }\n          >\n            <span className=\"icon-close\"></span>\n          </span>\n        ) : (\n          <span\n            className=\"icon-search header-search-icon\"\n            onClick={() => {\n              this.handleMouse();\n            }}\n            style={this.props.mode === \"nav\" ? { right: \"5px\" } : {}}\n          ></span>\n        )}\n      </div>\n    );\n  }\n}\n\nexport default SearchBox;\n","import { connect } from \"react-redux\";\nimport { handleSearchResults, handleSearch } from \"../../store/actions\";\nimport { stateType } from \"../../store\";\nimport { withTranslation } from \"react-i18next\";\nimport SearchBox from \"./component\";\nconst mapStateToProps = (state: stateType) => {\n  return {\n    books: state.manager.books,\n    notes: state.reader.notes,\n    digests: state.reader.digests,\n    isSearch: state.manager.isSearch,\n    isReading: state.book.isReading,\n    currentEpub: state.book.currentEpub,\n    tabMode: state.sidebar.mode,\n    shelfIndex: state.sidebar.shelfIndex,\n  };\n};\nconst actionCreator = {\n  handleSearchResults,\n  handleSearch,\n};\nexport default connect(\n  mapStateToProps,\n  actionCreator\n)(withTranslation()(SearchBox as any));\n","import xml2js from \"xml2js\";\nexport const xmlMetadata = (xml: string) => {\n  return new Promise<object>((resolve, reject) => {\n    var objBook: any = {};\n    let parser = new xml2js.Parser();\n    parser.parseString(xml, function (err, result) {\n      if (err) {\n        console.log(\"Error with parsing xml\" + err);\n        resolve({});\n      }\n      var fictionBook = result.FictionBook;\n      var bookDesc = fictionBook.description[0][\"title-info\"][0];\n      objBook.name = bookDesc[\"book-title\"][0];\n\n      if (bookDesc[\"author\"] && bookDesc[\"author\"][0][\"first-name\"]) {\n        objBook.author = bookDesc[\"author\"][0][\"first-name\"][0];\n\n        if (bookDesc[\"author\"][0][\"last-name\"]) {\n          objBook.author += \" \" + bookDesc[\"author\"][0][\"last-name\"][0];\n        }\n      }\n      if (fictionBook.binary) {\n        objBook.cover = \"data:image/jpeg;base64,\" + fictionBook.binary[0][\"_\"];\n      }\n      resolve(objBook);\n    });\n  });\n};\n\nexport const xmlBookParser = (xml: any, bookString: string) => {\n  var regExpTagDelete = /<epigraph>|<\\/epigraph>|<empty-line\\/>|/gi;\n  var regExpTitleOpen = /<title>/gi;\n  var regExpTitleClose = /<\\/title>/gi;\n  var bookStart = bookString.match(/<body.*?>/i) || [\"\"];\n  var bookBody = bookString.slice(\n    bookString.search(/<body.*?>/i) + bookStart[0].length,\n    bookString.search(/<\\/body>/i)\n  );\n\n  bookBody = bookBody.replace(regExpTagDelete, \"\");\n  bookBody = bookBody.replace(regExpTitleOpen, \"<h3>\");\n  bookBody = bookBody.replace(regExpTitleClose, \"</h3>\");\n\n  return xmlImageHandler(xml, bookBody);\n};\n\nexport const xmlImageHandler = (xml: any, bookString: string) => {\n  let parser = new xml2js.Parser();\n  parser.parseString(xml, function (err, result) {\n    if (err) {\n      console.log(\"Error with parsing xml\" + err);\n      return \"\";\n    }\n\n    var fictionBook = result.FictionBook;\n    if (fictionBook.binary) {\n      let strArr = bookString.split(`<image xlink:href=\"#`);\n\n      for (let i = 0; i < strArr.length; i++) {\n        for (let j = 0; j < fictionBook.binary.length; j++) {\n          if (strArr[i].startsWith(fictionBook.binary[j][\"$\"].id)) {\n            strArr[i] =\n              '<img alt=\"poster\" style=\"max-width: 100%; max-height: 100%\" src=\"' +\n              \"data:image/jpeg;base64,\" +\n              fictionBook.binary[j][\"_\"] +\n              strArr[i].slice(fictionBook.binary[j][\"$\"].id.length);\n          }\n        }\n      }\n\n      bookString = strArr.join(\"\");\n    }\n  });\n\n  return bookString;\n};\n","import { isElectron } from \"react-device-detect\";\n\nexport const handleLinkJump = (event: any) => {\n  let href;\n\n  if (\n    event.target &&\n    event.target.parentNode &&\n    event.target.parentNode.parentNode\n  ) {\n    href =\n      (event.target.innerText.indexOf(\"http\") > -1 && event.target.innerText) ||\n      event.target.src ||\n      event.target.href ||\n      event.target.parentNode.href ||\n      event.target.parentNode.parentNode.href ||\n      \"\";\n  }\n  if (\n    href &&\n    href.indexOf(\"../\") === -1 &&\n    href.indexOf(\"http\") === 0 &&\n    href.indexOf(\"OEBPF\") === -1 &&\n    href.indexOf(\"OEBPS\") === -1 &&\n    href.indexOf(\"footnote\") === -1 &&\n    href.indexOf(\"blob\") === -1 &&\n    href.indexOf(\"data:application\") === -1 &&\n    href.indexOf(\".htm\") === -1\n  ) {\n    if (isElectron) {\n      const { shell } = window.require(\"electron\");\n      shell.openExternal(href);\n    } else {\n      window.open(href);\n    }\n  }\n};\n","import StorageUtil from \"./storageUtil\";\nimport Chinese from \"chinese-s2t\";\nimport { getIframeDoc } from \"./docUtil\";\nexport const tsTransform = () => {\n  let doc = getIframeDoc();\n  if (!doc) return;\n  if (\n    StorageUtil.getReaderConfig(\"convertChinese\") &&\n    StorageUtil.getReaderConfig(\"convertChinese\") !== \"Default\"\n  ) {\n    if (\n      StorageUtil.getReaderConfig(\"convertChinese\") ===\n      \"Simplified To Traditional\"\n    ) {\n      doc.querySelectorAll(\"p\").forEach((item) => {\n        item.innerHTML = item.innerHTML.replace(\n          item.innerText,\n          Chinese.s2t(item.innerText)\n        );\n      });\n    } else {\n      doc.querySelectorAll(\"p\").forEach((item) => {\n        item.innerHTML = item.innerHTML.replace(\n          item.innerText,\n          Chinese.t2s(item.innerText)\n        );\n      });\n    }\n  }\n};\n","class ThemeUtil {\n  static setThemes(themeName: string) {\n    let themeArr =\n      localStorage.getItem(\"themeColors\") !== \"{}\" &&\n      localStorage.getItem(\"themeColors\")\n        ? JSON.parse(localStorage.getItem(\"themeColors\") || \"\")\n        : [];\n    const index = themeArr.indexOf(themeName);\n    if (index > -1) {\n      themeArr.splice(index, 1);\n      themeArr.unshift(themeName);\n    } else {\n      themeArr.unshift(themeName);\n    }\n\n    localStorage.setItem(\"themeColors\", JSON.stringify(themeArr));\n  }\n\n  static clear(themeName: string) {\n    let themeArr =\n      localStorage.getItem(\"themeColors\") !== \"{}\" &&\n      localStorage.getItem(\"themeColors\")\n        ? JSON.parse(localStorage.getItem(\"themeColors\") || \"\")\n        : [];\n    const index = themeArr.indexOf(themeName);\n    if (index > -1) {\n      themeArr.splice(index, 1);\n    }\n    localStorage.setItem(\"themeColors\", JSON.stringify(themeArr));\n  }\n  static getAllThemes() {\n    let themeArr =\n      localStorage.getItem(\"themeColors\") !== \"{}\" &&\n      localStorage.getItem(\"themeColors\")\n        ? JSON.parse(localStorage.getItem(\"themeColors\") || \"\")\n        : [];\n    return themeArr || [];\n  }\n}\n\nexport default ThemeUtil;\n","import React from \"react\";\nimport { backgroundList, textList } from \"../../../constants/themeList\";\nimport StyleUtil from \"../../../utils/readUtils/styleUtil\";\nimport \"./themeList.css\";\nimport { Trans } from \"react-i18next\";\nimport { ThemeListProps, ThemeListState } from \"./interface\";\nimport StorageUtil from \"../../../utils/serviceUtils/storageUtil\";\nimport { Panel as ColorPickerPanel } from \"rc-color-picker\";\nimport \"rc-color-picker/assets/index.css\";\nimport ThemeUtil from \"../../../utils/readUtils/themeUtil\";\nimport { Tooltip } from \"react-tippy\";\nimport toast from \"react-hot-toast\";\nimport { isElectron } from \"react-device-detect\";\n\nclass ThemeList extends React.Component<ThemeListProps, ThemeListState> {\n  constructor(props: ThemeListProps) {\n    super(props);\n    this.state = {\n      currentBackgroundIndex: backgroundList\n        .concat(ThemeUtil.getAllThemes())\n        .findIndex((item) => {\n          return (\n            item ===\n            (StorageUtil.getReaderConfig(\"backgroundColor\") ||\n              \"rgba(255,255,255,1)\")\n          );\n        }),\n      currentTextIndex: textList\n        .concat(ThemeUtil.getAllThemes())\n        .findIndex((item) => {\n          return (\n            item ===\n            (StorageUtil.getReaderConfig(\"textColor\") || \"rgba(0,0,0,1)\")\n          );\n        }),\n      isShowTextPicker: false,\n      isShowBgPicker: false,\n    };\n  }\n  handleChangeBgColor = (color: string, index: number = -1) => {\n    StorageUtil.setReaderConfig(\"backgroundColor\", color);\n    this.setState({\n      currentBackgroundIndex: index,\n    });\n    if (index === 1) {\n      StorageUtil.setReaderConfig(\"textColor\", \"rgba(255,255,255,1)\");\n    } else if (\n      index === 0 &&\n      StorageUtil.getReaderConfig(\"backgroundColor\") === \"rgba(255,255,255,1)\"\n    ) {\n      StorageUtil.setReaderConfig(\"textColor\", \"rgba(0,0,0,1)\");\n    }\n    if (isElectron) {\n      toast(this.props.t(\"Take effect at next startup\"));\n    } else {\n      window.location.reload();\n    }\n  };\n\n  handleChooseBgColor = (color) => {\n    StorageUtil.setReaderConfig(\"backgroundColor\", color.color);\n    StyleUtil.addDefaultCss();\n  };\n  handleColorTextPicker = (isShowTextPicker: boolean) => {\n    if (\n      !isShowTextPicker &&\n      textList.concat(ThemeUtil.getAllThemes()).findIndex((item) => {\n        return (\n          item === (StorageUtil.getReaderConfig(\"textColor\") || \"rgba(0,0,0,1)\")\n        );\n      }) === -1\n    ) {\n      ThemeUtil.setThemes(StorageUtil.getReaderConfig(\"textColor\"));\n    }\n    this.setState({ isShowTextPicker });\n  };\n  handleColorBgPicker = (isShowBgPicker: boolean) => {\n    if (\n      !isShowBgPicker &&\n      backgroundList.concat(ThemeUtil.getAllThemes()).findIndex((item) => {\n        return (\n          item ===\n          (StorageUtil.getReaderConfig(\"backgroundColor\") ||\n            \"rgba(255,255,255,1)\")\n        );\n      }) === -1\n    ) {\n      ThemeUtil.setThemes(StorageUtil.getReaderConfig(\"backgroundColor\"));\n    }\n    this.setState({ isShowBgPicker });\n  };\n  handleChooseTextColor = (color) => {\n    if (typeof color !== \"object\") {\n      this.setState({\n        currentTextIndex: textList\n          .concat(ThemeUtil.getAllThemes())\n          .indexOf(color),\n      });\n    }\n    StorageUtil.setReaderConfig(\n      \"textColor\",\n      typeof color === \"object\" ? color.color : color\n    );\n    this.props.currentEpub.rendition &&\n      this.props.currentEpub.rendition.themes.default({\n        \"a, article, cite, code, div, li, p, pre, span, table, body\": {\n          color: `${\n            typeof color === \"object\" ? color.color : color\n          } !important`,\n        },\n      });\n    this.props.renderFunc();\n  };\n  render() {\n    const renderBackgroundColorList = () => {\n      return backgroundList\n        .concat(ThemeUtil.getAllThemes())\n        .map((item, index) => {\n          return (\n            <li\n              key={item + index}\n              className={\n                index === this.state.currentBackgroundIndex\n                  ? \"active-color background-color-circle\"\n                  : \"background-color-circle\"\n              }\n              onClick={() => {\n                this.handleChangeBgColor(item, index);\n              }}\n              style={{ backgroundColor: item }}\n            >\n              {index > 3 && index === this.state.currentBackgroundIndex && (\n                <span\n                  className=\"icon-close\"\n                  onClick={() => {\n                    ThemeUtil.clear(item);\n                  }}\n                ></span>\n              )}\n            </li>\n          );\n        });\n    };\n    const renderTextColorList = () => {\n      return textList.concat(ThemeUtil.getAllThemes()).map((item, index) => {\n        return (\n          <li\n            key={item + index}\n            className={\n              index === this.state.currentTextIndex\n                ? \"active-color background-color-circle\"\n                : \"background-color-circle\"\n            }\n            onClick={() => {\n              this.handleChooseTextColor(item);\n            }}\n            style={{ backgroundColor: item }}\n          >\n            {index > 3 && index === this.state.currentTextIndex && (\n              <span\n                className=\"icon-close\"\n                onClick={() => {\n                  ThemeUtil.clear(item);\n                }}\n              ></span>\n            )}\n          </li>\n        );\n      });\n    };\n    return (\n      <div className=\"background-color-setting\">\n        <div className=\"background-color-text\">\n          <Trans>Background Color</Trans>\n        </div>\n        <ul className=\"background-color-list\">\n          <Tooltip\n            title={this.props.t(\"Customize\")}\n            position=\"top\"\n            trigger=\"mouseenter\"\n            style={{ display: \"inline-block\" }}\n          >\n            <li\n              className=\"background-color-circle\"\n              onClick={() => {\n                this.handleColorBgPicker(!this.state.isShowBgPicker);\n              }}\n            >\n              <span\n                className={\n                  this.state.isShowBgPicker ? \"icon-check\" : \"icon-more\"\n                }\n              ></span>\n            </li>\n          </Tooltip>\n\n          {renderBackgroundColorList()}\n        </ul>\n        {this.state.isShowBgPicker && (\n          <ColorPickerPanel\n            enableAlpha={false}\n            color={StorageUtil.getReaderConfig(\"backgroundColor\")}\n            onChange={this.handleChooseBgColor}\n            mode=\"RGB\"\n            style={{\n              margin: 20,\n              animation: \"fade-in 0.2s ease-in-out 0s 1\",\n            }}\n          />\n        )}\n        <div className=\"background-color-text\">\n          <Trans>Text Color</Trans>\n        </div>\n        <ul className=\"background-color-list\">\n          <Tooltip\n            title={this.props.t(\"Customize\")}\n            position=\"top\"\n            trigger=\"mouseenter\"\n            style={{ display: \"inline-block\" }}\n          >\n            <li\n              className=\"background-color-circle\"\n              onClick={() => {\n                this.handleColorTextPicker(!this.state.isShowTextPicker);\n              }}\n            >\n              <span\n                className={\n                  this.state.isShowTextPicker ? \"icon-check\" : \"icon-more\"\n                }\n              ></span>\n            </li>\n          </Tooltip>\n\n          {renderTextColorList()}\n        </ul>\n        {this.state.isShowTextPicker && (\n          <ColorPickerPanel\n            enableAlpha={false}\n            color={StorageUtil.getReaderConfig(\"textColor\")}\n            onChange={this.handleChooseTextColor}\n            mode=\"RGB\"\n            style={{\n              margin: 20,\n              animation: \"fade-in 0.2s ease-in-out 0s 1\",\n            }}\n          />\n        )}\n      </div>\n    );\n  }\n}\n\nexport default ThemeList;\n","import { connect } from \"react-redux\";\nimport { withTranslation } from \"react-i18next\";\nimport ThemeList from \"./component\";\nimport { stateType } from \"../../../store\";\n\nconst mapStateToProps = (state: stateType) => {\n  return {\n    currentEpub: state.book.currentEpub,\n    renderFunc: state.book.renderFunc,\n  };\n};\nconst actionCreator = {};\nexport default connect(\n  mapStateToProps,\n  actionCreator\n)(withTranslation()(ThemeList as any));\n","import React from \"react\";\nimport { Trans } from \"react-i18next\";\nimport { SliderListProps, SliderListState } from \"./interface\";\nimport \"./sliderList.css\";\nimport StorageUtil from \"../../../utils/serviceUtils/storageUtil\";\nimport { isElectron } from \"react-device-detect\";\nimport toast from \"react-hot-toast\";\nclass SliderList extends React.Component<SliderListProps, SliderListState> {\n  constructor(props: SliderListProps) {\n    super(props);\n    this.state = {\n      value:\n        this.props.mode === \"fontSize\"\n          ? StorageUtil.getReaderConfig(\"fontSize\") || \"17\"\n          : this.props.mode === \"scale\"\n          ? StorageUtil.getReaderConfig(\"scale\") || \"1\"\n          : this.props.mode === \"letterSpacing\"\n          ? StorageUtil.getReaderConfig(\"letterSpacing\") || \"0\"\n          : this.props.mode === \"paraSpacing\"\n          ? StorageUtil.getReaderConfig(\"paraSpacing\") || \"0\"\n          : this.props.mode === \"brightness\"\n          ? StorageUtil.getReaderConfig(\"brightness\") || \"1\"\n          : StorageUtil.getReaderConfig(\"margin\") || \"60\",\n    };\n  }\n  handleRest = () => {\n    if (this.props.mode === \"scale\" || this.props.mode === \"margin\") {\n      if (isElectron) {\n        toast(this.props.t(\"Take effect at next startup\"));\n      } else {\n        window.location.reload();\n      }\n      return;\n    }\n    this.props.renderFunc();\n  };\n  onValueChange = (event: any) => {\n    if (this.props.mode === \"fontSize\") {\n      const fontSize = event.target.value;\n      this.setState({ value: fontSize });\n      StorageUtil.setReaderConfig(\"fontSize\", fontSize);\n    } else if (this.props.mode === \"scale\") {\n      const scale = event.target.value;\n      this.setState({ value: scale });\n      StorageUtil.setReaderConfig(\"scale\", scale);\n    } else if (this.props.mode === \"letterSpacing\") {\n      const letterSpacing = event.target.value;\n      this.setState({ value: letterSpacing });\n      StorageUtil.setReaderConfig(\"letterSpacing\", letterSpacing);\n    } else if (this.props.mode === \"paraSpacing\") {\n      const paraSpacing = event.target.value;\n      this.setState({ value: paraSpacing });\n      StorageUtil.setReaderConfig(\"paraSpacing\", paraSpacing);\n    } else if (this.props.mode === \"brightness\") {\n      const brightness = event.target.value;\n      this.setState({ value: brightness });\n      StorageUtil.setReaderConfig(\"brightness\", brightness);\n    } else {\n      const margin = event.target.value;\n      this.setState({ value: margin });\n      StorageUtil.setReaderConfig(\"margin\", margin);\n    }\n  };\n  //使进度百分比随拖动实时变化\n  onValueInput = (event: any) => {\n    this.setState({ value: event.target.value });\n  };\n  handleMinus = (step: number) => {\n    this.setState({ value: parseFloat(this.state.value) - step + \"\" });\n    this.onValueChange({\n      target: { value: parseFloat(this.state.value) - step + \"\" },\n    });\n  };\n  handleAdd = (step: number) => {\n    this.setState({ value: parseFloat(this.state.value) + step + \"\" });\n    this.onValueChange({\n      target: { value: parseFloat(this.state.value) + step + \"\" },\n    });\n  };\n  render() {\n    return (\n      <div className=\"font-size-setting\">\n        <div className=\"font-size-title\">\n          <Trans>{this.props.title}</Trans>\n          <input\n            className=\"input-value\"\n            defaultValue={this.state.value}\n            type=\"number\"\n            step={\n              this.props.title === \"Page Width\" ||\n              this.props.title === \"Brightness\"\n                ? \"0.1\"\n                : \"1\"\n            }\n            onBlur={(event) => {\n              this.onValueChange(event);\n              this.handleRest();\n            }}\n          />\n          <span style={{ marginLeft: \"10px\" }}>{this.state.value}</span>\n        </div>\n\n        <span className=\"ultra-small-size\">{this.props.minLabel}</span>\n        <div className=\"font-size-selector\">\n          <input\n            className=\"input-progress\"\n            defaultValue={this.state.value}\n            type=\"range\"\n            max={this.props.maxValue}\n            min={this.props.minValue}\n            step={this.props.step}\n            onInput={(event) => {\n              this.onValueChange(event);\n            }}\n            onChange={(event) => {\n              this.onValueInput(event);\n            }}\n            onMouseUp={() => {\n              this.handleRest();\n            }}\n          />\n        </div>\n        {\n          <span\n            className=\"ultra-large-size\"\n            style={{ fontSize: \"16px\", right: \"5px\" }}\n          >\n            {this.props.maxLabel}\n          </span>\n        }\n      </div>\n    );\n  }\n}\n\nexport default SliderList;\n","import { connect } from \"react-redux\";\nimport { withTranslation } from \"react-i18next\";\nimport SliderList from \"./component\";\nimport { stateType } from \"../../../store\";\n\nconst mapStateToProps = (state: stateType) => {\n  return {\n    currentEpub: state.book.currentEpub,\n    renderFunc: state.book.renderFunc,\n  };\n};\nconst actionCreator = {};\nexport default connect(\n  mapStateToProps,\n  actionCreator\n)(withTranslation()(SliderList as any));\n","//图书样式设置的下拉菜单页面\nimport React from \"react\";\nimport { dropdownList } from \"../../../constants/dropdownList\";\nimport \"./dropdownList.css\";\nimport { Trans } from \"react-i18next\";\nimport { DropdownListProps, DropdownListState } from \"./interface\";\nimport StorageUtil from \"../../../utils/serviceUtils/storageUtil\";\nimport { isElectron } from \"react-device-detect\";\nclass DropdownList extends React.Component<\n  DropdownListProps,\n  DropdownListState\n> {\n  constructor(props: DropdownListProps) {\n    super(props);\n    this.state = {\n      currentFontFamilyIndex: dropdownList[0].option.findIndex((item: any) => {\n        return (\n          item ===\n          (StorageUtil.getReaderConfig(\"fontFamily\") || \"Built-in font\")\n        );\n      }),\n      currentLineHeightIndex: dropdownList[1].option.findIndex((item: any) => {\n        return item === (StorageUtil.getReaderConfig(\"lineHeight\") || \"1.25\");\n      }),\n      currentTextAlignIndex: dropdownList[2].option.findIndex((item: any) => {\n        return item === (StorageUtil.getReaderConfig(\"textAlign\") || \"left\");\n      }),\n      chineseConversionIndex: dropdownList[3].option.findIndex((item: any) => {\n        return (\n          item === (StorageUtil.getReaderConfig(\"convertChinese\") || \"Default\")\n        );\n      }),\n    };\n  }\n  componentDidMount() {\n    //使下拉菜单选中预设的值\n    if (isElectron) {\n      const fontList = window.require(\"font-list\");\n      fontList.getFonts({ disableQuoting: true }).then((result) => {\n        if (!result || result.length === 0) return;\n        dropdownList[0].option = result;\n        dropdownList[0].option.push(\"Built-in font\");\n        this.setState(\n          {\n            currentFontFamilyIndex: dropdownList[0].option.findIndex(\n              (item: any) => {\n                return (\n                  item ===\n                  (StorageUtil.getReaderConfig(\"fontFamily\") || \"Built-in font\")\n                );\n              }\n            ),\n          },\n          () => {\n            document\n              .querySelector(\".paragraph-character-setting\")!\n              .children[0].children[1].children[\n                this.state.currentFontFamilyIndex === -1\n                  ? 0\n                  : this.state.currentFontFamilyIndex\n              ]?.setAttribute(\"selected\", \"selected\");\n          }\n        );\n      });\n    }\n\n    document\n      .querySelector(\".paragraph-character-setting\")!\n      .children[1].children[1].children[\n        this.state.currentLineHeightIndex\n      ]?.setAttribute(\"selected\", \"selected\");\n    document\n      .querySelector(\".paragraph-character-setting\")!\n      .children[2].children[1].children[\n        this.state.currentTextAlignIndex\n      ]?.setAttribute(\"selected\", \"selected\");\n    document\n      .querySelector(\".paragraph-character-setting\")!\n      .children[3].children[1].children[\n        this.state.chineseConversionIndex\n      ]?.setAttribute(\"selected\", \"selected\");\n  }\n\n  //切换不同的样式\n  handleView(event: any, option: string) {\n    let arr = event.target.value.split(\",\");\n    StorageUtil.setReaderConfig(option, arr[0]);\n    switch (option) {\n      case \"fontFamily\":\n        this.setState({\n          currentFontFamilyIndex: arr[1],\n        });\n\n        break;\n\n      case \"lineHeight\":\n        this.setState({\n          currentLineHeightIndex: arr[1],\n        });\n\n        break;\n      case \"textAlign\":\n        this.setState({\n          currentTextAlignIndex: arr[1],\n        });\n\n        break;\n      case \"convertChinese\":\n        this.setState({\n          chineseConversionIndex: arr[1],\n        });\n\n        break;\n      default:\n        break;\n    }\n    this.props.renderFunc();\n  }\n  render() {\n    const renderParagraphCharacter = () => {\n      return dropdownList.map((item) => (\n        <li className=\"paragraph-character-container\" key={item.id}>\n          <p className=\"general-setting-title\">\n            <Trans>{item.title}</Trans>\n          </p>\n          <select\n            name=\"\"\n            className=\"general-setting-dropdown\"\n            onChange={(event) => {\n              this.handleView(event, item.value);\n            }}\n          >\n            {item.option.map((subItem: string, index: number) => (\n              <option\n                value={[subItem, index.toString()]}\n                key={index}\n                className=\"general-setting-option\"\n              >\n                {this.props.t(subItem)}\n              </option>\n            ))}\n          </select>\n        </li>\n      ));\n    };\n\n    return (\n      <ul className=\"paragraph-character-setting\">\n        {renderParagraphCharacter()}\n      </ul>\n    );\n  }\n}\n\nexport default DropdownList;\n","import { connect } from \"react-redux\";\nimport { withTranslation } from \"react-i18next\";\nimport DropdownList from \"./component\";\nimport { stateType } from \"../../../store\";\n\nconst mapStateToProps = (state: stateType) => {\n  return {\n    currentEpub: state.book.currentEpub,\n    renderFunc: state.book.renderFunc,\n  };\n};\nconst actionCreator = {};\nexport default connect(\n  mapStateToProps,\n  actionCreator\n)(withTranslation()(DropdownList as any));\n","import React from \"react\";\nimport \"./modeControl.css\";\nimport { ModeControlProps, ModeControlState } from \"./interface\";\nimport StorageUtil from \"../../../utils/serviceUtils/storageUtil\";\nimport { Trans } from \"react-i18next\";\nimport { Tooltip } from \"react-tippy\";\nimport { isElectron } from \"react-device-detect\";\nimport toast from \"react-hot-toast\";\n\nclass ModeControl extends React.Component<ModeControlProps, ModeControlState> {\n  constructor(props: ModeControlProps) {\n    super(props);\n    this.state = {\n      readerMode: StorageUtil.getReaderConfig(\"readerMode\") || \"double\",\n    };\n  }\n\n  handleChangeMode = (mode: string) => {\n    this.setState({ readerMode: mode });\n    StorageUtil.setReaderConfig(\"readerMode\", mode);\n    if (isElectron) {\n      toast(this.props.t(\"Take effect at next startup\"));\n    } else {\n      window.location.reload();\n    }\n  };\n  render() {\n    return (\n      <div className=\"background-color-setting\">\n        <div\n          className=\"background-color-text\"\n          style={{ position: \"relative\", bottom: \"15px\" }}\n        >\n          <Trans>View Mode</Trans>\n        </div>\n        <div className=\"single-control-container\">\n          <Tooltip\n            title={this.props.t(\"Single-Page Mode\")}\n            position=\"top\"\n            trigger=\"mouseenter\"\n          >\n            <div\n              className=\"single-mode-container\"\n              onClick={() => {\n                this.handleChangeMode(\"single\");\n              }}\n              style={this.state.readerMode === \"single\" ? {} : { opacity: 0.4 }}\n            >\n              <span className=\"icon-single-page single-page-icon\"></span>\n            </div>\n          </Tooltip>\n          <Tooltip\n            title={this.props.t(\"Double-Page Mode\")}\n            position=\"top\"\n            trigger=\"mouseenter\"\n          >\n            <div\n              className=\"double-mode-container\"\n              onClick={() => {\n                this.handleChangeMode(\"double\");\n              }}\n              style={this.state.readerMode === \"double\" ? {} : { opacity: 0.4 }}\n            >\n              <span className=\"icon-two-page two-page-icon\"></span>\n            </div>\n          </Tooltip>\n          <Tooltip\n            title={this.props.t(\"Scroll Mode\")}\n            position=\"top\"\n            trigger=\"mouseenter\"\n          >\n            <div\n              className=\"double-mode-container\"\n              onClick={() => {\n                this.handleChangeMode(\"scroll\");\n              }}\n              style={this.state.readerMode === \"scroll\" ? {} : { opacity: 0.4 }}\n            >\n              <span className=\"icon-scroll two-page-icon\"></span>\n            </div>\n          </Tooltip>\n        </div>\n      </div>\n    );\n  }\n}\nexport default ModeControl;\n","import { connect } from \"react-redux\";\nimport { withTranslation } from \"react-i18next\";\nimport ModeControl from \"./component\";\nimport { stateType } from \"../../../store\";\n\nconst mapStateToProps = (state: stateType) => {\n  return {\n    currentEpub: state.book.currentEpub,\n    renderFunc: state.book.renderFunc,\n  };\n};\nconst actionCreator = {};\nexport default connect(\n  mapStateToProps,\n  actionCreator\n)(withTranslation()(ModeControl as any));\n","import React from \"react\";\nimport { TextToSpeechProps, TextToSpeechState } from \"./interface\";\nimport { Trans } from \"react-i18next\";\nimport { speedList } from \"../../constants/dropdownList\";\nimport StorageUtil from \"../../utils/serviceUtils/storageUtil\";\n\nclass TextToSpeech extends React.Component<\n  TextToSpeechProps,\n  TextToSpeechState\n> {\n  constructor(props: TextToSpeechProps) {\n    super(props);\n    this.state = {\n      isSupported: false,\n      isAudioOn: false,\n      voices: [],\n    };\n  }\n  componentDidMount() {\n    if (\"speechSynthesis\" in window) {\n      this.setState({ isSupported: true });\n    }\n    if (this.state.isAudioOn) {\n      window.speechSynthesis && window.speechSynthesis.cancel();\n      this.setState({ isAudioOn: false });\n    }\n  }\n  handleChangeAudio = () => {\n    if (this.state.isAudioOn) {\n      window.speechSynthesis.cancel();\n      this.setState({ isAudioOn: false });\n    } else {\n      const setSpeech = () => {\n        return new Promise((resolve, reject) => {\n          let synth = window.speechSynthesis;\n          let id;\n\n          id = setInterval(() => {\n            if (synth.getVoices().length !== 0) {\n              resolve(synth.getVoices());\n              clearInterval(id);\n            } else {\n              this.setState({ isSupported: false });\n            }\n          }, 10);\n        });\n      };\n\n      let s = setSpeech();\n      s.then((voices) => {\n        this.setState({ voices }, () => {\n          this.setState({ isAudioOn: true }, () => {\n            this.handleAudio();\n            if (\n              document.querySelector(\"#text-speech-speed\") &&\n              document.querySelector(\"#text-speech-voice\") &&\n              document.querySelector(\"#text-speech-speed\")!.children[0] &&\n              document.querySelector(\"#text-speech-voice\")!.children[0]\n            ) {\n              document\n                .querySelector(\"#text-speech-speed\")!\n                .children[\n                  speedList.option.indexOf(\n                    StorageUtil.getReaderConfig(\"voiceSpeed\") || \"1\"\n                  )\n                ]?.setAttribute(\"selected\", \"selected\");\n              document\n                .querySelector(\"#text-speech-voice\")!\n                .children[\n                  StorageUtil.getReaderConfig(\"voiceIndex\") || 0\n                ]?.setAttribute(\"selected\", \"selected\");\n            }\n          });\n        });\n      });\n    }\n  };\n  handleAudio = () => {\n    const currentLocation = this.props.currentEpub.rendition.currentLocation();\n    const cfibase = currentLocation.start.cfi\n      .replace(/!.*/, \"\")\n      .replace(\"epubcfi(\", \"\");\n    const cfistart = currentLocation.start.cfi\n      .replace(/.*!/, \"\")\n      .replace(/\\)/, \"\");\n    const cfiend = currentLocation.end.cfi.replace(/.*!/, \"\").replace(/\\)/, \"\");\n    const cfiRange = `epubcfi(${cfibase}!,${cfistart},${cfiend})`;\n    this.props.currentEpub.getRange(cfiRange).then((range: any) => {\n      let text = range.toString();\n      text = text\n        .replace(/\\s\\s/g, \"\")\n        .replace(/\\r/g, \"\")\n        .replace(/\\n/g, \"\")\n        .replace(/\\t/g, \"\")\n        .replace(/\\f/g, \"\");\n      this.handleSpeech(\n        text,\n        StorageUtil.getReaderConfig(\"voiceIndex\") || 0,\n        StorageUtil.getReaderConfig(\"voiceSpeed\") || 1\n      );\n    });\n  };\n  handleSpeech = (text: string, voiceIndex: number, speed: number) => {\n    var msg = new SpeechSynthesisUtterance();\n    msg.text = text;\n    msg.voice = window.speechSynthesis.getVoices()[voiceIndex];\n    msg.rate = speed;\n    window.speechSynthesis.speak(msg);\n    msg.onerror = (err) => {\n      console.log(err);\n    };\n\n    msg.onend = (event) => {\n      if (!(this.state.isAudioOn && this.props.isReading)) {\n        return;\n      }\n      this.props.currentEpub.rendition.next().then(() => {\n        this.handleAudio();\n      });\n    };\n  };\n\n  render() {\n    return (\n      <>\n        {this.state.isSupported ? (\n          <>\n            <div className=\"single-control-switch-container\">\n              <span className=\"single-control-switch-title\">\n                <Trans>Turn on text-to-speech</Trans>\n              </span>\n\n              <span\n                className=\"single-control-switch\"\n                onClick={() => {\n                  this.handleChangeAudio();\n                }}\n                style={this.state.isAudioOn ? {} : { opacity: 0.6 }}\n              >\n                <span\n                  className=\"single-control-button\"\n                  style={\n                    this.state.isAudioOn\n                      ? {\n                          transform: \"translateX(20px)\",\n                          transition: \"transform 0.5s ease\",\n                        }\n                      : {\n                          transform: \"translateX(0px)\",\n                          transition: \"transform 0.5s ease\",\n                        }\n                  }\n                ></span>\n              </span>\n            </div>\n            {this.state.isAudioOn && this.state.voices.length > 0 && (\n              <div\n                className=\"setting-dialog-new-title\"\n                style={{\n                  marginLeft: \"20px\",\n                  width: \"88%\",\n                  marginTop: \"20px\",\n                  fontWeight: 500,\n                }}\n              >\n                <Trans>Voice</Trans>\n                <select\n                  name=\"\"\n                  className=\"lang-setting-dropdown\"\n                  id=\"text-speech-voice\"\n                  onChange={(event) => {\n                    StorageUtil.setReaderConfig(\n                      \"voiceIndex\",\n                      event.target.value\n                    );\n                    window.speechSynthesis.cancel();\n                  }}\n                >\n                  {this.state.voices.map((item, index) => {\n                    return (\n                      <option value={index} className=\"lang-setting-option\">\n                        {item.name}\n                      </option>\n                    );\n                  })}\n                </select>\n              </div>\n            )}\n            {this.state.isAudioOn && (\n              <div\n                className=\"setting-dialog-new-title\"\n                style={{ marginLeft: \"20px\", width: \"88%\", fontWeight: 500 }}\n              >\n                <Trans>Speed</Trans>\n                <select\n                  name=\"\"\n                  id=\"text-speech-speed\"\n                  className=\"lang-setting-dropdown\"\n                  onChange={(event) => {\n                    StorageUtil.setReaderConfig(\n                      \"voiceSpeed\",\n                      event.target.value\n                    );\n                    window.speechSynthesis.cancel();\n                  }}\n                >\n                  {speedList.option.map((item) => (\n                    <option value={item} className=\"lang-setting-option\">\n                      {item}\n                    </option>\n                  ))}\n                </select>\n              </div>\n            )}\n          </>\n        ) : null}\n      </>\n    );\n  }\n}\n\nexport default TextToSpeech;\n","import { withTranslation } from \"react-i18next\";\nimport { connect } from \"react-redux\";\nimport TextToSpeech from \"./component\";\nimport { stateType } from \"../../store\";\n\nconst mapStateToProps = (state: stateType) => {\n  return {\n    currentEpub: state.book.currentEpub,\n    locations: state.progressPanel.locations,\n    isReading: state.book.isReading,\n  };\n};\nconst actionCreator = {};\nexport default connect(\n  mapStateToProps,\n  actionCreator\n)(withTranslation()(TextToSpeech as any));\n","import React from \"react\";\nimport { SettingSwitchProps, SettingSwitchState } from \"./interface\";\nimport { Trans } from \"react-i18next\";\nimport TextToSpeech from \"../../textToSpeech\";\nimport StorageUtil from \"../../../utils/serviceUtils/storageUtil\";\nimport { readerSettingList } from \"../../../constants/settingList\";\nimport { isElectron } from \"react-device-detect\";\nimport toast from \"react-hot-toast\";\nclass SettingSwitch extends React.Component<\n  SettingSwitchProps,\n  SettingSwitchState\n> {\n  constructor(props: SettingSwitchProps) {\n    super(props);\n    this.state = {\n      isBold: StorageUtil.getReaderConfig(\"isBold\") === \"yes\",\n      isIndent: StorageUtil.getReaderConfig(\"isIndent\") === \"yes\",\n      isSliding: StorageUtil.getReaderConfig(\"isSliding\") === \"yes\",\n      isUnderline: StorageUtil.getReaderConfig(\"isUnderline\") === \"yes\",\n      isShadow: StorageUtil.getReaderConfig(\"isShadow\") === \"yes\",\n      isItalic: StorageUtil.getReaderConfig(\"isItalic\") === \"yes\",\n      isInvert: StorageUtil.getReaderConfig(\"isInvert\") === \"yes\",\n      isHideBackground:\n        StorageUtil.getReaderConfig(\"isHideBackground\") === \"yes\",\n      isHideFooter: StorageUtil.getReaderConfig(\"isHideFooter\") === \"yes\",\n      isHideHeader: StorageUtil.getReaderConfig(\"isHideHeader\") === \"yes\",\n      isHidePageButton:\n        StorageUtil.getReaderConfig(\"isHidePageButton\") === \"yes\",\n      isHideMenuButton:\n        StorageUtil.getReaderConfig(\"isHideMenuButton\") === \"yes\",\n    };\n  }\n\n  _handleRest = () => {\n    if (isElectron) {\n      toast(this.props.t(\"Take effect at next startup\"));\n    } else {\n      window.location.reload();\n    }\n  };\n\n  _handleChange = (stateName: string) => {\n    this.setState({ [stateName]: !this.state[stateName] } as any, () => {\n      StorageUtil.setReaderConfig(\n        stateName,\n        this.state[stateName] ? \"yes\" : \"no\"\n      );\n      toast(this.props.t(\"Change Successfully\"));\n      setTimeout(() => {\n        this.props.renderFunc();\n      }, 500);\n    });\n  };\n\n  handleChange = (stateName: string) => {\n    this.setState({ [stateName]: !this.state[stateName] } as any);\n    StorageUtil.setReaderConfig(\n      stateName,\n      this.state[stateName] ? \"no\" : \"yes\"\n    );\n\n    toast(this.props.t(\"Change Successfully\"));\n    setTimeout(() => {\n      this._handleRest();\n    }, 500);\n  };\n  render() {\n    return (\n      <>\n        <TextToSpeech />\n        {readerSettingList.map((item) => (\n          <div className=\"single-control-switch-container\" key={item.title}>\n            <span className=\"single-control-switch-title\">\n              <Trans>{item.title}</Trans>\n            </span>\n\n            <span\n              className=\"single-control-switch\"\n              onClick={() => {\n                switch (item.propName) {\n                  case \"isBold\":\n                    this._handleChange(\"isBold\");\n                    break;\n                  case \"isIndent\":\n                    this._handleChange(\"isIndent\");\n                    break;\n                  case \"isSliding\":\n                    this._handleChange(\"isSliding\");\n                    break;\n                  case \"isItalic\":\n                    this._handleChange(\"isItalic\");\n                    break;\n                  case \"isUnderline\":\n                    this._handleChange(\"isUnderline\");\n                    break;\n                  case \"isShadow\":\n                    this._handleChange(\"isShadow\");\n                    break;\n                  case \"isInvert\":\n                    this._handleChange(\"isInvert\");\n                    break;\n                  case \"isHideFooter\":\n                    this.handleChange(\"isHideFooter\");\n                    break;\n                  case \"isHideHeader\":\n                    this.handleChange(\"isHideHeader\");\n                    break;\n                  case \"isHideBackground\":\n                    this.handleChange(\"isHideBackground\");\n                    break;\n                  case \"isHidePageButton\":\n                    this.handleChange(\"isHidePageButton\");\n                    break;\n                  case \"isHideMenuButton\":\n                    this.handleChange(\"isHideMenuButton\");\n                    break;\n                  default:\n                    break;\n                }\n              }}\n              style={this.state[item.propName] ? {} : { opacity: 0.6 }}\n            >\n              <span\n                className=\"single-control-button\"\n                style={\n                  !this.state[item.propName]\n                    ? {\n                        transform: \"translateX(0px)\",\n                        transition: \"transform 0.5s ease\",\n                      }\n                    : {\n                        transform: \"translateX(20px)\",\n                        transition: \"transform 0.5s ease\",\n                      }\n                }\n              ></span>\n            </span>\n          </div>\n        ))}\n      </>\n    );\n  }\n}\n\nexport default SettingSwitch;\n","import { withTranslation } from \"react-i18next\";\nimport { connect } from \"react-redux\";\nimport SettingSwitch from \"./component\";\nimport { stateType } from \"../../../store\";\n\nconst mapStateToProps = (state: stateType) => {\n  return {\n    currentEpub: state.book.currentEpub,\n    currentBook: state.book.currentBook,\n    locations: state.progressPanel.locations,\n    isReading: state.book.isReading,\n    renderFunc: state.book.renderFunc,\n  };\n};\nconst actionCreator = {};\nexport default connect(\n  mapStateToProps,\n  actionCreator\n)(withTranslation()(SettingSwitch as any));\n","import React from \"react\";\nimport \"./settingPanel.css\";\nimport ThemeList from \"../../../components/readerSettings/themeList\";\nimport SliderList from \"../../../components/readerSettings/sliderList\";\nimport DropdownList from \"../../../components/readerSettings/dropdownList\";\nimport ModeControl from \"../../../components/readerSettings/modeControl\";\nimport SettingSwitch from \"../../../components/readerSettings/settingSwitch\";\nimport { SettingPanelProps, SettingPanelState } from \"./interface\";\nimport { Trans } from \"react-i18next\";\nimport StorageUtil from \"../../../utils/serviceUtils/storageUtil\";\nimport { Tooltip } from \"react-tippy\";\n\nclass SettingPanel extends React.Component<\n  SettingPanelProps,\n  SettingPanelState\n> {\n  constructor(props: SettingPanelProps) {\n    super(props);\n    this.state = {\n      readerMode: StorageUtil.getReaderConfig(\"readerMode\") || \"double\",\n      isSettingLocked:\n        StorageUtil.getReaderConfig(\"isSettingLocked\") === \"yes\" ? true : false,\n    };\n  }\n\n  handleLock = () => {\n    this.setState({ isSettingLocked: !this.state.isSettingLocked }, () => {\n      StorageUtil.setReaderConfig(\n        \"isSettingLocked\",\n        this.state.isSettingLocked ? \"yes\" : \"no\"\n      );\n    });\n  };\n\n  render() {\n    return (\n      <div className=\"setting-panel-parent\">\n        <Tooltip\n          title={this.props.t(this.state.isSettingLocked ? \"Unlock\" : \"Lock\")}\n          position=\"bottom\"\n          trigger=\"mouseenter\"\n          style={{ height: \"30px\", display: \"inline-block\", float: \"left\" }}\n        >\n          <span\n            className={\n              this.state.isSettingLocked\n                ? \"icon-lock lock-icon\"\n                : \"icon-unlock lock-icon\"\n            }\n            onClick={() => {\n              this.handleLock();\n            }}\n          ></span>\n        </Tooltip>\n        <div className=\"setting-panel-title\">\n          <Trans>Reading Option</Trans>\n        </div>\n        <div className=\"setting-panel\">\n          <ModeControl />\n          <ThemeList />\n          <SliderList\n            {...{\n              maxValue: 40,\n              minValue: 13,\n              mode: \"fontSize\",\n              minLabel: \"13\",\n              maxLabel: \"40\",\n              step: 1,\n              title: \"Font Size\",\n            }}\n          />\n\n          {this.state.readerMode && this.state.readerMode === \"double\" && (\n            <SliderList\n              {...{\n                maxValue: 80,\n                minValue: 0,\n                mode: \"margin\",\n                minLabel: \"0\",\n                maxLabel: \"80\",\n                step: 5,\n                title: \"Margin\",\n              }}\n            />\n          )}\n\n          <SliderList\n            {...{\n              maxValue: 20,\n              minValue: 0,\n              mode: \"letterSpacing\",\n              minLabel: \"0\",\n              maxLabel: \"20\",\n              step: 1,\n              title: \"Letter Spacing\",\n            }}\n          />\n\n          <SliderList\n            {...{\n              maxValue: 60,\n              minValue: 0,\n              mode: \"paraSpacing\",\n              minLabel: \"0\",\n              maxLabel: \"60\",\n              step: 1,\n              title: \"Paragraph Spacing\",\n            }}\n          />\n\n          {this.state.readerMode && this.state.readerMode !== \"double\" ? (\n            <SliderList\n              {...{\n                maxValue: 3,\n                minValue: 0.5,\n                mode: \"scale\",\n                minLabel: \"0.5\",\n                maxLabel: \"3\",\n                step: 0.1,\n                title: \"Page Width\",\n              }}\n            />\n          ) : null}\n          <SliderList\n            {...{\n              maxValue: 2,\n              minValue: 0.5,\n              mode: \"brightness\",\n              minLabel: \"0.5\",\n              maxLabel: \"2\",\n              step: 0.1,\n              title: \"Brightness\",\n            }}\n          />\n          <DropdownList />\n          <SettingSwitch />\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default SettingPanel;\n","import { withTranslation } from \"react-i18next\";\nimport { connect } from \"react-redux\";\nimport SettingPanel from \"./component\";\nimport { stateType } from \"../../../store\";\n\nconst mapStateToProps = (state: stateType) => {\n  return {\n    currentEpub: state.book.currentEpub,\n    currentBook: state.book.currentBook,\n    locations: state.progressPanel.locations,\n    isReading: state.book.isReading,\n  };\n};\nconst actionCreator = {};\nexport default connect(\n  mapStateToProps,\n  actionCreator\n)(withTranslation()(SettingPanel as any));\n","import React from \"react\";\nimport \"./contentList.css\";\nimport { ContentListProps, ContentListState } from \"./interface\";\nimport StorageUtil from \"../../../utils/serviceUtils/storageUtil\";\nimport _ from \"underscore\";\nimport RecordLocation from \"../../../utils/readUtils/recordLocation\";\nclass ContentList extends React.Component<ContentListProps, ContentListState> {\n  constructor(props: ContentListProps) {\n    super(props);\n    this.state = {\n      chapters: [],\n      isCollapsed: true,\n      currentIndex: -1,\n      currentChapter: \"\",\n      isExpandContent: StorageUtil.getReaderConfig(\"isExpandContent\") === \"yes\",\n    };\n    this.handleJump = this.handleJump.bind(this);\n  }\n\n  componentWillMount() {\n    //获取目录\n    if (this.props.currentEpub.loaded) {\n      this.props.currentEpub.loaded.navigation\n        .then((chapters: any) => {\n          this.setState({ chapters: chapters.toc });\n        })\n        .catch(() => {\n          console.log(\"Error occurs\");\n        });\n    }\n  }\n  componentDidMount() {\n    this.props.htmlBook &&\n      this.setState({\n        chapters: this.props.htmlBook.chapters,\n      });\n  }\n  handleJump(event: any) {\n    event.preventDefault();\n    let href = event.target.getAttribute(\"href\");\n    if (this.props.currentEpub && this.props.currentEpub.loaded) {\n      let _href =\n        this.props.currentEpub.spine.items.filter(\n          (item) => item.href.indexOf(href) > -1\n        )[0].href || href;\n      this.props.currentEpub.rendition.display(_href);\n    } else {\n      let id = href.substr(1);\n      let title =\n        this.state.chapters[_.findIndex(this.state.chapters, { id })].label;\n      RecordLocation.recordHtmlLocation(\n        this.props.currentBook.key,\n        \"test\",\n        title,\n        \"test\",\n        \"0\"\n      );\n      this.props.htmlBook.rendition.goToChapter(title);\n      this.props.handleCurrentChapter(title);\n    }\n  }\n  UNSAFE_componentWillReceiveProps(nextProps: ContentListProps) {\n    if (nextProps.htmlBook && nextProps.htmlBook !== this.props.htmlBook) {\n      this.setState({ chapters: nextProps.htmlBook.chapters });\n    }\n  }\n  render() {\n    const renderContentList = (items: any, level: number) => {\n      level++;\n      return items.map((item: any, index: number) => {\n        return (\n          <li key={index} className=\"book-content-list\">\n            {item.subitems.length > 0 &&\n              level <= 2 &&\n              !this.state.isExpandContent && (\n                <span\n                  className=\"icon-dropdown content-dropdown\"\n                  onClick={() => {\n                    this.setState({\n                      currentIndex:\n                        this.state.currentIndex === index ? -1 : index,\n                    });\n                  }}\n                  style={\n                    this.state.currentIndex === index\n                      ? {}\n                      : { transform: \"rotate(-90deg)\" }\n                  }\n                ></span>\n              )}\n\n            <a\n              href={item.href}\n              onClick={this.handleJump}\n              className=\"book-content-name\"\n            >\n              {item.label.indexOf(\"#\") > -1\n                ? item.label.split(\"#\")[0]\n                : item.label}\n            </a>\n            {item.subitems.length > 0 &&\n            (this.state.currentIndex === index ||\n              level > 2 ||\n              this.state.isExpandContent) ? (\n              <ul>{renderContentList(item.subitems, level)}</ul>\n            ) : null}\n          </li>\n        );\n      });\n    };\n\n    return (\n      <div className=\"book-content-container\">\n        <ul className=\"book-content\">\n          {this.state.chapters && renderContentList(this.state.chapters, 1)}\n        </ul>\n      </div>\n    );\n  }\n}\n\nexport default ContentList;\n","import { connect } from \"react-redux\";\nimport { stateType } from \"../../../store\";\nimport ContentList from \"./component\";\nimport { handleCurrentChapter } from \"../../../store/actions\";\nconst mapStateToProps = (state: stateType) => {\n  return {\n    currentEpub: state.book.currentEpub,\n    currentBook: state.book.currentBook,\n    chapters: state.reader.chapters,\n    htmlBook: state.reader.htmlBook,\n    renderFunc: state.book.renderFunc,\n  };\n};\nconst actionCreator = { handleCurrentChapter };\nexport default connect(mapStateToProps, actionCreator)(ContentList);\n","import React from \"react\";\nimport \"./navList.css\";\nimport { Trans } from \"react-i18next\";\nimport { NavListProps, NavListState } from \"./interface\";\nimport DeleteIcon from \"../../../components/deleteIcon\";\nimport toast from \"react-hot-toast\";\nclass NavList extends React.Component<NavListProps, NavListState> {\n  constructor(props: NavListProps) {\n    super(props);\n    this.state = {\n      deleteIndex: -1,\n    };\n  }\n  //跳转到图书的指定位置\n  handleJump(cfi: string) {\n    if (!cfi) {\n      toast(this.props.t(\"Wrong bookmark\"));\n      return;\n    }\n    if (this.props.currentBook.format === \"EPUB\") {\n      this.props.currentEpub.rendition.display(cfi);\n    } else {\n      let bookLocation = JSON.parse(cfi) || {};\n      this.props.htmlBook.rendition.goToPosition(\n        bookLocation.text,\n        bookLocation.chapterTitle,\n        bookLocation.count\n      );\n    }\n  }\n  handleShowDelete = (index: number) => {\n    this.setState({ deleteIndex: index });\n  };\n  render() {\n    let currentData: any = (\n      (this.props.currentTab === \"bookmarks\"\n        ? this.props.bookmarks\n        : this.props.currentTab === \"notes\"\n        ? this.props.notes.filter((item) => item.notes !== \"\")\n        : this.props.digests) as any\n    ).filter((item: any) => {\n      return item.bookKey === this.props.currentBook.key;\n    });\n    const renderBookNavList = () => {\n      return currentData.reverse().map((item: any, index: number) => {\n        const bookmarkProps = {\n          itemKey: item.key,\n          mode: this.props.currentTab === \"bookmarks\" ? \"bookmarks\" : \"notes\",\n        };\n        return (\n          <li\n            className=\"book-bookmark-list\"\n            key={item.key}\n            onMouseEnter={() => {\n              this.handleShowDelete(index);\n            }}\n            onMouseLeave={() => {\n              this.handleShowDelete(-1);\n            }}\n          >\n            <p className=\"book-bookmark-digest\">\n              {this.props.currentTab === \"bookmarks\"\n                ? item.label\n                : this.props.currentTab === \"notes\"\n                ? item.notes\n                : item.text}\n            </p>\n            <div className=\"bookmark-page-list-item-title\">\n              <Trans>{item.chapter}</Trans>\n            </div>\n            <div className=\"book-bookmark-progress\">\n              {Math.floor(item.percentage * 100)}%\n            </div>\n            {this.state.deleteIndex === index ? (\n              <DeleteIcon {...bookmarkProps} />\n            ) : null}\n            <div\n              className=\"book-bookmark-link\"\n              onClick={() => {\n                this.handleJump(item.cfi);\n              }}\n              style={{ cursor: \"pointer\" }}\n            >\n              <Trans>Go To</Trans>\n            </div>\n          </li>\n        );\n      });\n    };\n    if (!currentData[0]) {\n      return (\n        <div className=\"navigation-panel-empty-bookmark\">\n          <Trans>Empty</Trans>\n        </div>\n      );\n    }\n    return (\n      <div className=\"book-bookmark-container\">\n        <ul className=\"book-bookmark\">{renderBookNavList()}</ul>\n      </div>\n    );\n  }\n}\n\nexport default NavList;\n","import { connect } from \"react-redux\";\nimport { stateType } from \"../../../store\";\nimport { withTranslation } from \"react-i18next\";\nimport NavList from \"./component\";\nconst mapStateToProps = (state: stateType) => {\n  return {\n    currentBook: state.book.currentBook,\n    currentEpub: state.book.currentEpub,\n    htmlBook: state.reader.htmlBook,\n\n    bookmarks: state.reader.bookmarks,\n    notes: state.reader.notes,\n    digests: state.reader.digests,\n  };\n};\nconst actionCreator = {};\nexport default connect(\n  mapStateToProps,\n  actionCreator\n)(withTranslation()(NavList as any));\n","import React from \"react\";\nimport \"./navigationPanel.css\";\nimport ContentList from \"../../lists/contentList\";\nimport BookNavList from \"../../lists/navList\";\nimport { Trans } from \"react-i18next\";\nimport { NavigationPanelProps, NavigationPanelState } from \"./interface\";\nimport SearchBox from \"../../../components/searchBox\";\nimport Parser from \"html-react-parser\";\nimport EmptyCover from \"../../../components/emptyCover\";\nimport StorageUtil from \"../../../utils/serviceUtils/storageUtil\";\nimport { Tooltip } from \"react-tippy\";\n\nclass NavigationPanel extends React.Component<\n  NavigationPanelProps,\n  NavigationPanelState\n> {\n  timer: any;\n  constructor(props: NavigationPanelProps) {\n    super(props);\n    this.state = {\n      currentTab: \"contents\",\n      chapters: [],\n      cover: this.props.currentBook.cover,\n      isSearch: false,\n      searchList: null,\n      startIndex: 0,\n      currentIndex: 0,\n      isNavLocked:\n        StorageUtil.getReaderConfig(\"isNavLocked\") === \"yes\" ? true : false,\n    };\n  }\n  handleSearchState = (isSearch: boolean) => {\n    this.setState({ isSearch });\n  };\n  handleSearchList = (searchList: any) => {\n    this.setState({ searchList });\n  };\n  componentDidMount() {\n    this.props.handleFetchBookmarks();\n  }\n\n  handleChangeTab = (currentTab: string) => {\n    this.setState({ currentTab });\n  };\n  handleLock = () => {\n    this.setState({ isNavLocked: !this.state.isNavLocked }, () => {\n      StorageUtil.setReaderConfig(\n        \"isNavLocked\",\n        this.state.isNavLocked ? \"yes\" : \"no\"\n      );\n    });\n  };\n  renderSearchList = () => {\n    if (!this.state.searchList[0]) {\n      return (\n        <div className=\"navigation-panel-empty-bookmark\">\n          <Trans>Empty</Trans>\n        </div>\n      );\n    }\n    return this.state.searchList\n      .slice(\n        this.state.currentIndex * 10,\n        this.state.currentIndex * 10 + 10 > this.state.searchList.length\n          ? this.state.searchList.length\n          : this.state.currentIndex * 10 + 10\n      )\n      .map((item: any, index: number) => {\n        return (\n          <li\n            className=\"nav-search-list-item\"\n            key={index}\n            onClick={() => {\n              this.props.currentEpub.rendition.display(item.cfi);\n            }}\n          >\n            {Parser(item.excerpt)}\n          </li>\n        );\n      });\n  };\n  renderSearchPage = () => {\n    let startIndex = this.state.startIndex;\n    let currentIndex =\n      startIndex > 0 ? startIndex + 2 : this.state.currentIndex;\n    let pageList: any[] = [];\n    let total = Math.ceil(this.state.searchList.length / 10);\n    if (total <= 5) {\n      for (let i = 0; i < total; i++) {\n        pageList.push(\n          <li\n            className={\n              currentIndex === i\n                ? \"nav-search-page-item active-page \"\n                : \"nav-search-page-item\"\n            }\n            onClick={() => {\n              this.setState({ currentIndex: i });\n            }}\n          >\n            {i + 1}\n          </li>\n        );\n      }\n    } else {\n      for (let i = 0; i < 5; i++) {\n        let isShow = currentIndex > 2 ? i === 2 : currentIndex === i;\n        pageList.push(\n          <li\n            className={\n              isShow\n                ? \"nav-search-page-item active-page \"\n                : \"nav-search-page-item\"\n            }\n            onClick={() => {\n              if (i === 3 && startIndex === 0) {\n                this.setState({\n                  startIndex: 1,\n                  currentIndex: 3,\n                });\n                return;\n              }\n              this.setState({\n                startIndex: currentIndex > 2 ? i + startIndex - 2 : 0,\n                currentIndex: i + startIndex,\n              });\n            }}\n          >\n            {i + startIndex + 1}\n          </li>\n        );\n      }\n    }\n    return pageList;\n  };\n  render() {\n    const searchProps = {\n      mode: this.state.isSearch ? \"\" : \"nav\",\n      width: \"100px\",\n      height: \"35px\",\n      isNavSearch: this.state.isSearch,\n      handleSearchState: this.handleSearchState,\n      handleSearchList: this.handleSearchList,\n    };\n    const bookmarkProps = {\n      currentTab: this.state.currentTab,\n    };\n    return (\n      <div className=\"navigation-panel\">\n        {this.state.isSearch ? (\n          <>\n            <div\n              className=\"nav-close-icon\"\n              onClick={() => {\n                this.handleSearchState(false);\n                this.props.handleSearch(false);\n                this.setState({ searchList: null });\n              }}\n            >\n              <span className=\"icon-close\"></span>\n            </div>\n\n            <div\n              className=\"header-search-container\"\n              style={this.state.isSearch ? { left: 40 } : {}}\n            >\n              <div\n                className=\"navigation-search-title\"\n                style={{ height: \"20px\", margin: \"0px 25px 13px\" }}\n              >\n                <Trans>Search the book</Trans>\n              </div>\n              <SearchBox {...searchProps} />\n            </div>\n            <ul className=\"nav-search-list\">\n              {this.state.searchList ? this.renderSearchList() : null}\n            </ul>\n            <ul className=\"nav-search-page\">\n              {this.state.searchList ? this.renderSearchPage() : null}\n            </ul>\n          </>\n        ) : (\n          <>\n            <div className=\"navigation-header\">\n              <Tooltip\n                title={this.props.t(this.state.isNavLocked ? \"Unlock\" : \"Lock\")}\n                position=\"bottom\"\n                trigger=\"mouseenter\"\n                style={{\n                  position: \"absolute\",\n                  top: 0,\n                  right: 0,\n                  height: \"30px\",\n                }}\n              >\n                <span\n                  className={\n                    this.state.isNavLocked\n                      ? \"icon-lock nav-lock-icon\"\n                      : \"icon-unlock nav-lock-icon\"\n                  }\n                  onClick={() => {\n                    this.handleLock();\n                  }}\n                ></span>\n              </Tooltip>\n\n              {this.state.cover &&\n              this.props.currentBook.cover !== \"noCover\" ? (\n                <img className=\"book-cover\" src={this.state.cover} alt=\"\" />\n              ) : (\n                <div className=\"book-cover\">\n                  <EmptyCover\n                    {...{\n                      format: this.props.currentBook.format,\n                      title: this.props.currentBook.name,\n                      scale: 0.86,\n                    }}\n                  />\n                </div>\n              )}\n\n              <p className=\"book-title\">{this.props.currentBook.name}</p>\n              <p className=\"book-arthur\">\n                <Trans>Author</Trans>:{\" \"}\n                <Trans>\n                  {this.props.currentBook.author\n                    ? this.props.currentBook.author\n                    : \"Unknown Authur\"}\n                </Trans>\n              </p>\n              <span className=\"reading-duration\">\n                <Trans>Reading Time</Trans>: {Math.floor(this.props.time / 60)}\n                &nbsp;\n                <Trans>Minute</Trans>\n              </span>\n              {Object.keys(this.props.currentEpub).length !== 0 && (\n                <div className=\"navigation-search-box\">\n                  <SearchBox {...searchProps} />\n                </div>\n              )}\n\n              <div className=\"navigation-navigation\">\n                <span\n                  className=\"book-content-title\"\n                  onClick={() => {\n                    this.handleChangeTab(\"contents\");\n                  }}\n                  style={\n                    this.state.currentTab === \"contents\" ? {} : { opacity: 0.5 }\n                  }\n                >\n                  <Trans>Content</Trans>\n                </span>\n                <span\n                  className=\"book-bookmark-title\"\n                  style={\n                    this.state.currentTab === \"bookmarks\"\n                      ? {}\n                      : { opacity: 0.5 }\n                  }\n                  onClick={() => {\n                    this.handleChangeTab(\"bookmarks\");\n                  }}\n                >\n                  <Trans>Bookmark</Trans>\n                </span>\n                <span\n                  className=\"book-bookmark-title\"\n                  style={\n                    this.state.currentTab === \"notes\" ? {} : { opacity: 0.5 }\n                  }\n                  onClick={() => {\n                    this.handleChangeTab(\"notes\");\n                  }}\n                >\n                  <Trans>Note</Trans>\n                </span>\n                <span\n                  className=\"book-bookmark-title\"\n                  style={\n                    this.state.currentTab === \"digests\" ? {} : { opacity: 0.5 }\n                  }\n                  onClick={() => {\n                    this.handleChangeTab(\"digests\");\n                  }}\n                >\n                  <Trans>Highlight</Trans>\n                </span>\n              </div>\n            </div>\n            <div className=\"navigation-body-parent\">\n              <div className=\"navigation-body\">\n                {this.state.currentTab === \"contents\" ? (\n                  <ContentList />\n                ) : (\n                  <BookNavList {...bookmarkProps} />\n                )}\n              </div>\n            </div>\n          </>\n        )}\n      </div>\n    );\n  }\n}\n\nexport default NavigationPanel;\n","//图书导航栏\nimport { connect } from \"react-redux\";\nimport { handleFetchBookmarks, handleSearch } from \"../../../store/actions\";\nimport { stateType } from \"../../../store\";\nimport { withTranslation } from \"react-i18next\";\nimport NavigationPanel from \"./component\";\n\nconst mapStateToProps = (state: stateType) => {\n  return {\n    currentEpub: state.book.currentEpub,\n    currentBook: state.book.currentBook,\n    bookmarks: state.reader.bookmarks,\n  };\n};\nconst actionCreator = { handleFetchBookmarks, handleSearch };\nexport default connect(\n  mapStateToProps,\n  actionCreator\n)(withTranslation()(NavigationPanel as any));\n","class Bookmark {\n  key: string;\n  bookKey: string;\n  cfi: string;\n  label: string;\n  percentage: number;\n  chapter: string;\n  constructor(\n    bookKey: string,\n    cfi: string,\n    label: string,\n    percentage: number,\n    chapter: string\n  ) {\n    this.key = new Date().getTime() + \"\"; // 唯一的键\n    this.bookKey = bookKey; // 所属的书籍的键\n    this.cfi = cfi; // 标记阅读位置的cfi\n    this.label = label; // 此项书签的别名\n    this.percentage = percentage; // 此项书签的摘要\n    this.chapter = chapter; // 此项书签的摘要\n  }\n}\n\nexport default Bookmark;\n","import React from \"react\";\nimport \"./operationPanel.css\";\nimport Bookmark from \"../../../model/Bookmark\";\nimport { Trans } from \"react-i18next\";\nimport localforage from \"localforage\";\nimport RecordLocation from \"../../../utils/readUtils/recordLocation\";\nimport { OperationPanelProps, OperationPanelState } from \"./interface\";\nimport StorageUtil from \"../../../utils/serviceUtils/storageUtil\";\nimport ReadingTime from \"../../../utils/readUtils/readingTime\";\nimport { withRouter } from \"react-router-dom\";\nimport toast from \"react-hot-toast\";\ndeclare var document: any;\n\nclass OperationPanel extends React.Component<\n  OperationPanelProps,\n  OperationPanelState\n> {\n  timeStamp: number;\n  speed: number;\n  timer: any;\n\n  constructor(props: OperationPanelProps) {\n    super(props);\n    this.state = {\n      isFullScreen:\n        StorageUtil.getReaderConfig(\"isFullScreen\") === \"yes\" ? true : false, // 是否进入全屏模式\n      isBookmark: false, // 是否添加书签\n      time: 0,\n      currentPercentage: RecordLocation.getCfi(this.props.currentBook.key)\n        ? RecordLocation.getCfi(this.props.currentBook.key).percentage\n        : 0,\n      timeLeft: 0,\n    };\n    this.timeStamp = Date.now();\n    this.speed = 30000;\n  }\n\n  componentWillReceiveProps(nextProps: OperationPanelProps) {\n    if (\n      nextProps.currentEpub.rendition &&\n      nextProps.currentEpub.rendition.location &&\n      this.props.currentEpub.rendition\n    ) {\n      const currentLocation =\n        this.props.currentEpub.rendition.currentLocation();\n      if (!currentLocation.start) {\n        return;\n      }\n      if (\n        this.props.currentEpub.rendition.currentLocation().percentage !==\n        nextProps.currentEpub.rendition.currentLocation().percentage\n      ) {\n        this.speed = Date.now() - this.timeStamp;\n        this.timeStamp = Date.now();\n      }\n      this.setState({\n        timeLeft:\n          ((currentLocation.start.displayed.total -\n            currentLocation.start.displayed.page) *\n            this.speed) /\n          1000,\n      });\n      // let nextPercentage = section.start.percentage;\n    }\n  }\n  componentDidMount() {\n    const exitHandler = () => {\n      if (\n        document.webkitIsFullScreen ||\n        document.mozFullScreen ||\n        document.msFullscreenElement !== null\n      ) {\n        this.setState({ isFullScreen: !this.state.isFullScreen });\n        StorageUtil.setReaderConfig(\n          \"isFullScreen\",\n          this.state.isFullScreen ? \"no\" : \"yes\"\n        );\n      }\n    };\n    if (document.addEventListener) {\n      document.addEventListener(\n        \"fullscreenchange\",\n        () => {\n          exitHandler();\n        },\n        false\n      );\n      document.addEventListener(\n        \"mozfullscreenchange\",\n        () => {\n          exitHandler();\n        },\n        false\n      );\n      document.addEventListener(\n        \"MSFullscreenChange\",\n        () => {\n          exitHandler();\n        },\n        false\n      );\n      document.addEventListener(\n        \"webkitfullscreenchange\",\n        () => {\n          exitHandler();\n        },\n        false\n      );\n    }\n  }\n  // 点击切换全屏按钮触发\n  handleScreen() {\n    !this.state.isFullScreen\n      ? this.handleFullScreen()\n      : this.handleExitFullScreen();\n  }\n  // 点击退出按钮的处理程序\n  handleExit() {\n    StorageUtil.setReaderConfig(\"isFullScreen\", \"no\");\n    this.props.handleReadingState(false);\n    window.speechSynthesis.cancel();\n    ReadingTime.setTime(this.props.currentBook.key, this.props.time);\n    this.handleExitFullScreen();\n    if (this.props.htmlBook) {\n      this.props.handleHtmlBook(null);\n    }\n\n    if (this.props.currentEpub && this.props.currentEpub.loaded) {\n      this.props.handleReadingEpub({});\n    }\n  }\n  //控制进入全屏\n  handleFullScreen() {\n    let de: any = document.documentElement;\n    if (de.requestFullscreen) {\n      de.requestFullscreen();\n    } else if (de.mozRequestFullScreen) {\n      de.mozRequestFullScreen();\n    } else if (de.webkitRequestFullscreen) {\n      de.webkitRequestFullscreen();\n    } else if (de.msRequestFullscreen) {\n      de.msRequestFullscreen();\n    }\n\n    // this.setState({ isFullScreen: true });\n    // StorageUtil.setReaderConfig(\"isFullScreen\", \"yes\");\n  }\n  // 退出全屏模式\n  handleExitFullScreen() {\n    //解决使用esc退出全屏，再退出阅读时发生的bug\n    if (!document.fullscreenElement) return;\n\n    if (document.exitFullscreen) {\n      document.exitFullscreen();\n    } else if (document.msExitFullscreen) {\n      document.msExitFullscreen();\n    } else if (document.mozCancelFullScreen) {\n      document.mozCancelFullScreen();\n    } else if (document.webkitExitFullscreen) {\n      document.webkitExitFullscreen();\n    }\n\n    // this.setState({ isFullScreen: false });\n    // StorageUtil.setReaderConfig(\"isFullScreen\", \"no\");\n  }\n  handleAddBookmark() {\n    let bookKey = this.props.currentBook.key;\n    const currentLocation = this.props.currentEpub.rendition.currentLocation();\n    let chapterHref = currentLocation.start.href;\n    let chapter = \"Unknown Chapter\";\n    let currentChapter = this.props.flattenChapters.filter(\n      (item: any) =>\n        chapterHref.indexOf(item.href.split(\"#\")[0]) > -1 ||\n        item.href.split(\"#\")[0].indexOf(chapterHref) > -1\n    )[0];\n    if (currentChapter) {\n      chapter = currentChapter.label.trim(\" \");\n    }\n    const cfibase = currentLocation.start.cfi\n      .replace(/!.*/, \"\")\n      .replace(\"epubcfi(\", \"\");\n    const cfistart = currentLocation.start.cfi\n      .replace(/.*!/, \"\")\n      .replace(/\\)/, \"\");\n    const cfiend = currentLocation.end.cfi.replace(/.*!/, \"\").replace(/\\)/, \"\");\n    const cfiRange = `epubcfi(${cfibase}!,${cfistart},${cfiend})`;\n    const cfi = RecordLocation.getCfi(this.props.currentBook.key).cfi;\n    this.props.currentEpub.getRange(cfiRange).then((range: any) => {\n      if (!range) return;\n      let text = range.toString();\n      text = text.replace(/\\s\\s/g, \"\");\n      text = text.replace(/\\r/g, \"\");\n      text = text.replace(/\\n/g, \"\");\n      text = text.replace(/\\t/g, \"\");\n      text = text.replace(/\\f/g, \"\");\n      let percentage = RecordLocation.getCfi(this.props.currentBook.key)\n        .percentage\n        ? RecordLocation.getCfi(this.props.currentBook.key).percentage\n        : 0;\n      let bookmark = new Bookmark(\n        bookKey,\n        cfi,\n        text.substr(0, 200),\n        percentage,\n        chapter\n      );\n      let bookmarkArr = this.props.bookmarks ?? [];\n      bookmarkArr.push(bookmark);\n      this.props.handleBookmarks(bookmarkArr);\n      localforage.setItem(\"bookmarks\", bookmarkArr);\n      this.setState({ isBookmark: true });\n      toast.success(this.props.t(\"Add Successfully\"));\n      this.props.handleShowBookmark(true);\n    });\n  }\n\n  render() {\n    return (\n      <div className=\"book-operation-panel\">\n        <div className=\"book-opeartion-info\">\n          <span>\n            <Trans\n              i18nKey=\"Current Reading Time\"\n              count={Math.floor(\n                (this.props.time -\n                  ReadingTime.getTime(this.props.currentBook.key)) /\n                  60\n              )}\n            >\n              Current Reading Time:\n              {{\n                count: Math.abs(\n                  Math.floor(\n                    (this.props.time -\n                      ReadingTime.getTime(this.props.currentBook.key)) /\n                      60\n                  )\n                ),\n              }}\n              Minutes\n            </Trans>\n          </span>\n          &nbsp;&nbsp;&nbsp;\n          <span>\n            <Trans\n              i18nKey=\"Finish Reading Time\"\n              count={Math.ceil(this.state.timeLeft / 60)}\n            >\n              Finish Reading Time:\n              {{\n                count: `${Math.ceil(this.state.timeLeft / 60)}`,\n              }}\n              Minutes\n            </Trans>\n          </span>\n        </div>\n        <div\n          className=\"exit-reading-button\"\n          onClick={() => {\n            this.handleExit();\n            if (StorageUtil.getReaderConfig(\"isOpenInMain\") === \"yes\") {\n              this.props.history.push(\"/manager/home\");\n              document.title = \"Koodo Reader\";\n            } else {\n              window.close();\n            }\n          }}\n        >\n          <span className=\"icon-exit exit-reading-icon\"></span>\n          <span className=\"exit-reading-text\">\n            <Trans>Exit</Trans>\n          </span>\n        </div>\n        <div\n          className=\"add-bookmark-button\"\n          onClick={() => {\n            if (this.props.currentEpub.rendition) {\n              this.handleAddBookmark();\n            } else {\n              toast(this.props.t(\"Not supported yet\"));\n            }\n          }}\n        >\n          <span className=\"icon-add add-bookmark-icon\"></span>\n          <span className=\"add-bookmark-text\">\n            <Trans>Add Bookmark</Trans>\n          </span>\n        </div>\n        <div\n          className=\"enter-fullscreen-button\"\n          onClick={() => {\n            this.handleScreen();\n          }}\n        >\n          <span className=\"icon-fullscreen enter-fullscreen-icon\"></span>\n          {!this.state.isFullScreen ? (\n            <span className=\"enter-fullscreen-text\">\n              <Trans>Enter Fullscreen</Trans>\n            </span>\n          ) : (\n            <span className=\"enter-fullscreen-text\">\n              <Trans>Exit Fullscreen</Trans>\n            </span>\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default withRouter(OperationPanel);\n","import { connect } from \"react-redux\";\nimport {\n  handleBookmarks,\n  handleFetchBookmarks,\n  handleOpenMenu,\n  handleShowBookmark,\n  handleSearch,\n  handleReadingState,\n  handleHtmlBook,\n  handleReadingBook,\n  handleReadingEpub,\n} from \"../../../store/actions\";\nimport { stateType } from \"../../../store\";\nimport { withTranslation } from \"react-i18next\";\nimport OperationPanel from \"./component\";\n\nconst mapStateToProps = (state: stateType) => {\n  return {\n    currentEpub: state.book.currentEpub,\n    currentBook: state.book.currentBook,\n    bookmarks: state.reader.bookmarks,\n    notes: state.reader.notes,\n    books: state.manager.books,\n    htmlBook: state.reader.htmlBook,\n    locations: state.progressPanel.locations,\n    flattenChapters: state.reader.flattenChapters,\n  };\n};\nconst actionCreator = {\n  handleBookmarks,\n  handleReadingState,\n  handleFetchBookmarks,\n  handleOpenMenu,\n  handleShowBookmark,\n  handleSearch,\n  handleHtmlBook,\n  handleReadingBook,\n  handleReadingEpub,\n};\nexport default connect(\n  mapStateToProps,\n  actionCreator\n)(withTranslation()(OperationPanel as any));\n","import React from \"react\";\nimport \"./imageViewer.css\";\nimport { ImageViewerProps, ImageViewerStates } from \"./interface\";\nimport FileSaver from \"file-saver\";\nimport { handleLinkJump } from \"../../utils/readUtils/linkUtil\";\nimport { getIframeDoc } from \"../../utils/serviceUtils/docUtil\";\n\nclass ImageViewer extends React.Component<ImageViewerProps, ImageViewerStates> {\n  constructor(props: ImageViewerProps) {\n    super(props);\n    this.state = {\n      isShowImage: false,\n      imageRatio: \"horizontal\",\n      zoomIndex: 0,\n      rotateIndex: 0,\n    };\n  }\n\n  componentDidMount() {\n    this.props.rendition.on(\"rendered\", () => {\n      let doc = getIframeDoc();\n      if (!doc) return;\n      // StyleUtil.addDefaultCss();\n      doc.addEventListener(\"click\", this.showImage);\n    });\n  }\n\n  showImage = (event: any) => {\n    event.preventDefault();\n    if (this.props.isShow) {\n      this.props.handleLeaveReader(\"left\");\n      this.props.handleLeaveReader(\"right\");\n      this.props.handleLeaveReader(\"top\");\n      this.props.handleLeaveReader(\"bottom\");\n    }\n    handleLinkJump(event);\n    if (!event.target.src) {\n      return;\n    }\n    if (this.state.isShowImage) {\n      this.setState({\n        isShowImage: false,\n        zoomIndex: 0,\n        rotateIndex: 0,\n        imageRatio: \"horizontal\",\n      });\n    }\n    event.preventDefault();\n    const handleDirection = (direction: string) => {\n      this.setState({ imageRatio: direction });\n    };\n    var img = new Image();\n    img.addEventListener(\"load\", function () {\n      handleDirection(\n        this.naturalWidth / this.naturalHeight > 1 ? \"horizontal\" : \"vertical\"\n      );\n    });\n    img.src = event.target.src;\n    let image: HTMLImageElement | null = document.querySelector(\".image\");\n    if (image) {\n      image!.src = event.target.src;\n      this.setState({ isShowImage: true });\n    }\n  };\n  hideImage = (event: any) => {\n    event.preventDefault();\n    if (event.target.src) {\n      let image: HTMLImageElement | null = document.querySelector(\".image\");\n      if (image) image.src = \"\";\n    }\n    this.setState({ isShowImage: false });\n  };\n  handleZoomIn = () => {\n    let image: any = document.querySelector(\".image\");\n    if (image.style.width === \"200vw\" || image.style.height === \"200vh\") return;\n    this.setState({ zoomIndex: this.state.zoomIndex + 1 }, () => {\n      if (this.state.imageRatio === \"horizontal\") {\n        image.style.width = `${60 + this.state.zoomIndex * 10}vw`;\n      } else {\n        image.style.height = `${100 + 10 * this.state.zoomIndex}vh`;\n        image.style.marginTop = `${10 * this.state.zoomIndex}vh`;\n      }\n    });\n  };\n  handleZoomOut = () => {\n    let image: any = document.querySelector(\".image\");\n    if (image.style.width === \"10vw\" || image.style.height === \"10vh\") return;\n    this.setState({ zoomIndex: this.state.zoomIndex - 1 }, () => {\n      if (this.state.imageRatio === \"horizontal\") {\n        image.style.width = `${60 + this.state.zoomIndex * 10}vw`;\n      } else {\n        image.style.height = `${100 + 10 * this.state.zoomIndex}vh`;\n      }\n    });\n  };\n  handleSave = async () => {\n    let image: any = document.querySelector(\".image\");\n    let blob = await fetch(image.src).then((r) => r.blob());\n    FileSaver.saveAs(blob, `${new Date().toLocaleDateString()}`);\n  };\n  handleClock = () => {\n    let image: any = document.querySelector(\".image\");\n    this.setState({ rotateIndex: this.state.rotateIndex + 1 }, () => {\n      image.style.transform = `rotate(${this.state.rotateIndex * 90}deg)`;\n    });\n  };\n  handleCounterClock = () => {\n    let image: any = document.querySelector(\".image\");\n    this.setState({ rotateIndex: this.state.rotateIndex - 1 }, () => {\n      image.style.transform = `rotate(${this.state.rotateIndex * 90}deg)`;\n    });\n  };\n  render() {\n    return (\n      <div\n        className=\"image-preview\"\n        style={this.state.isShowImage ? {} : { display: \"none\" }}\n      >\n        <div\n          className=\"image-background\"\n          style={\n            this.state.isShowImage\n              ? { backgroundColor: \"rgba(75,75,75,0.3)\" }\n              : {}\n          }\n          onClick={(event) => {\n            this.hideImage(event);\n          }}\n        ></div>\n        <img\n          src=\"\"\n          alt=\"\"\n          className=\"image\"\n          style={\n            this.state.imageRatio === \"horizontal\"\n              ? { width: \"60vw\" }\n              : { height: \"100vh\" }\n          }\n        />\n        <div className=\"image-operation\">\n          <span\n            className=\"icon-zoom-in zoom-in-icon\"\n            onClick={() => {\n              this.handleZoomIn();\n            }}\n          ></span>\n          <span\n            className=\"icon-zoom-out zoom-out-icon\"\n            onClick={() => {\n              this.handleZoomOut();\n            }}\n          ></span>\n          <span\n            className=\"icon-save save-icon\"\n            onClick={() => {\n              this.handleSave();\n            }}\n          ></span>\n          <span\n            className=\"icon-clockwise clockwise-icon\"\n            onClick={() => {\n              this.handleClock();\n            }}\n          ></span>\n          <span\n            className=\"icon-counterclockwise counterclockwise-icon\"\n            onClick={() => {\n              this.handleCounterClock();\n            }}\n          ></span>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default ImageViewer;\n","import { connect } from \"react-redux\";\nimport { stateType } from \"../../store\";\nimport ImageViewer from \"./component\";\nimport { withTranslation } from \"react-i18next\";\nconst mapStateToProps = (state: stateType) => {\n  return {\n    currentBook: state.book.currentBook,\n  };\n};\nconst actionCreator = {};\n\nexport default connect(\n  mapStateToProps,\n  actionCreator\n)(withTranslation()(ImageViewer as any));\n","import React from \"react\";\nimport \"./background.css\";\nimport { BackgroundProps, BackgroundState } from \"./interface\";\nimport StorageUtil from \"../../utils/serviceUtils/storageUtil\";\n\nclass Background extends React.Component<BackgroundProps, BackgroundState> {\n  isFirst: Boolean;\n  constructor(props: any) {\n    super(props);\n    this.state = {\n      isSingle:\n        StorageUtil.getReaderConfig(\"readerMode\") &&\n        StorageUtil.getReaderConfig(\"readerMode\") !== \"double\",\n      scale: StorageUtil.getReaderConfig(\"scale\") || 1,\n    };\n    this.isFirst = true;\n  }\n  componentDidMount() {\n    let background = document.querySelector(\".background\");\n    if (!background) return;\n    background?.setAttribute(\n      \"style\",\n      `background-color:${StorageUtil.getReaderConfig(\n        \"backgroundColor\"\n      )};filter: brightness(${\n        StorageUtil.getReaderConfig(\"brightness\") || 1\n      }) invert(${StorageUtil.getReaderConfig(\"isInvert\") === \"yes\" ? 1 : 0})`\n    );\n  }\n\n  render() {\n    return (\n      <>\n        <div\n          className=\"background-box2\"\n          style={\n            document.body.clientWidth < 570\n              ? { left: 5, right: 8 }\n              : this.state.isSingle\n              ? {\n                  left: `calc(50vw - ${\n                    270 * parseFloat(this.state.scale)\n                  }px - ${this.state.isSingle ? \"9\" : \"5\"}px)`,\n                  right: `calc(50vw - ${\n                    270 * parseFloat(this.state.scale)\n                  }px - 7px)`,\n                  boxShadow: \"0 0 0px rgba(191, 191, 191, 1)\",\n                }\n              : {}\n          }\n        ></div>\n\n        <div\n          className=\"background-box3\"\n          style={\n            document.body.clientWidth < 570\n              ? { left: 5, right: 10 }\n              : this.state.isSingle\n              ? {\n                  left: `calc(50vw - ${\n                    270 * parseFloat(this.state.scale)\n                  }px - 9px)`,\n                  right: `calc(50vw - ${\n                    270 * parseFloat(this.state.scale)\n                  }px - 9px)`,\n                }\n              : {}\n          }\n        >\n          {(!StorageUtil.getReaderConfig(\"backgroundColor\") &&\n            (StorageUtil.getReaderConfig(\"appSkin\") === \"night\" ||\n              (StorageUtil.getReaderConfig(\"appSkin\") === \"system\" &&\n                StorageUtil.getReaderConfig(\"isOSNight\") === \"yes\"))) ||\n          StorageUtil.getReaderConfig(\"backgroundColor\") ===\n            \"rgba(44,47,49,1)\" ? (\n            <div\n              className=\"dark-spine-shadow-left\"\n              style={\n                this.state.isSingle ||\n                (StorageUtil.getReaderConfig(\"backgroundColor\") &&\n                  StorageUtil.getReaderConfig(\"backgroundColor\").startsWith(\n                    \"#\"\n                  ))\n                  ? { display: \"none\" }\n                  : {}\n              }\n            ></div>\n          ) : (\n            <div\n              className=\"spine-shadow-left\"\n              style={\n                this.state.isSingle ||\n                (StorageUtil.getReaderConfig(\"backgroundColor\") &&\n                  StorageUtil.getReaderConfig(\"backgroundColor\").startsWith(\n                    \"#\"\n                  ))\n                  ? { display: \"none\" }\n                  : {}\n              }\n            ></div>\n          )}\n          <div\n            className=\"book-spine\"\n            style={this.state.isSingle ? { display: \"none\" } : {}}\n          ></div>\n          {(!StorageUtil.getReaderConfig(\"backgroundColor\") &&\n            StorageUtil.getReaderConfig(\"appSkin\") === \"night\") ||\n          StorageUtil.getReaderConfig(\"backgroundColor\") ===\n            \"rgba(44,47,49,1)\" ? (\n            <div\n              className=\"dark-spine-shadow-right\"\n              style={\n                StorageUtil.getReaderConfig(\"backgroundColor\") &&\n                StorageUtil.getReaderConfig(\"backgroundColor\").startsWith(\"#\")\n                  ? { display: \"none\" }\n                  : this.state.isSingle\n                  ? {\n                      position: \"relative\",\n                      right: 0,\n                    }\n                  : {}\n              }\n            ></div>\n          ) : (\n            <div\n              className=\"spine-shadow-right\"\n              style={\n                StorageUtil.getReaderConfig(\"backgroundColor\") &&\n                StorageUtil.getReaderConfig(\"backgroundColor\").startsWith(\"#\")\n                  ? { display: \"none\" }\n                  : this.state.isSingle\n                  ? {\n                      position: \"relative\",\n                      right: 0,\n                    }\n                  : {}\n              }\n            ></div>\n          )}\n        </div>\n\n        <div\n          className=\"background-box1\"\n          style={\n            document.body.clientWidth < 570\n              ? { left: 5, right: 6 }\n              : this.state.isSingle\n              ? {\n                  left: `calc(50vw - ${\n                    270 * parseFloat(this.state.scale)\n                  }px - ${this.state.isSingle ? \"9\" : \"5\"}px)`,\n                  right: `calc(50vw - ${\n                    270 * parseFloat(this.state.scale)\n                  }px - 5px)`,\n                  boxShadow: \"0 0 0px rgba(191, 191, 191, 1)\",\n                }\n              : {}\n          }\n        ></div>\n      </>\n    );\n  }\n}\n\nexport default Background;\n","import { connect } from \"react-redux\";\nimport { stateType } from \"../../store\";\nimport Background from \"./component\";\n\nconst mapStateToProps = (state: stateType) => {\n  return {\n    currentEpub: state.book.currentEpub,\n    currentBook: state.book.currentBook,\n  };\n};\nconst actionCreator = {};\nexport default connect(mapStateToProps, actionCreator)(Background);\n","import React from \"react\";\nimport { Trans } from \"react-i18next\";\nimport { DeletePopupProps } from \"./interface\";\nimport toast from \"react-hot-toast\";\nclass DeletePopup extends React.Component<DeletePopupProps> {\n  handleCancel = () => {\n    this.props.handleDeletePopup(false);\n  };\n  handleComfirm = () => {\n    //从列表删除和从图书库删除判断\n    this.props.handleDeletePopup(false);\n    this.props.handleDeleteOpearion();\n    toast.success(this.props.t(\"Delete Successfully\"));\n  };\n  render() {\n    return (\n      <div className=\"delete-dialog-container\">\n        <div className=\"delete-dialog-title\">\n          <Trans>{this.props.title}</Trans>\n        </div>\n\n        <div className=\"delete-dialog-book\">\n          <div className=\"delete-dialog-book-title\">{this.props.name}</div>\n        </div>\n\n        <div className=\"delete-dialog-other-option\">\n          <Trans>{this.props.description}</Trans>\n        </div>\n\n        <div\n          className=\"delete-dialog-cancel\"\n          onClick={() => {\n            this.handleCancel();\n          }}\n        >\n          <Trans>Cancel</Trans>\n        </div>\n        <div\n          className=\"delete-dialog-comfirm\"\n          onClick={() => {\n            this.handleComfirm();\n          }}\n        >\n          <Trans>Delete</Trans>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default DeletePopup;\n","import { connect } from \"react-redux\";\nimport { handleFetchBooks } from \"../../../store/actions\";\nimport { stateType } from \"../../../store\";\nimport { withTranslation } from \"react-i18next\";\nimport DeletePopup from \"./component\";\n\nconst mapStateToProps = (state: stateType) => {\n  return {};\n};\nconst actionCreator = {\n  handleFetchBooks,\n};\nexport default connect(\n  mapStateToProps,\n  actionCreator\n)(withTranslation()(DeletePopup as any));\n","import React from \"react\";\nimport EpubViewer from \"../epubViewer\";\nimport PageWidget from \"../pageWidget\";\nimport SettingPanel from \"../panels/settingPanel\";\nimport NavigationPanel from \"../panels/navigationPanel\";\nimport OperationPanel from \"../panels/operationPanel\";\nimport ProgressPanel from \"../panels/progressPanel\";\nimport { ReaderProps, ReaderState } from \"./interface\";\nimport { EpubMouseEvent } from \"../../utils/serviceUtils/mouseEvent\";\nimport StorageUtil from \"../../utils/serviceUtils/storageUtil\";\nimport ReadingTime from \"../../utils/readUtils/readingTime\";\nimport Background from \"../../components/background\";\nlet lock = false;\nclass Reader extends React.Component<ReaderProps, ReaderState> {\n  messageTimer!: NodeJS.Timeout;\n  tickTimer!: NodeJS.Timeout;\n  rendition: any;\n\n  constructor(props: ReaderProps) {\n    super(props);\n    this.state = {\n      isOpenRightPanel:\n        StorageUtil.getReaderConfig(\"isSettingLocked\") === \"yes\" ? true : false,\n      isOpenTopPanel: false,\n      isOpenBottomPanel: false,\n      isOpenLeftPanel:\n        StorageUtil.getReaderConfig(\"isNavLocked\") === \"yes\" ? true : false,\n      rendition: null,\n      hoverPanel: \"\",\n      scale: StorageUtil.getReaderConfig(\"scale\") || 1,\n      margin: parseInt(StorageUtil.getReaderConfig(\"margin\")) || 30,\n      time: ReadingTime.getTime(this.props.currentBook.key),\n      isTouch: StorageUtil.getReaderConfig(\"isTouch\") === \"yes\",\n      isPreventTrigger:\n        StorageUtil.getReaderConfig(\"isPreventTrigger\") === \"yes\",\n      readerMode: StorageUtil.getReaderConfig(\"readerMode\") || \"double\",\n      isHideBackground:\n        StorageUtil.getReaderConfig(\"isHideBackground\") === \"yes\",\n    };\n  }\n  componentWillMount() {\n    this.props.handleFetchBookmarks();\n    this.props.handleFetchPercentage(this.props.currentBook);\n    this.props.handleFetchNotes();\n    this.props.handleFetchBooks();\n    this.props.handleFetchChapters(this.props.currentEpub);\n  }\n\n  componentDidMount() {\n    this.handleRenderBook();\n    this.props.handleRenderFunc(this.handleRenderBook);\n    var doit;\n    window.addEventListener(\"resize\", () => {\n      clearTimeout(doit);\n      doit = setTimeout(this.handleRenderBook, 100);\n    });\n    this.tickTimer = global.setInterval(() => {\n      let time = this.state.time;\n      time += 1;\n      this.setState({ time });\n\n      //解决快速翻页过程中图书消失的bug\n      let renderedBook = document.querySelector(\".epub-view\");\n      if (\n        renderedBook &&\n        !renderedBook.innerHTML &&\n        this.state.readerMode !== \"scroll\"\n      ) {\n        this.handleRenderBook();\n      }\n    }, 1000);\n  }\n  componentWillUnmount() {\n    clearInterval(this.tickTimer);\n  }\n  handleRenderBook = () => {\n    let page = document.querySelector(\"#page-area\");\n    let epub = this.props.currentEpub;\n    if (!page) return;\n    if (page.innerHTML) {\n      page.innerHTML = \"\";\n    }\n\n    this.setState({ rendition: null }, () => {\n      (window as any).rangy.init(); // 初始化\n      this.rendition = epub.renderTo(page, {\n        manager: \"default\",\n        flow: this.state.readerMode === \"scroll\" ? \"scrolled\" : \"auto\",\n        width: \"100%\",\n        height: \"100%\",\n        snap: true,\n        spread:\n          StorageUtil.getReaderConfig(\"readerMode\") === \"single\" ? \"none\" : \"\",\n      });\n      this.setState({ rendition: this.rendition });\n      EpubMouseEvent(this.rendition, this.state.readerMode); // 绑定事件\n    });\n  };\n\n  //进入阅读器\n  handleEnterReader = (position: string) => {\n    //控制上下左右的菜单的显示\n    switch (position) {\n      case \"right\":\n        this.setState({\n          isOpenRightPanel: this.state.isOpenRightPanel ? false : true,\n        });\n        break;\n      case \"left\":\n        this.setState({\n          isOpenLeftPanel: this.state.isOpenLeftPanel ? false : true,\n        });\n        break;\n      case \"top\":\n        this.setState({\n          isOpenTopPanel: this.state.isOpenTopPanel ? false : true,\n        });\n        break;\n      case \"bottom\":\n        this.setState({\n          isOpenBottomPanel: this.state.isOpenBottomPanel ? false : true,\n        });\n        break;\n      default:\n        break;\n    }\n  };\n  //退出阅读器\n  handleLeaveReader = (position: string) => {\n    //控制上下左右的菜单的显示\n    switch (position) {\n      case \"right\":\n        if (StorageUtil.getReaderConfig(\"isSettingLocked\") === \"yes\") {\n          break;\n        } else {\n          this.setState({ isOpenRightPanel: false });\n          break;\n        }\n\n      case \"left\":\n        if (StorageUtil.getReaderConfig(\"isNavLocked\") === \"yes\") {\n          break;\n        } else {\n          this.setState({ isOpenLeftPanel: false });\n          break;\n        }\n      case \"top\":\n        this.setState({ isOpenTopPanel: false });\n        break;\n      case \"bottom\":\n        this.setState({ isOpenBottomPanel: false });\n        break;\n      default:\n        break;\n    }\n  };\n  nextPage = () => {\n    if (lock) return;\n    this.state.rendition.next();\n    lock = true;\n    setTimeout(function () {\n      lock = false;\n    }, 400);\n    return false;\n  };\n  prevPage = () => {\n    if (lock) return;\n    this.state.rendition.prev();\n    lock = true;\n    setTimeout(function () {\n      lock = false;\n    }, 400);\n    return false;\n  };\n  render() {\n    const renditionProps = {\n      rendition: this.state.rendition,\n      handleLeaveReader: this.handleLeaveReader,\n      handleEnterReader: this.handleEnterReader,\n      isShow:\n        this.state.isOpenLeftPanel ||\n        this.state.isOpenTopPanel ||\n        this.state.isOpenBottomPanel ||\n        this.state.isOpenRightPanel,\n    };\n    return (\n      <div className=\"viewer\">\n        {StorageUtil.getReaderConfig(\"isHidePageButton\") !== \"yes\" && (\n          <>\n            <div\n              className=\"previous-chapter-single-container\"\n              onClick={() => {\n                this.prevPage();\n              }}\n            >\n              <span className=\"icon-dropdown previous-chapter-single\"></span>\n            </div>\n            <div\n              className=\"next-chapter-single-container\"\n              onClick={() => {\n                this.nextPage();\n              }}\n            >\n              <span className=\"icon-dropdown next-chapter-single\"></span>\n            </div>\n          </>\n        )}\n        {StorageUtil.getReaderConfig(\"isHideMenuButton\") !== \"yes\" && (\n          <div\n            className=\"reader-setting-icon-container\"\n            onClick={() => {\n              this.handleEnterReader(\"left\");\n              this.handleEnterReader(\"right\");\n              this.handleEnterReader(\"bottom\");\n              this.handleEnterReader(\"top\");\n            }}\n          >\n            <span className=\"icon-grid reader-setting-icon\"></span>\n          </div>\n        )}\n        <div\n          className=\"left-panel\"\n          onMouseEnter={() => {\n            if (\n              this.state.isTouch ||\n              this.state.isOpenLeftPanel ||\n              this.state.isPreventTrigger\n            ) {\n              this.setState({ hoverPanel: \"left\" });\n              return;\n            }\n            this.handleEnterReader(\"left\");\n          }}\n          onMouseLeave={() => {\n            this.setState({ hoverPanel: \"\" });\n          }}\n          style={this.state.hoverPanel === \"left\" ? { opacity: 0.5 } : {}}\n          onClick={() => {\n            this.handleEnterReader(\"left\");\n          }}\n        >\n          <span className=\"icon-grid panel-icon\"></span>\n        </div>\n        <div\n          className=\"right-panel\"\n          onMouseEnter={() => {\n            if (\n              this.state.isTouch ||\n              this.state.isOpenRightPanel ||\n              this.state.isPreventTrigger\n            ) {\n              this.setState({ hoverPanel: \"right\" });\n              return;\n            }\n            this.handleEnterReader(\"right\");\n          }}\n          onMouseLeave={() => {\n            this.setState({ hoverPanel: \"\" });\n          }}\n          style={this.state.hoverPanel === \"right\" ? { opacity: 0.5 } : {}}\n          onClick={() => {\n            this.handleEnterReader(\"right\");\n          }}\n        >\n          <span className=\"icon-grid panel-icon\"></span>\n        </div>\n        <div\n          className=\"top-panel\"\n          onMouseEnter={() => {\n            if (\n              this.state.isTouch ||\n              this.state.isOpenTopPanel ||\n              this.state.isPreventTrigger\n            ) {\n              this.setState({ hoverPanel: \"top\" });\n              return;\n            }\n            this.handleEnterReader(\"top\");\n          }}\n          onMouseLeave={() => {\n            this.setState({ hoverPanel: \"\" });\n          }}\n          style={this.state.hoverPanel === \"top\" ? { opacity: 0.5 } : {}}\n          onClick={() => {\n            this.handleEnterReader(\"top\");\n          }}\n        >\n          <span className=\"icon-grid panel-icon\"></span>\n        </div>\n        <div\n          className=\"bottom-panel\"\n          onMouseEnter={() => {\n            if (\n              this.state.isTouch ||\n              this.state.isOpenBottomPanel ||\n              this.state.isPreventTrigger\n            ) {\n              this.setState({ hoverPanel: \"bottom\" });\n              return;\n            }\n            this.handleEnterReader(\"bottom\");\n          }}\n          onMouseLeave={() => {\n            this.setState({ hoverPanel: \"\" });\n          }}\n          style={this.state.hoverPanel === \"bottom\" ? { opacity: 0.5 } : {}}\n          onClick={() => {\n            this.handleEnterReader(\"bottom\");\n          }}\n        >\n          <span className=\"icon-grid panel-icon\"></span>\n        </div>\n\n        {this.state.rendition && this.props.currentEpub.rendition && (\n          <EpubViewer {...renditionProps} />\n        )}\n        <div\n          className=\"setting-panel-container\"\n          onMouseLeave={(event) => {\n            this.handleLeaveReader(\"right\");\n          }}\n          style={\n            this.state.isOpenRightPanel\n              ? {}\n              : {\n                  transform: \"translateX(309px)\",\n                }\n          }\n        >\n          <SettingPanel />\n        </div>\n        <div\n          className=\"navigation-panel-container\"\n          onMouseLeave={(event) => {\n            this.handleLeaveReader(\"left\");\n          }}\n          style={\n            this.state.isOpenLeftPanel\n              ? {}\n              : {\n                  transform: \"translateX(-309px)\",\n                }\n          }\n        >\n          <NavigationPanel {...{ time: this.state.time }} />\n        </div>\n        <div\n          className=\"progress-panel-container\"\n          onMouseLeave={(event) => {\n            this.handleLeaveReader(\"bottom\");\n          }}\n          style={\n            this.state.isOpenBottomPanel\n              ? {}\n              : {\n                  transform: \"translateY(110px)\",\n                }\n          }\n        >\n          <ProgressPanel {...{ time: this.state.time }} />\n        </div>\n        <div\n          className=\"operation-panel-container\"\n          onMouseLeave={(event) => {\n            this.handleLeaveReader(\"top\");\n          }}\n          style={\n            this.state.isOpenTopPanel\n              ? {}\n              : {\n                  transform: \"translateY(-110px)\",\n                }\n          }\n        >\n          <OperationPanel {...{ time: this.state.time }} />\n        </div>\n        <div\n          className=\"view-area-page\"\n          id=\"page-area\"\n          style={\n            document.body.clientWidth < 570\n              ? { left: 0, right: 0 }\n              : this.state.readerMode === \"scroll\"\n              ? {\n                  left: `calc(50vw - ${270 * parseFloat(this.state.scale)}px)`,\n                  right: `calc(50vw - ${270 * parseFloat(this.state.scale)}px)`,\n                  top: \"75px\",\n                  bottom: \"75px\",\n                }\n              : this.state.readerMode === \"single\"\n              ? {\n                  left: `calc(50vw - ${270 * parseFloat(this.state.scale)}px)`,\n                  right: `calc(50vw - ${270 * parseFloat(this.state.scale)}px)`,\n                }\n              : this.state.readerMode === \"double\"\n              ? {\n                  left: this.state.margin - 40 + \"px\",\n                  right: this.state.margin - 40 + \"px\",\n                }\n              : {}\n          }\n        >\n          <span className=\"icon-grid reader-setting-icon\"></span>\n        </div>\n        {this.state.isHideBackground ? null : <Background />}\n\n        <PageWidget {...{ time: this.state.time }} />\n      </div>\n    );\n  }\n}\n\nexport default Reader;\n","import React from \"react\";\nimport RecentBooks from \"../../utils/readUtils/recordRecent\";\nimport { ViewerProps, ViewerState } from \"./interface\";\nimport localforage from \"localforage\";\nimport { withRouter } from \"react-router-dom\";\nimport BookUtil from \"../../utils/fileUtils/bookUtil\";\nimport iconv from \"iconv-lite\";\nimport chardet from \"chardet\";\nimport rtfToHTML from \"@iarna/rtf-to-html\";\nimport PopupMenu from \"../../components/popups/popupMenu\";\nimport { xmlBookParser } from \"../../utils/fileUtils/xmlUtil\";\nimport StorageUtil from \"../../utils/serviceUtils/storageUtil\";\nimport RecordLocation from \"../../utils/readUtils/recordLocation\";\nimport { mimetype } from \"../../constants/mimetype\";\nimport Background from \"../../components/background\";\nimport toast from \"react-hot-toast\";\nimport StyleUtil from \"../../utils/readUtils/styleUtil\";\nimport \"./index.css\";\nimport { HtmlMouseEvent } from \"../../utils/serviceUtils/mouseEvent\";\nimport untar from \"js-untar\";\nimport ImageViewer from \"../../components/imageViewer\";\nimport _ from \"underscore\";\nimport { removeExtraQuestionMark } from \"../../utils/fileUtils/rtfUtil\";\nimport { getIframeDoc } from \"../../utils/serviceUtils/docUtil\";\nimport { tsTransform } from \"../../utils/serviceUtils/langUtil\";\n\ndeclare var window: any;\n\nconst { MobiRender, Azw3Render, TxtRender, StrRender, ComicRender } =\n  window.Kookit;\nlet Unrar = window.Unrar;\nlet JSZip = window.JSZip;\n\nclass Viewer extends React.Component<ViewerProps, ViewerState> {\n  epub: any;\n  lock: boolean;\n  constructor(props: ViewerProps) {\n    super(props);\n    this.state = {\n      cfiRange: null,\n      contents: null,\n      rect: null,\n      key: \"\",\n      isFirst: true,\n      scale: StorageUtil.getReaderConfig(\"scale\") || 1,\n      chapterTitle:\n        RecordLocation.getHtmlLocation(this.props.currentBook.key)\n          .chapterTitle || \"\",\n      readerMode: StorageUtil.getReaderConfig(\"readerMode\") || \"double\",\n      margin: parseInt(StorageUtil.getReaderConfig(\"margin\")) || 30,\n      chapterIndex: 0,\n      chapter: \"\",\n      pageWidth: 0,\n      pageHeight: 0,\n    };\n    this.lock = false;\n  }\n  componentWillMount() {\n    this.props.handleFetchBookmarks();\n    this.props.handleFetchNotes();\n    this.props.handleFetchBooks();\n  }\n  componentDidMount() {\n    this.handleRenderBook();\n\n    this.props.handleRenderFunc(this.handleRenderBook);\n    var doit;\n    window.addEventListener(\"resize\", () => {\n      clearTimeout(doit);\n      doit = setTimeout(this.handleRenderBook, 100);\n    });\n  }\n  handleRenderBook = () => {\n    let { key, path, format, name } = this.props.currentBook;\n    this.props.handleHtmlBook(null);\n    BookUtil.fetchBook(key, true, path).then((result) => {\n      if (!result) {\n        toast.error(this.props.t(\"Book not exsits\"));\n        return;\n      }\n\n      if (format === \"MOBI\") {\n        this.handleMobi(result as ArrayBuffer);\n      } else if (format === \"AZW3\") {\n        this.handleAzw3(result as ArrayBuffer);\n      } else if (format === \"TXT\") {\n        this.handleTxt(result as ArrayBuffer);\n      } else if (format === \"MD\") {\n        this.handleMD(result as ArrayBuffer);\n      } else if (format === \"FB2\") {\n        this.handleFb2(result as ArrayBuffer);\n      } else if (format === \"RTF\") {\n        this.handleRtf(result as ArrayBuffer);\n      } else if (format === \"DOCX\") {\n        this.handleDocx(result as ArrayBuffer);\n      } else if (\n        format === \"HTML\" ||\n        format === \"XHTML\" ||\n        format === \"HTM\" ||\n        format === \"XML\"\n      ) {\n        this.handleHtml(result as ArrayBuffer, format);\n      } else if (format === \"CBR\") {\n        this.handleCbr(result as ArrayBuffer);\n      } else if (format === \"CBT\") {\n        this.handleCbt(result as ArrayBuffer);\n      } else if (format === \"CBZ\") {\n        this.handleCbz(result as ArrayBuffer);\n      }\n      this.props.handleReadingState(true);\n\n      RecentBooks.setRecent(this.props.currentBook.key);\n      document.title = name + \" - Koodo Reader\";\n    });\n  };\n\n  handleRest = (rendition: any) => {\n    StyleUtil.addDefaultCss();\n    rendition.setStyle(StyleUtil.getCustomCss(true));\n    let bookLocation: { text: string; count: string; chapterTitle: string } =\n      RecordLocation.getHtmlLocation(this.props.currentBook.key);\n    rendition.goToPosition(\n      bookLocation.text,\n      bookLocation.chapterTitle,\n      bookLocation.count\n    );\n    let doc = getIframeDoc();\n    if (!doc) return;\n    doc.addEventListener(\"click\", (event) => {\n      this.props.handleLeaveReader(\"left\");\n      this.props.handleLeaveReader(\"right\");\n      this.props.handleLeaveReader(\"top\");\n      this.props.handleLeaveReader(\"bottom\");\n    });\n\n    HtmlMouseEvent(\n      rendition,\n      this.props.currentBook.key,\n      this.state.readerMode\n    );\n\n    this.props.handleHtmlBook({\n      key: this.props.currentBook.key,\n      chapters: rendition.getChapter(),\n      subitems: [],\n      rendition: rendition,\n    });\n    this.setState({\n      pageWidth: rendition.getPageSize().width,\n      pageHeight: rendition.getPageSize().height,\n    });\n    rendition.on(\"rendered\", () => {\n      let bookLocation: { text: string; count: string; chapterTitle: string } =\n        RecordLocation.getHtmlLocation(this.props.currentBook.key);\n      this.props.handleCurrentChapter(bookLocation.chapterTitle);\n      if (this.props.currentBook.format.startsWith(\"CB\")) {\n        this.setState({\n          chapter:\n            this.props.htmlBook.chapters[parseInt(bookLocation.count) || 0]\n              .label,\n          chapterIndex: parseInt(bookLocation.count) || 0,\n        });\n      } else {\n        this.setState({\n          chapter:\n            bookLocation.chapterTitle || this.props.htmlBook.chapters[0].label,\n          chapterIndex: bookLocation.chapterTitle\n            ? _.findLastIndex(this.props.htmlBook.chapters, {\n                label: bookLocation.chapterTitle,\n              })\n            : 0,\n        });\n      }\n      tsTransform();\n    });\n\n    doc.addEventListener(\"mouseup\", () => {\n      if (!doc!.getSelection()) return;\n      var rect = doc!.getSelection()!.getRangeAt(0).getBoundingClientRect();\n      this.setState({ rect });\n    });\n  };\n  handleCbr = async (result: ArrayBuffer) => {\n    let unrar = new Unrar(result);\n    var entries = unrar.getEntries();\n    let bookLocation = RecordLocation.getHtmlLocation(\n      this.props.currentBook.key\n    );\n    let rendition = new ComicRender(\n      entries.map((item: any) => item.name),\n      unrar,\n      this.state.readerMode,\n      \"cbr\",\n      StorageUtil.getReaderConfig(\"isSliding\") === \"yes\" ? true : false\n    );\n    await rendition.renderTo(\n      document.getElementsByClassName(\"html-viewer-page\")[0],\n      parseInt(bookLocation.count) || 0\n    );\n    this.handleRest(rendition);\n  };\n  handleCbz = (result: ArrayBuffer) => {\n    let zip = new JSZip();\n    let bookLocation = RecordLocation.getHtmlLocation(\n      this.props.currentBook.key\n    );\n    zip.loadAsync(result).then(async (contents) => {\n      let rendition = new ComicRender(\n        Object.keys(contents.files).sort(),\n        zip,\n        this.state.readerMode,\n        \"cbz\",\n        StorageUtil.getReaderConfig(\"isSliding\") === \"yes\" ? true : false\n      );\n      await rendition.renderTo(\n        document.getElementsByClassName(\"html-viewer-page\")[0],\n        parseInt(bookLocation.count) || 0\n      );\n      this.handleRest(rendition);\n    });\n  };\n  handleCbt = (result: ArrayBuffer) => {\n    let bookLocation = RecordLocation.getHtmlLocation(\n      this.props.currentBook.key\n    );\n    untar(result).then(\n      async (extractedFiles) => {\n        let rendition = new ComicRender(\n          extractedFiles.map((item: any) => item.name),\n          extractedFiles,\n          this.state.readerMode,\n          \"cbt\",\n          StorageUtil.getReaderConfig(\"isSliding\") === \"yes\" ? true : false\n        );\n        await rendition.renderTo(\n          document.getElementsByClassName(\"html-viewer-page\")[0],\n          parseInt(bookLocation.count) || 0\n        );\n        this.handleRest(rendition);\n      },\n      function (err) {\n        // onError\n      },\n      function (extractedFile) {\n        // onProgress\n      }\n    );\n  };\n  handleMobi = async (result: ArrayBuffer) => {\n    let rendition = new MobiRender(\n      result,\n      this.state.readerMode,\n      StorageUtil.getReaderConfig(\"isSliding\") === \"yes\" ? true : false\n    );\n    await rendition.renderTo(\n      document.getElementsByClassName(\"html-viewer-page\")[0]\n    );\n    this.handleRest(rendition);\n  };\n  handleAzw3 = async (result: ArrayBuffer) => {\n    let rendition = new Azw3Render(\n      result,\n      this.state.readerMode,\n      StorageUtil.getReaderConfig(\"isSliding\") === \"yes\" ? true : false\n    );\n    await rendition.renderTo(\n      document.getElementsByClassName(\"html-viewer-page\")[0]\n    );\n    this.handleRest(rendition);\n  };\n  handleCharset = (result: ArrayBuffer) => {\n    return new Promise<string>(async (resolve, reject) => {\n      let { books } = this.props;\n      let charset = \"\";\n      books.forEach((item) => {\n        if (item.key === this.props.currentBook.key) {\n          charset = chardet.detect(Buffer.from(result)) || \"\";\n          item.charset = charset;\n          this.props.handleReadingBook(item);\n        }\n      });\n\n      await localforage.setItem(\"books\", books);\n      // this.props.handleFetchBooks();\n      resolve(charset);\n    });\n  };\n  handleTxt = async (result: ArrayBuffer) => {\n    let charset = \"\";\n    if (!this.props.currentBook.charset) {\n      charset = await this.handleCharset(result);\n    }\n    let rendition = new TxtRender(\n      result,\n      this.state.readerMode,\n      this.props.currentBook.charset || charset || \"utf8\",\n      StorageUtil.getReaderConfig(\"isSliding\") === \"yes\" ? true : false\n    );\n    await rendition.renderTo(\n      document.getElementsByClassName(\"html-viewer-page\")[0]\n    );\n    this.handleRest(rendition);\n  };\n  handleMD = (result: ArrayBuffer) => {\n    var blob = new Blob([result], { type: \"text/plain\" });\n    var reader = new FileReader();\n    reader.onload = async (evt) => {\n      let docStr = window.marked(evt.target?.result as any);\n      let rendition = new StrRender(\n        docStr,\n        this.state.readerMode,\n        StorageUtil.getReaderConfig(\"isSliding\") === \"yes\" ? true : false\n      );\n      await rendition.renderTo(\n        document.getElementsByClassName(\"html-viewer-page\")[0]\n      );\n      this.handleRest(rendition);\n    };\n    reader.readAsText(blob, \"UTF-8\");\n  };\n  handleRtf = async (result: ArrayBuffer) => {\n    let charset = \"\";\n    if (!this.props.currentBook.charset) {\n      charset = await this.handleCharset(result);\n    }\n    let text = iconv.decode(\n      Buffer.from(result),\n      this.props.currentBook.charset || charset || \"utf8\"\n    );\n\n    rtfToHTML.fromString(text, async (err: any, html: any) => {\n      let rendition = new StrRender(\n        removeExtraQuestionMark(html),\n        this.state.readerMode,\n        StorageUtil.getReaderConfig(\"isSliding\") === \"yes\" ? true : false\n      );\n      await rendition.renderTo(\n        document.getElementsByClassName(\"html-viewer-page\")[0]\n      );\n      this.handleRest(rendition);\n    });\n  };\n  handleDocx = (result: ArrayBuffer) => {\n    window.mammoth\n      .convertToHtml({ arrayBuffer: result })\n      .then(async (res: any) => {\n        let rendition = new StrRender(\n          res.value,\n          this.state.readerMode,\n          StorageUtil.getReaderConfig(\"isSliding\") === \"yes\" ? true : false\n        );\n        await rendition.renderTo(\n          document.getElementsByClassName(\"html-viewer-page\")[0]\n        );\n        this.handleRest(rendition);\n      });\n  };\n  toBuffer(ab) {\n    const buf = Buffer.alloc(ab.byteLength);\n    const view = new Uint8Array(ab);\n    for (let i = 0; i < buf.length; ++i) {\n      buf[i] = view[i];\n    }\n    return buf;\n  }\n  handleFb2 = async (result: ArrayBuffer) => {\n    let charset = \"\";\n    if (!this.props.currentBook.charset) {\n      charset = await this.handleCharset(result);\n    }\n    let fb2Str = iconv.decode(\n      Buffer.from(result),\n      this.props.currentBook.charset || charset || \"utf8\"\n    );\n    let bookObj = xmlBookParser(Buffer.from(result), fb2Str);\n    let rendition = new StrRender(\n      bookObj,\n      this.state.readerMode,\n      StorageUtil.getReaderConfig(\"isSliding\") === \"yes\" ? true : false\n    );\n    await rendition.renderTo(\n      document.getElementsByClassName(\"html-viewer-page\")[0]\n    );\n    this.handleRest(rendition);\n  };\n  handleHtml = (result: ArrayBuffer, format: string) => {\n    var blob = new Blob([result], {\n      type: mimetype[format.toLocaleLowerCase()],\n    });\n    var reader = new FileReader();\n    reader.onload = async (evt) => {\n      const html = evt.target?.result as any;\n      let rendition = new StrRender(\n        html,\n        this.state.readerMode,\n        StorageUtil.getReaderConfig(\"isSliding\") === \"yes\" ? true : false\n      );\n      await rendition.renderTo(\n        document.getElementsByClassName(\"html-viewer-page\")[0]\n      );\n      this.handleRest(rendition);\n    };\n    reader.readAsText(blob, \"UTF-8\");\n  };\n  render() {\n    return (\n      <>\n        <div\n          className=\"html-viewer-page\"\n          id=\"page-area\"\n          style={\n            document.body.clientWidth < 570\n              ? { left: 0, right: 0 }\n              : this.state.readerMode === \"scroll\"\n              ? {\n                  left: `calc(50vw - ${\n                    270 * parseFloat(this.state.scale)\n                  }px + 9px)`,\n                  right: `calc(50vw - ${\n                    270 * parseFloat(this.state.scale)\n                  }px + 7px)`,\n                  overflowY: \"scroll\",\n                  overflowX: \"hidden\",\n                }\n              : this.state.readerMode === \"single\"\n              ? {\n                  left: `calc(50vw - ${\n                    270 * parseFloat(this.state.scale)\n                  }px + 15px)`,\n                  right: `calc(50vw - ${\n                    270 * parseFloat(this.state.scale)\n                  }px + 15px)`,\n                }\n              : this.state.readerMode === \"double\"\n              ? {\n                  left: this.state.margin + 10 + \"px\",\n                  right: this.state.margin + 10 + \"px\",\n                }\n              : {}\n          }\n        ></div>\n        {StorageUtil.getReaderConfig(\"isHideBackground\") === \"yes\" ? null : this\n            .props.currentBook.key ? (\n          <Background />\n        ) : null}\n        {this.props.htmlBook && (\n          <PopupMenu\n            {...{\n              rendition: this.props.htmlBook.rendition,\n              rect: this.state.rect,\n              pageWidth: this.state.pageWidth,\n              pageHeight: this.state.pageHeight,\n              chapterIndex: this.state.chapterIndex,\n              chapter: this.state.chapter,\n            }}\n          />\n        )}\n        {this.props.htmlBook && (\n          <ImageViewer\n            {...{\n              isShow: this.props.isShow,\n              rendition: this.props.htmlBook.rendition,\n              handleEnterReader: this.props.handleEnterReader,\n              handleLeaveReader: this.props.handleLeaveReader,\n            }}\n          />\n        )}\n      </>\n    );\n  }\n}\nexport default withRouter(Viewer as any);\n","export const mimetype = {\n  svg: \"image/svg+xml\",\n  png: \"image/png\",\n  jpg: \"image/jpeg\",\n  jpeg: \"image/jpeg\",\n  gif: \"image/gif\",\n  webp: \"image/webp\",\n  zip: \"application/zip\",\n  rar: \"application/x-rar-compressed\",\n  \"7z\": \"application/x-7z-compressed\",\n  tar: \"application/x-tar\",\n  html: \"text/html\",\n  htm: \"text/html\",\n  xml: \"text/xml\",\n  xhtml: \"application/xhtml+xml\",\n};\n","export const removeExtraQuestionMark = (html: any) => {\n  return html\n    .replaceAll(\"–?\", \"–\")\n    .replaceAll(\"“?\", \"“\")\n    .replaceAll(\"”?\", \"”\")\n    .replaceAll(\"©?\", \"©\")\n    .replaceAll(\"’?\", \"’\")\n    .replaceAll(\"“?\", \"“\")\n    .replaceAll(\"…?\", \"…\")\n    .replaceAll(\"—?\", \"—\")\n    .replaceAll(\"‘?\", \"‘\")\n    .replaceAll(\"“?\", \"“\");\n};\n","import React from \"react\";\nimport PopupMenu from \"../../components/popups/popupMenu\";\nimport { ViewAreaProps, ViewAreaStates } from \"./interface\";\nimport RecordLocation from \"../../utils/readUtils/recordLocation\";\nimport BookmarkModel from \"../../model/Bookmark\";\nimport StyleUtil from \"../../utils/readUtils/styleUtil\";\nimport ImageViewer from \"../../components/imageViewer\";\nimport { getIframeDoc } from \"../../utils/serviceUtils/docUtil\";\nimport { tsTransform } from \"../../utils/serviceUtils/langUtil\";\n\ndeclare var window: any;\n\nclass EpubViewer extends React.Component<ViewAreaProps, ViewAreaStates> {\n  isFirst: boolean;\n  constructor(props: ViewAreaProps) {\n    super(props);\n    this.state = {\n      // cfiRange: null,\n      rect: null,\n      chapterIndex: 0,\n      chapter: \"\",\n      pageWidth: 0,\n      pageHeight: 0,\n    };\n    this.isFirst = true;\n  }\n\n  componentDidMount() {\n    let epub = this.props.currentEpub;\n    window.rangy.init(); // 初始化\n    this.props.rendition.on(\"locationChanged\", () => {\n      this.props.handleReadingEpub(epub);\n      this.props.handleOpenMenu(false);\n      const currentLocation = this.props.rendition.currentLocation();\n      if (!currentLocation.start) {\n        return;\n      }\n      const cfi = currentLocation.start.cfi;\n      this.props.handleShowBookmark(\n        this.props.bookmarks &&\n          this.props.bookmarks.filter(\n            (item: BookmarkModel) => item.cfi === cfi\n          )[0]\n          ? true\n          : false\n      );\n\n      if (!this.isFirst && this.props.locations) {\n        let percentage = this.props.locations.percentageFromCfi(cfi);\n        RecordLocation.recordCfi(this.props.currentBook.key, cfi, percentage);\n        this.props.handlePercentage(percentage);\n      } else if (!this.isFirst) {\n        //如果过暂时没有解析出locations，就直接记录cfi\n        RecordLocation.recordCfi(\n          this.props.currentBook.key,\n          cfi,\n          RecordLocation.getCfi(this.props.currentBook.key).percentage\n        );\n      }\n      this.isFirst = false;\n    });\n    this.props.rendition.on(\"rendered\", () => {\n      let doc = getIframeDoc();\n      if (!doc) return;\n      const currentLocation = this.props.rendition.currentLocation();\n      let chapterHref = currentLocation.start.href;\n      if (!currentLocation || !currentLocation.start) return;\n      this.setState({\n        chapterIndex: currentLocation.start.index,\n        pageWidth: this.props.currentEpub.rendition._layout.width,\n        pageHeight: this.props.currentEpub.rendition._layout.height,\n      });\n      let chapter = \"Unknown Chapter\";\n      let currentChapter = this.props.flattenChapters.filter(\n        (item: any) => item.href.split(\"#\")[0] === chapterHref\n      )[0];\n      if (currentChapter) {\n        chapter = currentChapter.label.trim(\" \");\n      }\n      this.setState({ chapter });\n      StyleUtil.addDefaultCss();\n      this.props.rendition.themes.default(StyleUtil.getCustomCss(false));\n      tsTransform();\n    });\n\n    this.props.rendition.on(\n      \"selected\",\n      (cfiRange: any, contents: any, event: any) => {\n        var range = contents.range(cfiRange);\n        let rect;\n        if (range) {\n          rect = range.getBoundingClientRect();\n        } else {\n          let doc = getIframeDoc();\n          if (!doc) return;\n          if (!doc.getSelection()) return;\n          rect = doc!.getSelection()!.getRangeAt(0).getBoundingClientRect();\n        }\n\n        this.setState({ rect });\n      }\n    );\n    this.props.rendition.themes.default(StyleUtil.getCustomCss(false));\n    this.props.rendition.display(\n      RecordLocation.getCfi(this.props.currentBook.key) === null\n        ? null\n        : RecordLocation.getCfi(this.props.currentBook.key).cfi\n    );\n  }\n\n  render() {\n    const popupMenuProps = {\n      rendition: this.props.rendition,\n      rect: this.state.rect,\n      pageWidth: this.state.pageWidth,\n      pageHeight: this.state.pageHeight,\n      chapterIndex: this.state.chapterIndex,\n      chapter: this.state.chapter,\n    };\n    const imageViewerProps = {\n      isShow: this.props.isShow,\n      rendition: this.props.rendition,\n      handleEnterReader: this.props.handleEnterReader,\n      handleLeaveReader: this.props.handleLeaveReader,\n    };\n    return (\n      <div className=\"view-area\">\n        <ImageViewer {...imageViewerProps} />\n\n        <PopupMenu {...popupMenuProps} />\n        <>\n          {this.props.isShowBookmark ? <div className=\"bookmark\"></div> : null}\n        </>\n      </div>\n    );\n  }\n}\n\nexport default EpubViewer;\n","import { connect } from \"react-redux\";\nimport { stateType } from \"../../store\";\nimport ViewArea from \"./component\";\nimport {\n  handlePercentage,\n  handleOpenMenu,\n  handleShowBookmark,\n  handleReadingEpub,\n} from \"../../store/actions\";\nimport \"./index.css\";\nimport { withTranslation } from \"react-i18next\";\n\nconst mapStateToProps = (state: stateType) => {\n  return {\n    chapters: state.reader.chapters,\n    currentEpub: state.book.currentEpub,\n    currentBook: state.book.currentBook,\n    locations: state.progressPanel.locations,\n    flattenChapters: state.reader.flattenChapters,\n    bookmarks: state.reader.bookmarks,\n    isShowBookmark: state.viewArea.isShowBookmark,\n  };\n};\nconst actionCreator = {\n  handlePercentage,\n  handleOpenMenu,\n  handleShowBookmark,\n  handleReadingEpub,\n};\n\nexport default connect(\n  mapStateToProps,\n  actionCreator\n)(withTranslation()(ViewArea));\n","import React from \"react\";\nimport \"./background.css\";\nimport { BackgroundProps, BackgroundState } from \"./interface\";\nimport StorageUtil from \"../../utils/serviceUtils/storageUtil\";\nimport { Trans } from \"react-i18next\";\nclass Background extends React.Component<BackgroundProps, BackgroundState> {\n  isFirst: Boolean;\n  constructor(props: any) {\n    super(props);\n    this.state = {\n      isSingle:\n        StorageUtil.getReaderConfig(\"readerMode\") &&\n        StorageUtil.getReaderConfig(\"readerMode\") !== \"double\",\n      currentChapter: \"\",\n      prevPage: 0,\n      nextPage: 0,\n      scale: StorageUtil.getReaderConfig(\"scale\") || 1,\n      isHideFooter: StorageUtil.getReaderConfig(\"isHideFooter\") === \"yes\",\n      isHideHeader: StorageUtil.getReaderConfig(\"isHideHeader\") === \"yes\",\n    };\n    this.isFirst = true;\n  }\n\n  componentWillReceiveProps(nextProps: BackgroundProps) {\n    if (\n      nextProps.currentEpub.rendition &&\n      nextProps.currentEpub.rendition.location &&\n      this.props.currentEpub.rendition\n    ) {\n      const currentLocation =\n        this.props.currentEpub.rendition.currentLocation();\n      if (!currentLocation.start) {\n        return;\n      }\n      this.isFirst && this.props.handleFetchLocations(this.props.currentEpub);\n      this.isFirst = false;\n      this.setState({\n        prevPage: currentLocation.start.displayed.page,\n        nextPage: currentLocation.end.displayed.page,\n      });\n      let chapterHref = currentLocation.start.href;\n\n      let chapter = \"Unknown Chapter\";\n      let currentChapter = this.props.flattenChapters.filter(\n        (item: any) =>\n          item.href.indexOf(chapterHref) > -1 ||\n          chapterHref.indexOf(item.href) > -1\n      )[0];\n      if (currentChapter) {\n        chapter = currentChapter.label.trim(\" \");\n      }\n      this.setState({ currentChapter: chapter });\n    }\n  }\n\n  render() {\n    return (\n      <div\n        className=\"background\"\n        style={{\n          color: StorageUtil.getReaderConfig(\"textColor\")\n            ? StorageUtil.getReaderConfig(\"textColor\")\n            : \"\",\n        }}\n      >\n        <div className=\"header-container\">\n          {!this.state.isHideHeader && this.state.currentChapter && (\n            <p\n              className=\"header-chapter-name\"\n              style={\n                this.state.isSingle\n                  ? {\n                      left: `calc(50vw - \n                      270px)`,\n                    }\n                  : {}\n              }\n            >\n              {this.state.currentChapter}\n            </p>\n          )}\n          {!this.state.isHideHeader && !this.state.isSingle && (\n            <p\n              className=\"header-book-name\"\n              style={\n                this.state.isSingle\n                  ? {\n                      right: `calc(50vw - \n                      270px)`,\n                    }\n                  : {}\n              }\n            >\n              {this.props.currentBook.name}\n            </p>\n          )}\n        </div>\n        <div className=\"footer-container\">\n          {!this.state.isHideFooter && this.state.prevPage > 0 && (\n            <p\n              className=\"background-page-left\"\n              style={\n                this.state.isSingle\n                  ? {\n                      left: `calc(50vw - \n                      270px)`,\n                    }\n                  : {}\n              }\n            >\n              <Trans i18nKey=\"Book Page\" count={this.state.prevPage}>\n                Page\n                {{\n                  count: this.state.prevPage,\n                }}\n              </Trans>\n            </p>\n          )}\n          {!this.state.isHideFooter &&\n            this.state.nextPage > 0 &&\n            !this.state.isSingle && (\n              <p className=\"background-page-right\">\n                <Trans i18nKey=\"Book Page\" count={this.state.nextPage}>\n                  Page\n                  {{\n                    count: this.state.nextPage,\n                  }}\n                </Trans>\n              </p>\n            )}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Background;\n","import { connect } from \"react-redux\";\nimport { stateType } from \"../../store\";\nimport Background from \"./component\";\nimport { handleFetchLocations } from \"../../store/actions\";\n\nconst mapStateToProps = (state: stateType) => {\n  return {\n    currentEpub: state.book.currentEpub,\n    currentBook: state.book.currentBook,\n    flattenChapters: state.reader.flattenChapters,\n    locations: state.progressPanel.locations,\n  };\n};\nconst actionCreator = { handleFetchLocations };\nexport default connect(mapStateToProps, actionCreator)(Background);\n","import React from \"react\";\nimport \"./progressPanel.css\";\nimport RecordLocation from \"../../../utils/readUtils/recordLocation\";\nimport { Trans } from \"react-i18next\";\nimport { ProgressPanelProps, ProgressPanelState } from \"./interface\";\nimport { Tooltip } from \"react-tippy\";\n\nclass ProgressPanel extends React.Component<\n  ProgressPanelProps,\n  ProgressPanelState\n> {\n  constructor(props: ProgressPanelProps) {\n    super(props);\n    this.state = {\n      displayPercentage: this.props.percentage ? this.props.percentage : 0,\n\n      currentPage: 0,\n      totalPage: 0,\n      currentChapterIndex: 0,\n    };\n  }\n\n  componentWillReceiveProps(nextProps: ProgressPanelProps) {\n    if (\n      nextProps.currentEpub.rendition &&\n      nextProps.currentEpub.rendition.location &&\n      this.props.currentEpub.rendition\n    ) {\n      const currentLocation =\n        this.props.currentEpub.rendition.currentLocation();\n      if (!currentLocation.start) {\n        return;\n      }\n      this.setState({\n        currentPage: currentLocation.start.displayed.page,\n        totalPage: currentLocation.start.displayed.total,\n        currentChapterIndex: currentLocation.start.index,\n      });\n    }\n    if (nextProps.currentBook.key) {\n      this.props.handleFetchPercentage(this.props.currentBook);\n    }\n    if (nextProps.percentage) {\n      this.setState({ displayPercentage: nextProps.percentage });\n    }\n  }\n  //WARNING! To be deprecated in React v17. Use componentDidMount instead.\n  onProgressChange = (event: any) => {\n    const percentage = event.target.value / 100;\n    const location = percentage\n      ? this.props.locations.cfiFromPercentage(percentage)\n      : 0;\n    this.props.currentEpub.rendition.display(location);\n  };\n  //使进度百分比随拖动实时变化\n  onProgressInput = (event: any) => {\n    this.setState({ displayPercentage: event.target.value / 100 });\n  };\n  previourChapter = () => {\n    if (!this.props.currentEpub.rendition) {\n      return;\n    }\n    const currentLocation = this.props.currentEpub.rendition.currentLocation();\n    if (!currentLocation.start) return;\n    let chapterIndex = currentLocation.start.index;\n    this.setState({\n      currentChapterIndex: chapterIndex,\n    });\n    const section = this.props.currentEpub.section(chapterIndex - 1);\n    if (section && section.href) {\n      this.props.currentEpub.rendition.display(section.href).then(() => {\n        let percentage = RecordLocation.getCfi(this.props.currentBook.key)\n          .percentage\n          ? RecordLocation.getCfi(this.props.currentBook.key).percentage\n          : 0;\n\n        this.setState({ displayPercentage: percentage });\n      });\n    }\n  };\n  nextChapter = () => {\n    const currentLocation = this.props.currentEpub.rendition.currentLocation();\n    if (!currentLocation.start) return;\n    let chapterIndex = currentLocation.start.index;\n    this.setState({\n      currentChapterIndex: chapterIndex,\n    });\n    const section = this.props.currentEpub.section(chapterIndex + 1);\n    if (section && section.href) {\n      this.props.currentEpub.rendition.display(section.href).then(() => {\n        let percentage = RecordLocation.getCfi(this.props.currentBook.key)\n          .percentage\n          ? RecordLocation.getCfi(this.props.currentBook.key).percentage\n          : 0;\n        this.setState({ displayPercentage: percentage });\n      });\n    }\n  };\n  handleJumpChapter = (event: any) => {\n    if (!event.target.value) return;\n    const section = this.props.currentEpub.section(event.target.value);\n    if (section && section.href) {\n      this.props.currentEpub.rendition.display(section.href).then(() => {\n        let percentage = RecordLocation.getCfi(this.props.currentBook.key)\n          .percentage\n          ? RecordLocation.getCfi(this.props.currentBook.key).percentage\n          : 0;\n        this.setState({ displayPercentage: percentage });\n      });\n    }\n  };\n  handleJumpPage = (event: any) => {};\n  render() {\n    if (!this.props.locations && this.props.currentEpub.rendition) {\n      return <div className=\"progress-panel\">Loading</div>;\n    }\n    return (\n      <div className=\"progress-panel\">\n        <p className=\"progress-text\" style={{ marginTop: 10 }}>\n          <span>\n            <Trans>Progress</Trans>:{\" \"}\n            {Math.round(\n              this.state.displayPercentage > 1\n                ? 100\n                : this.state.displayPercentage * 100\n            )}\n            %&nbsp;&nbsp;&nbsp;\n          </span>\n        </p>\n\n        <p className=\"progress-text\" style={{ marginTop: 0 }}>\n          {this.state.currentPage > 0 ? (\n            <>\n              <Trans>Pages</Trans>\n              <input\n                type=\"text\"\n                name=\"jumpPage\"\n                id=\"jumpPage\"\n                onBlur={(event) => {\n                  this.handleJumpPage(event);\n                }}\n                value={this.state.currentPage}\n              />\n              <span>/ {this.state.totalPage}</span>&nbsp;&nbsp;&nbsp;\n              <Trans>Chapters</Trans>\n              <input\n                type=\"text\"\n                name=\"jumpChapter\"\n                id=\"jumpChapter\"\n                onBlur={(event) => {\n                  this.handleJumpChapter(event);\n                }}\n                defaultValue={this.state.currentChapterIndex}\n              />\n              <span>\n                / {this.props.currentEpub.rendition.book.spine.length}\n              </span>\n            </>\n          ) : null}\n        </p>\n        <div>\n          <input\n            className=\"input-progress\"\n            defaultValue={Math.round(this.state.displayPercentage * 100)}\n            type=\"range\"\n            max=\"100\"\n            min=\"0\"\n            step=\"1\"\n            onMouseUp={(event) => {\n              this.onProgressChange(event);\n            }}\n            onTouchEnd={(event) => {\n              this.onProgressChange(event);\n            }}\n            onChange={(event) => {\n              this.onProgressInput(event);\n            }}\n            style={{ width: 300, left: 50, top: 73 }}\n          />\n        </div>\n\n        <div\n          className=\"previous-chapter\"\n          onClick={() => {\n            this.previourChapter();\n          }}\n        >\n          <Tooltip\n            title={this.props.t(\"Prev Chapter\")}\n            position=\"top\"\n            trigger=\"mouseenter\"\n          >\n            <span className=\"icon-dropdown previous-chapter-icon\"> </span>\n          </Tooltip>\n        </div>\n\n        <div\n          className=\"next-chapter\"\n          onClick={() => {\n            this.nextChapter();\n          }}\n        >\n          <Tooltip\n            title={this.props.t(\"Next Chapter\")}\n            position=\"top\"\n            trigger=\"mouseenter\"\n          >\n            <span className=\"icon-dropdown next-chapter-icon\"></span>\n          </Tooltip>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default ProgressPanel;\n","import { connect } from \"react-redux\";\nimport { stateType } from \"../../../store\";\nimport { withTranslation } from \"react-i18next\";\nimport ProgressPanel from \"./component\";\nimport { handleFetchPercentage } from \"../../../store/actions\";\nconst mapStateToProps = (state: stateType) => {\n  return {\n    currentEpub: state.book.currentEpub,\n    currentBook: state.book.currentBook,\n    percentage: state.progressPanel.percentage,\n    locations: state.progressPanel.locations,\n    flattenChapters: state.reader.flattenChapters,\n  };\n};\nconst actionCreator = { handleFetchPercentage };\nexport default connect(\n  mapStateToProps,\n  actionCreator\n)(withTranslation()(ProgressPanel as any));\n","import i18n from \"i18next\";\nimport { initReactI18next } from \"react-i18next\";\nimport translationEN from \"./assets/locales/en/translation.json\";\nimport translationCN from \"./assets/locales/cn/translation.json\";\nimport translationTW from \"./assets/locales/tw/translation.json\";\nimport translationRU from \"./assets/locales/ru/translation.json\";\nimport translationFR from \"./assets/locales/fr/translation.json\";\nimport translationES from \"./assets/locales/es/translation.json\";\nimport translationFA from \"./assets/locales/fa/translation.json\";\nimport translationPTBR from \"./assets/locales/pt-BR/translation.json\";\n\n// the translations\nconst resources = {\n  en: {\n    translation: translationEN,\n  },\n  zh: {\n    translation: translationCN,\n  },\n  cht: {\n    translation: translationTW,\n  },\n  ru: {\n    translation: translationRU,\n  },\n  es: {\n    translation: translationES,\n  },\n  fr: {\n    translation: translationFR,\n  },\n  fa: {\n    translation: translationFA,\n  },\n  ptBR: {\n    translation: translationPTBR,\n  },\n};\n\ni18n\n  .use(initReactI18next) // passes i18n down to react-i18next\n  .init({\n    resources,\n    lng: \"en\",\n    fallbackLng: \"en\",\n    keySeparator: false, // we do not use keys in form messages.welcome\n    interpolation: {\n      escapeValue: false, // react already safes from xss\n    },\n  });\n\nexport default i18n;\n","const initState = {\n  isOpenEditDialog: false,\n  isOpenDeleteDialog: false,\n  isOpenAddDialog: false,\n  isOpenActionDialog: false,\n  isReading: false,\n  dragItem: \"\",\n  currentBook: {},\n  currentEpub: {},\n  renderFunc: () => {},\n};\nexport function book(\n  state = initState,\n  action: { type: string; payload: any }\n) {\n  switch (action.type) {\n    case \"HANDLE_EDIT_DIALOG\":\n      return {\n        ...state,\n        isOpenEditDialog: action.payload,\n      };\n    case \"HANDLE_DELETE_DIALOG\":\n      return {\n        ...state,\n        isOpenDeleteDialog: action.payload,\n      };\n    case \"HANDLE_RENDER_FUNC\":\n      return {\n        ...state,\n        renderFunc: action.payload,\n      };\n    case \"HANDLE_ADD_DIALOG\":\n      return {\n        ...state,\n        isOpenAddDialog: action.payload,\n      };\n    case \"HANDLE_ACTION_DIALOG\":\n      return {\n        ...state,\n        isOpenActionDialog: action.payload,\n      };\n    case \"HANDLE_READING_STATE\":\n      return {\n        ...state,\n        isReading: action.payload,\n      };\n    case \"HANDLE_READING_BOOK\":\n      return {\n        ...state,\n        currentBook: action.payload,\n      };\n\n    case \"HANDLE_READING_EPUB\":\n      return {\n        ...state,\n        currentEpub: action.payload,\n      };\n    case \"HANDLE_DRAG_ITEM\":\n      return {\n        ...state,\n        dragItem: action.payload,\n      };\n    case \"HANDLE_REDIRECT\":\n      return {\n        ...state,\n        isRedirect: true,\n      };\n    default:\n      return state;\n  }\n}\n","const initState = {\n  books: null,\n  deletedBooks: [],\n  searchResults: [],\n  isSearch: false,\n  isAboutOpen: false,\n  isBookSort: localStorage.getItem(\"bookSortCode\") ? true : false,\n  isNoteSort: false,\n  isSettingOpen: false,\n  viewMode: \"card\",\n  isSortDisplay: false,\n  isShowLoading: false,\n  isNewWarning: false,\n  isTipDialog: false,\n  isShowNew: false,\n  bookSortCode: { sort: 0, order: 1 },\n  noteSortCode: { sort: 2, order: 1 },\n  isSelectBook: false,\n  message: \"Add Successfully\",\n  tip: \"\",\n  selectedBooks: [],\n};\nexport function manager(\n  state = initState,\n  action: { type: string; payload: any }\n) {\n  switch (action.type) {\n    case \"HANDLE_BOOKS\":\n      return {\n        ...state,\n        books: action.payload,\n      };\n    case \"HANDLE_DELETED_BOOKS\":\n      return {\n        ...state,\n        deletedBooks: action.payload,\n      };\n    case \"HANDLE_SEARCH_BOOKS\":\n      return {\n        ...state,\n        searchResults: action.payload,\n      };\n    case \"HANDLE_SELECT_BOOK\":\n      return {\n        ...state,\n        isSelectBook: action.payload,\n      };\n    case \"HANDLE_SELECTED_BOOKS\":\n      return {\n        ...state,\n        selectedBooks: action.payload,\n      };\n    case \"HANDLE_TIP_DIALOG\":\n      return {\n        ...state,\n        isTipDialog: action.payload,\n      };\n    case \"HANDLE_TIP\":\n      return {\n        ...state,\n        tip: action.payload,\n      };\n    case \"HANDLE_SEARCH\":\n      return {\n        ...state,\n        isSearch: action.payload,\n      };\n\n    case \"HANDLE_SETTING\":\n      return {\n        ...state,\n        isSettingOpen: action.payload,\n      };\n    case \"HANDLE_ABOUT\":\n      return {\n        ...state,\n        isAboutOpen: action.payload,\n      };\n    case \"HANDLE_BOOK_SORT\":\n      return {\n        ...state,\n        isBookSort: action.payload,\n      };\n    case \"HANDLE_NOTE_SORT\":\n      return {\n        ...state,\n        isNoteSort: action.payload,\n      };\n\n    case \"HANDLE_VIEW_MODE\":\n      return {\n        ...state,\n        viewMode: action.payload,\n      };\n    case \"HANDLE_SORT_DISPLAY\":\n      return {\n        ...state,\n        isSortDisplay: action.payload,\n      };\n    case \"HANDLE_SHOW_LOADING\":\n      return {\n        ...state,\n        isShowLoading: action.payload,\n      };\n    case \"HANDLE_SHOW_NEW\":\n      return {\n        ...state,\n        isShowNew: action.payload,\n      };\n    case \"HANDLE_NEW_WARNING\":\n      return {\n        ...state,\n        isNewWarning: action.payload,\n      };\n\n    case \"HANDLE_SORT_CODE\":\n      return {\n        ...state,\n        bookSortCode: {\n          sort: action.payload.sort,\n          order: action.payload.order,\n        },\n      };\n    case \"HANDLE_NOTE_SORT_CODE\":\n      return {\n        ...state,\n        noteSortCode: {\n          sort: action.payload.sort,\n          order: action.payload.order,\n        },\n      };\n    case \"HANDLE_NOTES\":\n      return {\n        ...state,\n        notes: action.payload,\n      };\n    case \"HANDLE_BOOKMARKS\":\n      return {\n        ...state,\n        bookmarks: action.payload,\n      };\n\n    default:\n      return state;\n  }\n}\n","const initState = {\n  percentage: null,\n  locations: null,\n};\nexport function progressPanel(\n  state = initState,\n  action: { type: string; payload: any }\n) {\n  switch (action.type) {\n    case \"HANDLE_PERCENTAGE\":\n      return {\n        ...state,\n        percentage: action.payload,\n      };\n\n    case \"HANDLE_SECTION\":\n      return {\n        ...state,\n        section: action.payload,\n      };\n    case \"HANDLE_LOCATIONS\":\n      return {\n        ...state,\n        locations: action.payload,\n      };\n    default:\n      return state;\n  }\n}\n","import StorageUtil from \"../../utils/serviceUtils/storageUtil\";\nconst initState = {\n  bookmarks: [],\n  notes: [],\n  digests: [],\n  chapters: null,\n  currentChapter: \"\",\n  flattenChapters: null,\n\n  color: parseInt(StorageUtil.getReaderConfig(\"highlightIndex\"))\n    ? parseInt(StorageUtil.getReaderConfig(\"highlightIndex\"))\n    : StorageUtil.getReaderConfig(\"appSkin\") === \"night\" ||\n      (StorageUtil.getReaderConfig(\"appSkin\") === \"system\" &&\n        StorageUtil.getReaderConfig(\"isOSNight\") === \"yes\")\n    ? 3\n    : 0,\n  noteKey: \"\",\n  originalText: \"\",\n  htmlBook: null,\n  readerMode: StorageUtil.getReaderConfig(\"readerMode\") || \"double\",\n};\nexport function reader(\n  state = initState,\n  action: { type: string; payload: any }\n) {\n  switch (action.type) {\n    case \"HANDLE_BOOKMARKS\":\n      return {\n        ...state,\n        bookmarks: action.payload,\n      };\n    case \"HANDLE_NOTES\":\n      return {\n        ...state,\n        notes: action.payload,\n      };\n    case \"HANDLE_CURRENT_CHAPTER\":\n      return {\n        ...state,\n        currentChapter: action.payload,\n      };\n    case \"HANDLE_ORIGINAL_TEXT\":\n      return {\n        ...state,\n        originalText: action.payload,\n      };\n    case \"HANDLE_HTML_BOOK\":\n      return {\n        ...state,\n        htmlBook: action.payload,\n      };\n    case \"HANDLE_COLOR\":\n      return {\n        ...state,\n        color: action.payload,\n      };\n\n    case \"HANDLE_NOTE_KEY\":\n      return {\n        ...state,\n        noteKey: action.payload,\n      };\n    case \"HANDLE_DIGESTS\":\n      return {\n        ...state,\n        digests: action.payload,\n      };\n    case \"HANDLE_SECTION\":\n      return {\n        ...state,\n        section: action.payload,\n      };\n    case \"HANDLE_CHAPTERS\":\n      return {\n        ...state,\n        chapters: action.payload,\n      };\n    case \"HANDLE_FLATTEN_CHAPTERS\":\n      return {\n        ...state,\n        flattenChapters: action.payload,\n      };\n    default:\n      return state;\n  }\n}\n","const initState = {\n  selection: null,\n  isOpenMenu: false,\n  menuMode: \"menu\",\n  isChangeDirection: false,\n  isShowBookmark: false,\n};\nexport function viewArea(\n  state = initState,\n  action: { type: string; payload: any }\n) {\n  switch (action.type) {\n    case \"HANDLE_OPEN_MENU\":\n      return {\n        ...state,\n        isOpenMenu: action.payload,\n      };\n    case \"HANDLE_OPEN_HIGHLIGHT\":\n      return {\n        ...state,\n        isOpenHighlight: action.payload,\n      };\n\n    case \"HANDLE_SHOW_BOOKMARK\":\n      return {\n        ...state,\n        isShowBookmark: action.payload,\n      };\n    case \"HANDLE_SELECTION\":\n      return {\n        ...state,\n        selection: action.payload,\n      };\n    case \"HANDLE_DIALOG_LOCATION\":\n      return {\n        ...state,\n        dialogLocation: action.payload,\n      };\n    case \"HANDLE_MENU_MODE\":\n      return {\n        ...state,\n        menuMode: action.payload,\n      };\n    case \"HANDLE_CHANGE_DIRECTION\":\n      return {\n        ...state,\n        isChangeDirection: action.payload,\n      };\n    default:\n      return state;\n  }\n}\n","import StorageUtil from \"../../utils/serviceUtils/storageUtil\";\nconst initState = {\n  mode: \"home\",\n  shelfIndex: -1,\n  isCollapsed: StorageUtil.getReaderConfig(\"isCollapsed\") === \"yes\",\n};\nexport function sidebar(\n  state = initState,\n  action: { type: string; payload: any }\n) {\n  switch (action.type) {\n    case \"HANDLE_MODE\":\n      return {\n        ...state,\n        mode: action.payload,\n      };\n    case \"HANDLE_SHELF_INDEX\":\n      return {\n        ...state,\n        shelfIndex: action.payload,\n      };\n    case \"HANDLE_COLLAPSE\":\n      return {\n        ...state,\n        isCollapsed: action.payload,\n      };\n    default:\n      return state;\n  }\n}\n","const initState = {\n  isBackup: false,\n  isOpenTokenDialog: false,\n};\nexport function backupPage(\n  state = initState,\n  action: { type: string; payload: boolean }\n) {\n  switch (action.type) {\n    case \"HANDLE_BACKUP\":\n      return {\n        ...state,\n        isBackup: action.payload,\n      };\n    case \"HANDLE_TOKEN_DIALOG\":\n      return {\n        ...state,\n        isOpenTokenDialog: action.payload,\n      };\n    default:\n      return state;\n  }\n}\n","import { createStore, applyMiddleware, compose, combineReducers } from \"redux\";\nimport thunk from \"redux-thunk\";\nimport { book } from \"./reducers/book\";\nimport { manager } from \"./reducers/manager\";\nimport { progressPanel } from \"./reducers/progressPanel\";\nimport { reader } from \"./reducers/reader\";\nimport { viewArea } from \"./reducers/viewArea\";\nimport { sidebar } from \"./reducers/sidebar\";\nimport { backupPage } from \"./reducers/backupPage\";\nimport BookModel from \"../model/Book\";\nimport NoteModel from \"../model/Note\";\nimport BookmarkModel from \"../model/Bookmark\";\nimport HtmlBookModel from \"../model/HtmlBook\";\nconst rootReducer = combineReducers({\n  book,\n  manager,\n  reader,\n  progressPanel,\n  viewArea,\n  sidebar,\n  backupPage,\n});\nconst store = createStore(\n  rootReducer,\n  compose(\n    applyMiddleware(thunk),\n    (window as any).devToolsExtension\n      ? (window as any).devToolsExtension()\n      : (f: any) => f\n  )\n);\nexport default store;\nexport type stateType = {\n  manager: {\n    books: BookModel[];\n    deletedBooks: BookModel[];\n    searchResults: number[];\n    isSearch: boolean;\n    isBookSort: boolean;\n    isSettingOpen: boolean;\n    viewMode: string;\n    isSortDisplay: boolean;\n    isAboutOpen: boolean;\n    isShowLoading: boolean;\n    isShowNew: boolean;\n    isNewWarning: boolean;\n    isSelectBook: boolean;\n    selectedBooks: string[];\n    isTipDialog: boolean;\n    bookSortCode: { sort: number; order: number };\n    noteSortCode: { sort: number; order: number };\n    tip: string;\n  };\n  book: {\n    isOpenEditDialog: boolean;\n    isOpenDeleteDialog: boolean;\n    isOpenAddDialog: boolean;\n    isOpenActionDialog: boolean;\n    isReading: boolean;\n    dragItem: string;\n    currentBook: BookModel;\n    currentEpub: any;\n    renderFunc: () => void;\n  };\n  backupPage: {\n    isBackup: boolean;\n    isOpenTokenDialog: boolean;\n  };\n  progressPanel: {\n    percentage: number;\n    locations: any[];\n  };\n  reader: {\n    bookmarks: BookmarkModel[];\n    notes: NoteModel[];\n    digests: NoteModel[];\n    color: number;\n    chapters: any[];\n    flattenChapters: any;\n    noteKey: string;\n    currentChapter: string;\n    originalText: string;\n    htmlBook: HtmlBookModel;\n  };\n  sidebar: {\n    mode: string;\n    shelfIndex: number;\n    isCollapsed: boolean;\n  };\n  viewArea: {\n    selection: string;\n    menuMode: string;\n    isOpenMenu: boolean;\n    isChangeDirection: boolean;\n    isShowBookmark: boolean;\n  };\n};\n","export const sideMenu = [\n  {\n    name: \"Books\",\n    icon: \"home\",\n    mode: \"home\",\n  },\n  {\n    name: \"Favorites\",\n    icon: \"love\",\n    mode: \"favorite\",\n  },\n\n  {\n    name: \"Notes\",\n    icon: \"idea\",\n    mode: \"note\",\n  },\n  {\n    name: \"Highlights\",\n    icon: \"digest\",\n    mode: \"digest\",\n  },\n  {\n    name: \"Deleted Books\",\n    icon: \"trash\",\n    mode: \"trash\",\n  },\n];\n","import React from \"react\";\nimport \"./sidebar.css\";\nimport { sideMenu } from \"../../constants/sideMenu\";\nimport { SidebarProps, SidebarState } from \"./interface\";\nimport { withRouter } from \"react-router-dom\";\nimport StorageUtil from \"../../utils/serviceUtils/storageUtil\";\nimport { Tooltip } from \"react-tippy\";\nimport { openExternalUrl } from \"../../utils/serviceUtils/urlUtil\";\n\nclass Sidebar extends React.Component<SidebarProps, SidebarState> {\n  constructor(props: SidebarProps) {\n    super(props);\n    this.state = {\n      index: 0,\n      hoverIndex: -1,\n      isCollapsed:\n        StorageUtil.getReaderConfig(\"isCollapsed\") === \"yes\" || false,\n    };\n  }\n  componentDidMount() {\n    this.props.handleMode(\n      document.URL.split(\"/\").reverse()[0] === \"empty\"\n        ? \"home\"\n        : document.URL.split(\"/\").reverse()[0]\n    );\n  }\n  handleSidebar = (mode: string, index: number) => {\n    this.setState({ index: index });\n    this.props.handleSelectBook(false);\n    this.props.history.push(`/manager/${mode}`);\n    this.props.handleMode(mode);\n    this.props.handleShelfIndex(-1);\n    this.props.handleSearch(false);\n    this.props.handleSortDisplay(false);\n  };\n  handleHover = (index: number) => {\n    this.setState({ hoverIndex: index });\n  };\n  handleCollapse = (isCollapsed: boolean) => {\n    this.setState({ isCollapsed });\n    this.props.handleCollapse(isCollapsed);\n    StorageUtil.setReaderConfig(\"isCollapsed\", isCollapsed ? \"yes\" : \"no\");\n  };\n  handleJump = (url: string) => {\n    openExternalUrl(url);\n  };\n  render() {\n    const renderSideMenu = () => {\n      return sideMenu.map((item, index) => {\n        return (\n          <li\n            key={item.name}\n            className={\n              this.state.index === index\n                ? \"active side-menu-item\"\n                : \"side-menu-item\"\n            }\n            id={`sidebar-${item.icon}`}\n            onClick={() => {\n              this.handleSidebar(item.mode, index);\n            }}\n            onMouseEnter={() => {\n              this.handleHover(index);\n            }}\n            onMouseLeave={() => {\n              this.handleHover(-1);\n            }}\n            style={this.props.isCollapsed ? { width: 40, marginLeft: 15 } : {}}\n          >\n            {this.state.index === index ? (\n              <div className=\"side-menu-selector-container\"></div>\n            ) : null}\n            {this.state.hoverIndex === index ? (\n              <div className=\"side-menu-hover-container\"></div>\n            ) : null}\n            <div\n              className={\n                this.state.index === index\n                  ? \"side-menu-selector active-selector\"\n                  : \"side-menu-selector \"\n              }\n            >\n              <Tooltip\n                title={this.props.t(item.name)}\n                position=\"top\"\n                trigger=\"mouseenter\"\n              >\n                <div\n                  className=\"side-menu-icon\"\n                  style={this.props.isCollapsed ? {} : { marginLeft: \"38px\" }}\n                >\n                  <span\n                    className={\n                      this.state.index === index\n                        ? `icon-${item.icon}  active-icon`\n                        : `icon-${item.icon}`\n                    }\n                    style={\n                      this.props.isCollapsed ? { marginLeft: \"-25px\" } : {}\n                    }\n                  ></span>\n                </div>\n              </Tooltip>\n              <span style={this.props.isCollapsed ? { display: \"none\" } : {}}>\n                {this.props.t(item.name)}\n              </span>\n            </div>\n          </li>\n        );\n      });\n    };\n    return (\n      <div className=\"sidebar\">\n        <div\n          className=\"sidebar-list-icon\"\n          onClick={() => {\n            this.handleCollapse(!this.state.isCollapsed);\n          }}\n        >\n          <Tooltip\n            title={this.props.t(\n              this.props.isCollapsed ? \"Show sidebar\" : \"Collapse sidebar\"\n            )}\n            position=\"top\"\n            trigger=\"mouseenter\"\n            distance={25}\n          >\n            <span className=\"icon-menu sidebar-list\"></span>\n          </Tooltip>\n        </div>\n\n        <img\n          src={\n            StorageUtil.getReaderConfig(\"appSkin\") === \"night\" ||\n            (StorageUtil.getReaderConfig(\"appSkin\") === \"system\" &&\n              StorageUtil.getReaderConfig(\"isOSNight\") === \"yes\")\n              ? \"./assets/label_light.png\"\n              : \"./assets/label.png\"\n          }\n          alt=\"\"\n          onClick={() => {\n            this.handleJump(\"https://koodo.960960.xyz\");\n          }}\n          className=\"logo\"\n        />\n        <div className=\"side-menu-container-parent\">\n          <ul className=\"side-menu-container\">{renderSideMenu()}</ul>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default withRouter(Sidebar);\n","import {\n  handleMode,\n  handleSearch,\n  handleSortDisplay,\n  handleCollapse,\n  handleSelectBook,\n  handleShelfIndex,\n} from \"../../store/actions\";\nimport { connect } from \"react-redux\";\nimport { stateType } from \"../../store\";\nimport { withTranslation } from \"react-i18next\";\nimport Sidebar from \"./component\";\n\nconst mapStateToProps = (state: stateType) => {\n  return { mode: state.sidebar.mode, isCollapsed: state.sidebar.isCollapsed };\n};\nconst actionCreator = {\n  handleMode,\n  handleSearch,\n  handleSortDisplay,\n  handleCollapse,\n  handleSelectBook,\n  handleShelfIndex,\n};\n\nexport default connect(\n  mapStateToProps,\n  actionCreator\n)(withTranslation()(Sidebar as any));\n","import SparkMD5 from \"spark-md5\";\n\ndeclare var window: any;\nvar pdfjsLib = window[\"pdfjs-dist/build/pdf\"];\nexport const fetchMD5 = (file: any) => {\n  return new Promise<string>((resolve, reject) => {\n    try {\n      if (file.name.indexOf(\".pdf\") > -1) {\n        let fileReader = new FileReader();\n        fileReader.readAsArrayBuffer(file);\n        fileReader.onload = (ev) => {\n          pdfjsLib\n            .getDocument({ data: (ev.target as any).result })\n            .promise.then((pdfDoc: any) => {\n              resolve(pdfDoc._pdfInfo.fingerprint);\n            });\n        };\n      } else {\n        var blobSlice =\n            (File as any).prototype.slice ||\n            (File as any).prototype.mozSlice ||\n            (File as any).prototype.webkitSlice,\n          chunkSize = 2097152, // 以每片2MB大小来逐次读取\n          chunks = Math.ceil(file.size / chunkSize),\n          currentChunk = 0,\n          spark = new SparkMD5(), //创建SparkMD5的实例\n          fileReader = new FileReader();\n        fileReader.onload = async (e) => {\n          if (!e.target) {\n            reject(\"\");\n\n            throw new Error();\n          }\n          spark.appendBinary(e.target.result as any); // append array buffer\n          currentChunk += 1;\n          if (currentChunk < chunks) {\n            loadNext();\n          } else {\n            resolve(spark.end());\n          }\n        };\n\n        const loadNext = () => {\n          var start = currentChunk * chunkSize,\n            end =\n              start + chunkSize >= file.size ? file.size : start + chunkSize;\n\n          fileReader.readAsBinaryString(blobSlice.call(file, start, end));\n        };\n\n        loadNext();\n      }\n    } catch (error) {\n      reject(\"\");\n    }\n  });\n};\n","import BookModel from \"../../model/Book\";\n\ndeclare var window: any;\nexport const addEpub = (\n  file: any,\n  md5: string,\n  filePath: string = \"Unknown Path\"\n) => {\n  return new Promise<BookModel | boolean>((resolve, reject) => {\n    let reader = new FileReader();\n    reader.readAsArrayBuffer(file);\n    reader.onload = async (e) => {\n      if (!e.target) {\n        reject(false);\n        throw new Error();\n      }\n      let cover: any = \"\";\n      let charset: any = \"\";\n\n      const epub = window.ePub(e.target.result);\n      epub.loaded.metadata\n        .then((metadata: any) => {\n          if (!e.target) {\n            reject(false);\n            throw new Error();\n          }\n          epub\n            .coverUrl()\n            .then(async (url: string) => {\n              if (url) {\n                var reader = new FileReader();\n                let blob = await fetch(url).then((r) => r.blob());\n                reader.readAsDataURL(blob);\n                reader.onloadend = async () => {\n                  cover = reader.result;\n                  let key: string,\n                    name: string,\n                    author: string,\n                    description: string,\n                    publisher: string;\n                  [name, author, description, publisher] = [\n                    metadata.title,\n                    metadata.creator,\n                    metadata.description,\n                    metadata.publisher,\n                  ];\n                  let format =\n                    publisher === \"mobi\"\n                      ? \"MOBI\"\n                      : publisher === \"azw3\"\n                      ? \"AZW3\"\n                      : publisher === \"txt\"\n                      ? \"TXT\"\n                      : \"EPUB\";\n                  key = new Date().getTime() + \"\";\n                  let book = new BookModel(\n                    key,\n                    name,\n                    author,\n                    description,\n                    md5,\n                    cover,\n                    format,\n                    publisher,\n                    file.size,\n                    file.path || filePath,\n                    charset\n                  );\n                  resolve(book);\n                };\n              } else {\n                cover = \"\";\n                let key: string,\n                  name: string,\n                  author: string,\n                  publisher: string,\n                  description: string;\n                [name, author, description, publisher] = [\n                  metadata.title,\n                  metadata.creator,\n                  metadata.description,\n                  metadata.publisher,\n                ];\n                let format = \"EPUB\";\n                key = new Date().getTime() + \"\";\n                let book = new BookModel(\n                  key,\n                  name,\n                  author,\n                  description,\n                  md5,\n                  cover,\n                  format,\n                  publisher,\n                  file.size,\n                  file.path || filePath,\n                  charset\n                );\n\n                resolve(book);\n              }\n            })\n            .catch((err: any) => {\n              reject(false);\n            });\n        })\n        .catch(() => {\n          reject(false);\n        });\n    };\n  });\n};\n","export const fetchMD5FromPath = (filePath: string) => {\n  return new Promise<string>((resolve, reject) => {\n    var crypto = window.require(\"crypto\");\n    var fs = window.require(\"fs\");\n\n    var md5sum = crypto.createHash(\"md5\");\n    var s = fs.ReadStream(filePath);\n    s.on(\"data\", function (d) {\n      md5sum.update(d);\n    });\n\n    s.on(\"end\", () => {\n      resolve(md5sum.digest(\"hex\"));\n    });\n    s.on(\"error\", () => {\n      reject(\"\");\n    });\n  });\n};\nexport const fetchFileFromPath = (filePath: string) => {\n  return new Promise<File>((resolve, reject) => {\n    const fs = window.require(\"fs\");\n\n    fs.readFile(filePath, (err, data) => {\n      if (err) {\n        console.error(err);\n        return;\n      }\n      const file = new File(\n        [data],\n        window.navigator.platform.indexOf(\"Win\") > -1\n          ? filePath.split(\"\\\\\").reverse()[0]\n          : filePath.split(\"/\").reverse()[0],\n        {\n          lastModified: new Date().getTime(),\n        }\n      );\n      resolve(file);\n    });\n  });\n};\n","import React from \"react\";\nimport \"./importLocal.css\";\nimport BookModel from \"../../model/Book\";\nimport localforage from \"localforage\";\nimport { fetchMD5 } from \"../../utils/fileUtils/md5Util\";\nimport { addEpub } from \"../../utils/fileUtils/epubUtil\";\nimport { Trans } from \"react-i18next\";\nimport Dropzone from \"react-dropzone\";\nimport { Tooltip } from \"react-tippy\";\nimport { ImportLocalProps, ImportLocalState } from \"./interface\";\nimport RecordRecent from \"../../utils/readUtils/recordRecent\";\nimport { isElectron } from \"react-device-detect\";\nimport { withRouter } from \"react-router-dom\";\nimport BookUtil from \"../../utils/fileUtils/bookUtil\";\nimport {\n  fetchFileFromPath,\n  fetchMD5FromPath,\n} from \"../../utils/fileUtils/fileUtil\";\nimport toast from \"react-hot-toast\";\nimport StorageUtil from \"../../utils/serviceUtils/storageUtil\";\ndeclare var window: any;\nlet clickFilePath = \"\";\n\nclass ImportLocal extends React.Component<ImportLocalProps, ImportLocalState> {\n  constructor(props: ImportLocalProps) {\n    super(props);\n    this.state = {\n      isOpenFile: false,\n      width: document.body.clientWidth,\n    };\n  }\n  componentDidMount() {\n    if (isElectron) {\n      const { ipcRenderer } = window.require(\"electron\");\n      if (!localStorage.getItem(\"storageLocation\")) {\n        localStorage.setItem(\n          \"storageLocation\",\n          ipcRenderer.sendSync(\"storage-location\", \"ping\")\n        );\n      }\n\n      const filePath = ipcRenderer.sendSync(\"get-file-data\");\n      if (filePath && filePath !== \".\") {\n        this.handleFilePath(filePath);\n      }\n      window.addEventListener(\n        \"focus\",\n        (event) => {\n          const _filePath = ipcRenderer.sendSync(\"get-file-data\");\n          if (_filePath && _filePath !== \".\") {\n            this.handleFilePath(_filePath);\n          }\n        },\n        false\n      );\n    }\n    window.addEventListener(\"resize\", () => {\n      this.setState({ width: document.body.clientWidth });\n    });\n  }\n  handleFilePath = async (filePath: string) => {\n    clickFilePath = filePath;\n    let md5 = await fetchMD5FromPath(filePath);\n    if ([...(this.props.books || []), ...this.props.deletedBooks].length > 0) {\n      let isRepeat = false;\n      let repeatBook: BookModel | null = null;\n      [...(this.props.books || []), ...this.props.deletedBooks].forEach(\n        (item) => {\n          if (item.md5 === md5) {\n            isRepeat = true;\n            repeatBook = item;\n          }\n        }\n      );\n      if (isRepeat && repeatBook) {\n        this.handleJump(repeatBook);\n        return;\n      }\n    }\n    const fileTemp = await fetchFileFromPath(filePath);\n\n    this.setState({ isOpenFile: true }, async () => {\n      await this.getMd5WithBrowser(fileTemp);\n    });\n  };\n  handleJump = (book: BookModel) => {\n    if (StorageUtil.getReaderConfig(\"isOpenInMain\") === \"yes\") {\n      this.props.history.push(BookUtil.getBookUrl(book));\n      this.props.handleReadingBook(book);\n    } else {\n      localStorage.setItem(\"tempBook\", JSON.stringify(book));\n      BookUtil.RedirectBook(book);\n      this.props.history.push(\"/manager/home\");\n    }\n  };\n  handleAddBook = (book: BookModel, buffer: ArrayBuffer) => {\n    return new Promise<void>((resolve, reject) => {\n      if (this.state.isOpenFile) {\n        StorageUtil.getReaderConfig(\"isImportPath\") !== \"yes\" &&\n          StorageUtil.getReaderConfig(\"isPreventAdd\") !== \"yes\" &&\n          BookUtil.addBook(book.key, buffer);\n        if (StorageUtil.getReaderConfig(\"isPreventAdd\") === \"yes\") {\n          this.handleJump(book);\n          if (\n            StorageUtil.getReaderConfig(\"isOpenInMain\") === \"yes\" &&\n            this.state.isOpenFile\n          ) {\n            this.setState({ isOpenFile: false });\n          }\n\n          resolve();\n          return;\n        }\n      } else {\n        StorageUtil.getReaderConfig(\"isImportPath\") !== \"yes\" &&\n          BookUtil.addBook(book.key, buffer);\n      }\n\n      let bookArr = [...(this.props.books || []), ...this.props.deletedBooks];\n      if (bookArr == null) {\n        bookArr = [];\n      }\n      bookArr.push(book);\n      this.props.handleReadingBook(book);\n      RecordRecent.setRecent(book.key);\n      localforage\n        .setItem(\"books\", bookArr)\n        .then(() => {\n          this.props.handleFetchBooks();\n\n          toast.success(this.props.t(\"Add Successfully\"));\n          setTimeout(() => {\n            this.state.isOpenFile && this.handleJump(book);\n            if (\n              StorageUtil.getReaderConfig(\"isOpenInMain\") === \"yes\" &&\n              this.state.isOpenFile\n            ) {\n              this.setState({ isOpenFile: false });\n              return;\n            }\n            this.setState({ isOpenFile: false });\n            this.props.history.push(\"/manager/home\");\n          }, 100);\n          resolve();\n        })\n        .catch(() => {\n          reject();\n        });\n    });\n  };\n\n  //获取书籍md5\n  getMd5WithBrowser = async (file: any) => {\n    return new Promise<void>(async (resolve, reject) => {\n      const md5 = await fetchMD5(file);\n      if (!md5) {\n        toast.error(this.props.t(\"Import Failed\"));\n        reject();\n      } else {\n        await this.handleBook(file, md5);\n        resolve();\n      }\n    });\n  };\n\n  handleBook = (file: any, md5: string) => {\n    let extension = file.name.split(\".\").reverse()[0];\n    let bookName = file.name.substr(0, file.name.length - extension.length - 1);\n    let result: BookModel | Boolean;\n    return new Promise<void>((resolve, reject) => {\n      //md5重复不导入\n      let isRepeat = false;\n      if (\n        [...(this.props.books || []), ...this.props.deletedBooks].length > 0\n      ) {\n        [...(this.props.books || []), ...this.props.deletedBooks].forEach(\n          (item) => {\n            if (item.md5 === md5) {\n              isRepeat = true;\n              toast.error(this.props.t(\"Duplicate Book\"));\n              resolve();\n            }\n          }\n        );\n      }\n      //解析图书，获取图书数据\n      if (!isRepeat) {\n        let reader = new FileReader();\n        reader.readAsArrayBuffer(file);\n\n        reader.onload = async (e) => {\n          if (!e.target) {\n            toast.error(this.props.t(\"Import Failed\"));\n            reject();\n            throw new Error();\n          }\n          if (\n            extension === \"pdf\" ||\n            extension === \"azw3\" ||\n            extension === \"mobi\" ||\n            extension === \"txt\" ||\n            extension === \"djvu\" ||\n            extension === \"docx\" ||\n            extension === \"md\" ||\n            extension === \"cbz\" ||\n            extension === \"tml\" ||\n            extension === \"html\" ||\n            extension === \"xml\" ||\n            extension === \"xhtml\" ||\n            extension === \"cbr\" ||\n            extension === \"cbt\" ||\n            extension === \"rtf\" ||\n            extension === \"fb2\"\n          ) {\n            let reader = new FileReader();\n            reader.onload = async (event) => {\n              const file_content = (event.target as any).result;\n              result = await BookUtil.generateBook(\n                bookName,\n                extension,\n                md5,\n                file.size,\n                file.path || clickFilePath,\n                file_content\n              );\n              clickFilePath = \"\";\n              if (!result) {\n                toast.error(\n                  this.props.t(\n                    \"You may see this error when the book you're importing is not supported by Koodo Reader, try converting it with Calibre\"\n                  )\n                );\n                reject();\n                return;\n              }\n              await this.handleAddBook(\n                result as BookModel,\n                file_content as ArrayBuffer\n              );\n\n              resolve();\n            };\n            reader.readAsArrayBuffer(file);\n          } else {\n            result = await addEpub(file, md5, clickFilePath);\n            clickFilePath = \"\";\n            if (!result) {\n              toast.error(this.props.t(\"Import Failed\"));\n              reject();\n              throw new Error();\n            } else {\n              await this.handleAddBook(\n                result as BookModel,\n                e.target?.result as ArrayBuffer\n              );\n\n              resolve();\n            }\n          }\n        };\n      }\n    });\n  };\n\n  render() {\n    return (\n      <Dropzone\n        onDrop={async (acceptedFiles) => {\n          this.props.handleDrag(false);\n          for (let item of acceptedFiles) {\n            await this.getMd5WithBrowser(item);\n          }\n        }}\n        accept={[\n          \".epub\",\n          \".pdf\",\n          \".txt\",\n          \".mobi\",\n          \".azw3\",\n          \".djvu\",\n          \".htm\",\n          \".html\",\n          \".xml\",\n          \".xhtml\",\n          \".docx\",\n          \".rtf\",\n          \".md\",\n          \".fb2\",\n          \".cbz\",\n          \".cbt\",\n          \".cbr\",\n        ]}\n        multiple={true}\n      >\n        {({ getRootProps, getInputProps }) => (\n          <div\n            className=\"import-from-local\"\n            {...getRootProps()}\n            style={\n              this.props.isCollapsed && document.body.clientWidth < 950\n                ? { width: \"42px\" }\n                : {}\n            }\n          >\n            <div className=\"animation-mask-local\"></div>\n            {this.props.isCollapsed && this.state.width < 950 ? (\n              <Tooltip\n                title={this.props.t(\"Import\")}\n                position=\"top\"\n                style={{ height: \"20px\" }}\n                trigger=\"mouseenter\"\n              >\n                <span\n                  className=\"icon-folder\"\n                  style={{ fontSize: \"15px\", fontWeight: 500 }}\n                ></span>\n              </Tooltip>\n            ) : (\n              <span>\n                <Trans>Import</Trans>\n              </span>\n            )}\n\n            <input\n              type=\"file\"\n              id=\"import-book-box\"\n              className=\"import-book-box\"\n              name=\"file\"\n              {...getInputProps()}\n            />\n          </div>\n        )}\n      </Dropzone>\n    );\n  }\n}\n\nexport default withRouter(ImportLocal);\n","import \"./importLocal.css\";\nimport { connect } from \"react-redux\";\nimport { handleFetchBooks, handleLoadingDialog } from \"../../store/actions\";\nimport { handleReadingBook } from \"../../store/actions\";\nimport { stateType } from \"../../store\";\nimport { withTranslation } from \"react-i18next\";\nimport ImportLocal from \"./component\";\n\nconst mapStateToProps = (state: stateType) => {\n  return {\n    books: state.manager.books,\n    notes: state.reader.notes,\n    bookmarks: state.reader.bookmarks,\n    isCollapsed: state.sidebar.isCollapsed,\n    deletedBooks: state.manager.deletedBooks,\n  };\n};\nconst actionCreator = {\n  handleFetchBooks,\n  handleReadingBook,\n  handleLoadingDialog,\n};\nexport default connect(\n  mapStateToProps,\n  actionCreator\n)(withTranslation()(ImportLocal as any));\n","import React from \"react\";\nimport \"./updateInfo.css\";\nimport { UpdateInfoProps, UpdateInfoState } from \"./interface\";\nimport { version } from \"../../../../package.json\";\nimport { Trans } from \"react-i18next\";\nimport axios from \"axios\";\nimport Lottie from \"react-lottie\";\nimport animationNew from \"../../../assets/lotties/new.json\";\nimport animationSuccess from \"../../../assets/lotties/success.json\";\nimport StorageUtil from \"../../../utils/serviceUtils/storageUtil\";\nimport { isElectron } from \"react-device-detect\";\nconst newOptions = {\n  loop: false,\n  autoplay: true,\n  animationData: animationNew,\n  rendererSettings: {\n    preserveAspectRatio: \"xMidYMid slice\",\n  },\n};\nconst successOptions = {\n  loop: false,\n  autoplay: true,\n  animationData: animationSuccess,\n  rendererSettings: {\n    preserveAspectRatio: \"xMidYMid slice\",\n  },\n};\ndeclare var window: any;\n\nclass UpdateInfo extends React.Component<UpdateInfoProps, UpdateInfoState> {\n  constructor(props: UpdateInfoProps) {\n    super(props);\n    this.state = {\n      updateLog: \"\",\n      isUpdated: false,\n    };\n  }\n  componentDidMount() {\n    !this.props.currentBook.key &&\n      axios\n        .get(`https://koodo.960960.xyz/api/update?name=${navigator.language}`)\n        .then((res) => {\n          const newVersion = res.data.log.version;\n          console.log(\n            res,\n            version,\n            newVersion,\n            version.localeCompare(newVersion)\n          );\n\n          setTimeout(() => {\n            if (version.localeCompare(newVersion) < 0) {\n              if (StorageUtil.getReaderConfig(\"isDisableUpdate\") !== \"yes\") {\n                this.setState({ updateLog: res.data.log });\n                this.props.handleNewDialog(true);\n              } else {\n                this.props.handleNewWarning(true);\n              }\n            } else if (\n              StorageUtil.getReaderConfig(\"version\") !== newVersion &&\n              StorageUtil.getReaderConfig(\"isFirst\")\n            ) {\n              this.setState({ isUpdated: true });\n              this.props.handleNewDialog(true);\n              StorageUtil.setReaderConfig(\"version\", newVersion);\n            }\n          }, 500);\n        })\n        .catch((err) => {\n          console.log(err);\n        });\n  }\n  renderList = (arr: any[]) => {\n    return arr.map((item, index) => {\n      return (\n        <li className=\"update-dialog-list\" key={index}>\n          <span>{index + 1 + \". \"}</span>\n          <span>{item}</span>\n        </li>\n      );\n    });\n  };\n  handleJump = () => {\n    isElectron &&\n      window\n        .require(\"electron\")\n        .shell.openExternal(\n          this.state.isUpdated\n            ? \"https://koodo.960960.xyz/en/log\"\n            : \"https://koodo.960960.xyz/en\"\n        );\n  };\n  handleClose = () => {\n    this.setState({ updateLog: \"\", isUpdated: false });\n    this.props.handleNewDialog(false);\n  };\n\n  render() {\n    return (\n      <>\n        {(this.state.updateLog || this.state.isUpdated) &&\n          this.props.isShowNew && (\n            <div\n              className=\"new-version\"\n              style={\n                this.state.isUpdated\n                  ? { height: \"240px\", top: \"calc(50vh - 120px)\" }\n                  : {}\n              }\n            >\n              <div className=\"new-version-title\">\n                {this.state.isUpdated ? (\n                  <Trans>Update Complete</Trans>\n                ) : (\n                  <>\n                    <Trans>Update to</Trans>\n                    {\" \" + this.state.updateLog.version}\n                  </>\n                )}\n              </div>\n              <div\n                className=\"setting-close-container\"\n                onClick={() => {\n                  this.handleClose();\n                }}\n              >\n                <span className=\"icon-close setting-close\"></span>\n              </div>\n              {this.state.isUpdated && (\n                <div className=\"update-info-text\">\n                  <Trans>You successfully update to</Trans>\n                  {\" \" + version}\n                </div>\n              )}\n              <div className=\"update-dialog-info\" style={{ height: 420 }}>\n                <div className=\"new-version-animation\">\n                  {this.state.isUpdated ? (\n                    <Lottie\n                      options={successOptions}\n                      height={80}\n                      width={80}\n                      style={{ marginTop: \"10px\", marginBottom: \"10px\" }}\n                    />\n                  ) : (\n                    <Lottie options={newOptions} height={220} width={220} />\n                  )}\n                </div>\n                <div\n                  className=\"new-version-open\"\n                  onClick={() => {\n                    this.handleJump();\n                  }}\n                  style={this.state.isUpdated ? { marginTop: \"10px\" } : {}}\n                >\n                  {this.state.isUpdated ? (\n                    <>\n                      <Trans>Changelog</Trans>\n                    </>\n                  ) : (\n                    <Trans>Download</Trans>\n                  )}\n                </div>\n                {this.state.updateLog && (\n                  <>\n                    <p className=\"update-dialog-new-title\">\n                      <Trans>What's New</Trans>\n                    </p>\n                    <ul className=\"update-dialog-new-container\">\n                      {this.renderList(this.state.updateLog.new)}\n                    </ul>\n                    <p className=\"update-dialog-fix-title\">\n                      <Trans>What's been fixed</Trans>\n                    </p>\n                    <ul className=\"update-dialog-fix-container\">\n                      {this.renderList(this.state.updateLog.fix)}\n                    </ul>\n                  </>\n                )}\n              </div>\n            </div>\n          )}\n      </>\n    );\n  }\n}\n\nexport default UpdateInfo;\n","import { connect } from \"react-redux\";\nimport { handleNewDialog, handleNewWarning } from \"../../../store/actions\";\nimport UpdateInfo from \"./component\";\nimport { withTranslation } from \"react-i18next\";\nimport { stateType } from \"../../../store\";\n\nconst mapStateToProps = (state: stateType) => {\n  return {\n    currentBook: state.book.currentBook,\n    books: state.manager.books,\n    isShowNew: state.manager.isShowNew,\n  };\n};\nconst actionCreator = {\n  handleNewDialog,\n  handleNewWarning,\n};\nexport default connect(\n  mapStateToProps,\n  actionCreator\n)(withTranslation()(UpdateInfo as any));\n","import { unzipBook, unzipConfig } from \"./common\";\n\nexport const restore = (file: File, isSync = false) => {\n  return new Promise<boolean>(async (resolve, reject) => {\n    let result = await unzipConfig(file);\n    if (result) {\n      if (isSync) {\n        resolve(true);\n      } else {\n        let res = await unzipBook(file);\n        if (res) {\n          resolve(true);\n        } else {\n          resolve(false);\n        }\n      }\n    } else {\n      resolve(false);\n    }\n  });\n};\n","import BookModel from \"../../model/Book\";\nimport NoteModel from \"../../model/Note\";\nimport BookmarkModel from \"../../model/Bookmark\";\nimport { zipBook, zipConfig } from \"./common\";\n\nlet JSZip = (window as any).JSZip;\n\nexport const backup = (\n  bookArr: BookModel[],\n  notes: NoteModel[],\n  bookmarks: BookmarkModel[],\n  isSync: boolean\n) => {\n  return new Promise<Blob | boolean>(async (resolve, reject) => {\n    let zip = new JSZip();\n    let books = bookArr;\n    //0表示备份到本地，1表示备份到dropbox,2表示备份到onedrive,3表示备份到webdav，4表示把indexeddb中的数据转移到uploads文件夹中，5表示同步数据到本地\n    let result = await zipConfig(zip, books, notes, bookmarks);\n    if (!result) resolve(false);\n    if (!isSync) {\n      await zipBook(zip, books);\n    }\n    zip\n      .generateAsync({ type: \"blob\" })\n      .then((blob: any) => {\n        resolve(blob);\n      })\n      .catch((err: any) => {\n        console.log(err);\n        resolve(false);\n      });\n  });\n};\n","import React from \"react\";\nimport \"./header.css\";\nimport SearchBox from \"../../components/searchBox\";\nimport ImportLocal from \"../../components/importLocal\";\nimport { Trans } from \"react-i18next\";\nimport { HeaderProps, HeaderState } from \"./interface\";\nimport StorageUtil from \"../../utils/serviceUtils/storageUtil\";\nimport UpdateInfo from \"../../components/dialogs/updateInfo\";\nimport { restore } from \"../../utils/syncUtils/restoreUtil\";\nimport { backup } from \"../../utils/syncUtils/backupUtil\";\nimport { Tooltip } from \"react-tippy\";\nimport { isElectron } from \"react-device-detect\";\nimport { syncData } from \"../../utils/syncUtils/common\";\nimport toast from \"react-hot-toast\";\nclass Header extends React.Component<HeaderProps, HeaderState> {\n  constructor(props: HeaderProps) {\n    super(props);\n\n    this.state = {\n      isOnlyLocal: false,\n      language: StorageUtil.getReaderConfig(\"lang\"),\n      isNewVersion: false,\n      width: document.body.clientWidth,\n      isdataChange: false,\n    };\n  }\n  componentDidMount() {\n    if (isElectron) {\n      const fs = window.require(\"fs\");\n      const path = window.require(\"path\");\n      const { ipcRenderer } = window.require(\"electron\");\n      const dirPath = ipcRenderer.sendSync(\"user-data\", \"ping\");\n      if (!fs.existsSync(dirPath)) {\n        fs.mkdirSync(dirPath);\n        fs.mkdirSync(path.join(dirPath, \"data\"));\n        fs.mkdirSync(path.join(dirPath, \"data\", \"book\"));\n        console.log(\"文件夹创建成功\");\n      } else {\n        console.log(\"文件夹已存在\");\n      }\n\n      if (\n        StorageUtil.getReaderConfig(\"storageLocation\") &&\n        !localStorage.getItem(\"storageLocation\")\n      ) {\n        localStorage.setItem(\n          \"storageLocation\",\n          StorageUtil.getReaderConfig(\"storageLocation\")\n        );\n      }\n\n      //Check for data update\n      let storageLocation = localStorage.getItem(\"storageLocation\")\n        ? localStorage.getItem(\"storageLocation\")\n        : window\n            .require(\"electron\")\n            .ipcRenderer.sendSync(\"storage-location\", \"ping\");\n      let sourcePath = path.join(\n        storageLocation,\n        \"config\",\n        \"readerConfig.json\"\n      );\n      //Detect data modification\n      fs.readFile(sourcePath, \"utf8\", (err, data) => {\n        if (err) {\n          console.error(err);\n          return;\n        }\n        const readerConfig = JSON.parse(data);\n        if (\n          localStorage.getItem(\"lastSyncTime\") &&\n          parseInt(readerConfig.lastSyncTime) >\n            parseInt(localStorage.getItem(\"lastSyncTime\")!)\n        ) {\n          this.setState({ isdataChange: true });\n        }\n      });\n    }\n\n    window.addEventListener(\"resize\", () => {\n      this.setState({ width: document.body.clientWidth });\n    });\n    window.addEventListener(\"focus\", () => {\n      this.props.handleFetchBooks();\n      this.props.handleFetchNotes();\n      this.props.handleFetchBookmarks();\n    });\n  }\n\n  syncFromLocation = async () => {\n    const fs = window.require(\"fs\");\n    const path = window.require(\"path\");\n    const { zip } = window.require(\"zip-a-folder\");\n    let storageLocation = localStorage.getItem(\"storageLocation\")\n      ? localStorage.getItem(\"storageLocation\")\n      : window\n          .require(\"electron\")\n          .ipcRenderer.sendSync(\"storage-location\", \"ping\");\n    let sourcePath = path.join(storageLocation, \"config\");\n    let outPath = path.join(storageLocation, \"config.zip\");\n    await zip(sourcePath, outPath);\n\n    var data = fs.readFileSync(outPath);\n\n    let blobTemp = new Blob([data], { type: \"application/epub+zip\" });\n    let fileTemp = new File([blobTemp], \"config.zip\", {\n      lastModified: new Date().getTime(),\n      type: blobTemp.type,\n    });\n    let result = await restore(fileTemp, true);\n    if (result) {\n      this.setState({ isdataChange: false });\n      //Check for data update\n      let storageLocation = localStorage.getItem(\"storageLocation\")\n        ? localStorage.getItem(\"storageLocation\")\n        : window\n            .require(\"electron\")\n            .ipcRenderer.sendSync(\"storage-location\", \"ping\");\n      let sourcePath = path.join(\n        storageLocation,\n        \"config\",\n        \"readerConfig.json\"\n      );\n\n      fs.readFile(sourcePath, \"utf8\", (err, data) => {\n        if (err) {\n          console.error(err);\n          return;\n        }\n        const readerConfig = JSON.parse(data);\n        if (localStorage.getItem(\"lastSyncTime\") && readerConfig.lastSyncTime) {\n          localStorage.setItem(\"lastSyncTime\", readerConfig.lastSyncTime);\n        }\n      });\n    }\n    if (!result) {\n      toast.error(this.props.t(\"Sync Failed\"));\n    } else {\n      toast.success(this.props.t(\"Sync Successfully\"));\n    }\n  };\n  handleSync = () => {\n    if (StorageUtil.getReaderConfig(\"isFirst\") !== \"no\") {\n      this.props.handleTipDialog(true);\n      this.props.handleTip(\n        \"You need to manually change the storage location to the same sync folder on different computers. When you click the sync button, Koodo Reader will automatically upload or download the data from this folder according the timestamp.\"\n      );\n      StorageUtil.setReaderConfig(\"isFirst\", \"no\");\n      return;\n    }\n    const fs = window.require(\"fs\");\n    const path = window.require(\"path\");\n    let storageLocation = localStorage.getItem(\"storageLocation\")\n      ? localStorage.getItem(\"storageLocation\")\n      : window\n          .require(\"electron\")\n          .ipcRenderer.sendSync(\"storage-location\", \"ping\");\n    let sourcePath = path.join(storageLocation, \"config\", \"readerConfig.json\");\n    fs.readFile(sourcePath, \"utf8\", async (err, data) => {\n      if (err || !data) {\n        this.syncToLocation();\n      }\n      const readerConfig = JSON.parse(data);\n\n      if (\n        readerConfig &&\n        localStorage.getItem(\"lastSyncTime\") &&\n        parseInt(readerConfig.lastSyncTime) >\n          parseInt(localStorage.getItem(\"lastSyncTime\")!)\n      ) {\n        this.syncFromLocation();\n      } else {\n        //否则就把Koodo中数据同步到同步文件夹\n        this.syncToLocation();\n      }\n    });\n  };\n  syncToLocation = async () => {\n    let timestamp = new Date().getTime().toString();\n    StorageUtil.setReaderConfig(\"lastSyncTime\", timestamp);\n    localStorage.setItem(\"lastSyncTime\", timestamp);\n    let result = await backup(\n      this.props.books,\n      this.props.notes,\n      this.props.bookmarks,\n      true\n    );\n    if (!result) {\n      toast.error(this.props.t(\"Sync Failed\"));\n    } else {\n      syncData(result as Blob, this.props.books, true);\n      toast.success(this.props.t(\"Sync Successfully\"));\n    }\n  };\n\n  render() {\n    return (\n      <div className=\"header\">\n        <div className=\"header-search-container\">\n          <SearchBox />\n        </div>\n\n        <>\n          <div\n            className=\"setting-icon-container\"\n            onClick={() => {\n              this.props.handleSortDisplay(!this.props.isSortDisplay);\n            }}\n            onMouseLeave={() => {\n              this.props.handleSortDisplay(false);\n            }}\n            style={{ left: \"490px\", top: \"18px\" }}\n          >\n            <Tooltip\n              title={this.props.t(\"Sort by\")}\n              position=\"top\"\n              trigger=\"mouseenter\"\n              distance={20}\n            >\n              <span className=\"icon-sort-desc header-sort-icon\"></span>\n            </Tooltip>\n          </div>\n          <div\n            className=\"setting-icon-container\"\n            onClick={() => {\n              this.props.handleAbout(!this.props.isAboutOpen);\n            }}\n            onMouseLeave={() => {\n              this.props.handleAbout(false);\n            }}\n          >\n            <Tooltip\n              title={this.props.t(\"Setting\")}\n              position=\"top\"\n              trigger=\"mouseenter\"\n            >\n              <span\n                className=\"icon-setting setting-icon\"\n                style={\n                  this.props.isNewWarning ? { color: \"rgb(35, 170, 242)\" } : {}\n                }\n              ></span>\n            </Tooltip>\n          </div>\n          {isElectron && (\n            <div\n              className=\"setting-icon-container\"\n              onClick={() => {\n                // this.syncFromLocation();\n                this.handleSync();\n              }}\n              style={{ left: \"635px\" }}\n            >\n              <Tooltip\n                title={this.props.t(\n                  this.state.isdataChange\n                    ? \"Data change detected, whether to update?\"\n                    : \"Sync\"\n                )}\n                position=\"top\"\n                trigger=\"mouseenter\"\n              >\n                <span\n                  className=\"icon-sync setting-icon\"\n                  style={\n                    this.state.isdataChange\n                      ? { color: \"rgb(35, 170, 242)\" }\n                      : {}\n                  }\n                ></span>\n              </Tooltip>\n            </div>\n          )}\n        </>\n\n        <div\n          className=\"import-from-cloud\"\n          onClick={() => {\n            this.props.handleBackupDialog(true);\n          }}\n          style={\n            this.props.isCollapsed && document.body.clientWidth < 950\n              ? { width: \"42px\" }\n              : {}\n          }\n        >\n          <div className=\"animation-mask\"></div>\n          {this.props.isCollapsed && this.state.width < 950 ? (\n            <Tooltip\n              title={this.props.t(\"Backup\")}\n              position=\"top\"\n              trigger=\"mouseenter\"\n            >\n              <span\n                className=\"icon-share\"\n                style={{ fontSize: \"15px\", fontWeight: 600 }}\n              ></span>\n            </Tooltip>\n          ) : (\n            <Trans>Backup</Trans>\n          )}\n        </div>\n        <ImportLocal\n          {...{\n            handleDrag: this.props.handleDrag,\n          }}\n        />\n        {isElectron && <UpdateInfo />}\n      </div>\n    );\n  }\n}\n\nexport default Header;\n","import { connect } from \"react-redux\";\nimport { withTranslation } from \"react-i18next\";\nimport {\n  handleSortDisplay,\n  handleSetting,\n  handleAbout,\n  handleTipDialog,\n  handleTip,\n  handleBackupDialog,\n  handleFetchBooks,\n  handleFetchNotes,\n  handleFetchBookmarks,\n} from \"../../store/actions\";\nimport { stateType } from \"../../store\";\nimport Header from \"./component\";\n\nconst mapStateToProps = (state: stateType) => {\n  return {\n    isSearch: state.manager.isSearch,\n    isAboutOpen: state.manager.isAboutOpen,\n    bookmarks: state.reader.bookmarks,\n    books: state.manager.books,\n    isNewWarning: state.manager.isNewWarning,\n    notes: state.reader.notes,\n    isCollapsed: state.sidebar.isCollapsed,\n\n    isSortDisplay: state.manager.isSortDisplay,\n  };\n};\nconst actionCreator = {\n  handleSortDisplay,\n  handleBackupDialog,\n  handleSetting,\n  handleAbout,\n  handleTipDialog,\n  handleTip,\n  handleFetchBooks,\n  handleFetchNotes,\n  handleFetchBookmarks,\n};\nexport default connect(\n  mapStateToProps,\n  actionCreator\n)(withTranslation()(Header as any));\n","import BookModel from \"../../model/Book\";\nimport NoteModel from \"../../model/Note\";\nimport BookmarkModel from \"../../model/Bookmark\";\nclass DeleteUtil {\n  static deleteBook(books: BookModel[], bookKey: string) {\n    books = books.filter((item) => item.key !== bookKey);\n    return books;\n  }\n  static deleteBookmarks(bookmarks: BookmarkModel[], bookKey: string) {\n    bookmarks = bookmarks.filter((item) => item.bookKey !== bookKey);\n    return bookmarks;\n  }\n  static deleteNotes(notes: NoteModel[], bookKey: string) {\n    notes = notes.filter((item) => item.bookKey !== bookKey);\n    return notes;\n  }\n}\n\nexport default DeleteUtil;\n","const defaultShelf = {\n  New: null,\n  Study: [],\n  Work: [],\n  Entertainment: [],\n};\nclass ShelfUtil {\n  static setShelf(shelfTitle: string, bookKey: string) {\n    let json = localStorage.getItem(\"shelfList\");\n    let obj = JSON.parse(json!) || defaultShelf;\n    if (obj[shelfTitle] === undefined) {\n      obj[shelfTitle] = [];\n    }\n    if (obj[shelfTitle].indexOf(bookKey) === -1) {\n      obj[shelfTitle].unshift(bookKey);\n    }\n    localStorage.setItem(\"shelfList\", JSON.stringify(obj));\n  }\n\n  static getShelf() {\n    let json = localStorage.getItem(\"shelfList\");\n    let obj = JSON.parse(json!) || defaultShelf;\n    return obj;\n  }\n  static clearShelf(shelfIndex: number, bookKey: string) {\n    let json = localStorage.getItem(\"shelfList\");\n    let obj = JSON.parse(json!) || defaultShelf;\n    let shelfTitle = Object.keys(obj);\n    let currentShelfTitle = shelfTitle[shelfIndex];\n    let index = obj[currentShelfTitle].indexOf(bookKey);\n    obj[currentShelfTitle].splice(index, 1);\n    localStorage.setItem(\"shelfList\", JSON.stringify(obj));\n  }\n  static deletefromAllShelf(bookKey: string) {\n    let json = localStorage.getItem(\"shelfList\");\n    let obj = JSON.parse(json!) || defaultShelf;\n    let shelfTitle = Object.keys(obj);\n    shelfTitle.splice(0, 1);\n    shelfTitle.forEach((item) => {\n      let index = obj[item].indexOf(bookKey);\n      if (index > -1) {\n        obj[item].splice(index, 1);\n      }\n    });\n    localStorage.setItem(\"shelfList\", JSON.stringify(obj));\n  }\n  static removeShelf(shelfTitle: string) {\n    let json = localStorage.getItem(\"shelfList\");\n    let obj = JSON.parse(json!) || defaultShelf;\n    delete obj[shelfTitle];\n    localStorage.setItem(\"shelfList\", JSON.stringify(obj));\n  }\n  static getBookPosition(bookKey: string) {\n    let json = localStorage.getItem(\"shelfList\");\n    let obj = JSON.parse(json!) || defaultShelf;\n    let shelfList: string[] = [];\n    for (let item in obj) {\n      if (obj[item] && obj[item].indexOf(bookKey) > -1) {\n        shelfList.push(item);\n      }\n    }\n    return shelfList;\n  }\n}\n\nexport default ShelfUtil;\n","import BookModel from \"../../model/Book\";\nclass AddFavorite {\n  static setFavorite(bookKey: string) {\n    let bookArr =\n      localStorage.getItem(\"favoriteBooks\") !== \"{}\" &&\n      localStorage.getItem(\"favoriteBooks\")\n        ? JSON.parse(localStorage.getItem(\"favoriteBooks\") || \"\")\n        : [];\n    const index = bookArr.indexOf(bookKey);\n    if (index > -1) {\n      bookArr.splice(index, 1);\n      bookArr.unshift(bookKey);\n    } else {\n      bookArr.unshift(bookKey);\n    }\n\n    localStorage.setItem(\"favoriteBooks\", JSON.stringify(bookArr));\n  }\n  static setAllFavorite(books: BookModel[]) {\n    let bookArr: string[] = [];\n    books.forEach((item) => {\n      bookArr.push(item.key);\n    });\n    localStorage.setItem(\"favoriteBooks\", JSON.stringify(bookArr));\n  }\n  static clear(bookKey: string) {\n    let bookArr =\n      localStorage.getItem(\"favoriteBooks\") !== \"{}\" &&\n      localStorage.getItem(\"favoriteBooks\")\n        ? JSON.parse(localStorage.getItem(\"favoriteBooks\") || \"\")\n        : [];\n    const index = bookArr.indexOf(bookKey);\n    if (index > -1) {\n      bookArr.splice(index, 1);\n    }\n    localStorage.setItem(\"favoriteBooks\", JSON.stringify(bookArr));\n  }\n  static getAllFavorite() {\n    let bookArr =\n      localStorage.getItem(\"favoriteBooks\") !== \"{}\" &&\n      localStorage.getItem(\"favoriteBooks\")\n        ? JSON.parse(localStorage.getItem(\"favoriteBooks\") || \"\")\n        : [];\n    return bookArr || [];\n  }\n}\n\nexport default AddFavorite;\n","import React from \"react\";\nimport \"./deleteDialog.css\";\nimport DeleteUtil from \"../../../utils/readUtils/deleteUtil\";\nimport localforage from \"localforage\";\nimport ShelfUtil from \"../../../utils/readUtils/shelfUtil\";\nimport RecordRecent from \"../../../utils/readUtils/recordRecent\";\nimport RecordLocation from \"../../../utils/readUtils/recordLocation\";\nimport AddFavorite from \"../../../utils/readUtils/addFavorite\";\nimport { Trans } from \"react-i18next\";\nimport { DeleteDialogProps } from \"./interface\";\nimport { withRouter } from \"react-router-dom\";\nimport AddTrash from \"../../../utils/readUtils/addTrash\";\nimport BookUtil from \"../../../utils/fileUtils/bookUtil\";\nimport toast from \"react-hot-toast\";\nclass DeleteDialog extends React.Component<DeleteDialogProps> {\n  handleCancel = () => {\n    this.props.handleDeleteDialog(false);\n  };\n  handleDeleteOther = (key: string) => {\n    return new Promise<void>(async (resolve, reject) => {\n      if (this.props.bookmarks[0]) {\n        let bookmarkArr = DeleteUtil.deleteBookmarks(this.props.bookmarks, key);\n        if (bookmarkArr.length === 0) {\n          await localforage.removeItem(\"bookmarks\");\n        } else {\n          await localforage.setItem(\"bookmarks\", bookmarkArr);\n        }\n      }\n      if (this.props.notes) {\n        let noteArr = DeleteUtil.deleteNotes(this.props.notes, key);\n        if (noteArr.length === 0) {\n          await localforage.removeItem(\"notes\");\n          resolve();\n        } else {\n          await localforage.setItem(\"notes\", noteArr);\n          resolve();\n        }\n      }\n    });\n  };\n  handleComfirm = async () => {\n    //从列表删除和从图书库删除判断\n    if (this.props.mode === \"shelf\") {\n      if (this.props.isSelectBook) {\n        this.props.selectedBooks.forEach((item) => {\n          ShelfUtil.clearShelf(this.props.shelfIndex, item);\n        });\n        this.props.handleSelectedBooks([]);\n        this.props.handleFetchBooks(false);\n        this.props.handleSelectBook(!this.props.isSelectBook);\n        this.props.handleDeleteDialog(false);\n        toast.success(this.props.t(\"Delete Successfully\"));\n        return;\n      }\n      ShelfUtil.clearShelf(this.props.shelfIndex, this.props.currentBook.key);\n    } else if (this.props.mode === \"trash\") {\n      let keyArr = AddTrash.getAllTrash();\n      for (let i = 0; i < keyArr.length; i++) {\n        await this.deleteBook(keyArr[i]);\n      }\n\n      if (this.props.books.length === 1) {\n        this.props.history.push(\"/manager/empty\");\n      }\n      this.props.handleFetchBooks(false);\n      this.props.handleFetchBooks(true);\n      this.props.handleFetchBookmarks();\n      this.props.handleFetchNotes();\n    } else if (this.props.isSelectBook) {\n      this.props.selectedBooks.forEach((item) => {\n        AddTrash.setTrash(item);\n        //从喜爱的图书中删除\n        AddFavorite.clear(item);\n      });\n      this.props.handleSelectedBooks([]);\n      this.props.handleFetchBooks(false);\n      this.props.handleSelectBook(!this.props.isSelectBook);\n    } else {\n      AddTrash.setTrash(this.props.currentBook.key);\n      //从喜爱的图书中删除\n      AddFavorite.clear(this.props.currentBook.key);\n      this.props.handleFetchBooks(false);\n    }\n\n    this.props.handleDeleteDialog(false);\n    toast.success(this.props.t(\"Delete Successfully\"));\n  };\n  deleteBook = (key: string) => {\n    return new Promise<void>((resolve, reject) => {\n      this.props.books &&\n        localforage\n          .setItem(\"books\", DeleteUtil.deleteBook(this.props.books, key))\n          .then(async () => {\n            await BookUtil.deleteBook(key);\n            //从喜爱的图书中删除\n            AddFavorite.clear(key);\n            //从回收的图书中删除\n            AddTrash.clear(key);\n            //从书架删除\n            ShelfUtil.deletefromAllShelf(key);\n            //从阅读记录删除\n            RecordRecent.clear(key);\n            //删除阅读历史\n            RecordLocation.clear(key);\n            //删除书签，笔记，书摘，高亮\n            await this.handleDeleteOther(key);\n            resolve();\n          })\n          .catch(() => {\n            reject();\n          });\n    });\n  };\n  render() {\n    return (\n      <div className=\"delete-dialog-container\">\n        {this.props.mode === \"shelf\" ? (\n          <div className=\"delete-dialog-title\">\n            <Trans>Delete from Shelf</Trans>\n          </div>\n        ) : this.props.mode === \"trash\" ? (\n          <div className=\"delete-dialog-title\">\n            <Trans>Delete All Books</Trans>\n          </div>\n        ) : (\n          <div className=\"delete-dialog-title\">\n            <Trans>Delete This Book</Trans>\n          </div>\n        )}\n        {this.props.mode === \"trash\" ? null : (\n          <div className=\"delete-dialog-book\">\n            <div className=\"delete-dialog-book-title\">\n              {this.props.isSelectBook ? (\n                <Trans\n                  i18nKey=\"Total books\"\n                  count={this.props.selectedBooks.length}\n                >\n                  {\"Total \" + this.props.selectedBooks.length + \" books\"}\n                </Trans>\n              ) : (\n                this.props.currentBook.name\n              )}\n            </div>\n          </div>\n        )}\n\n        {this.props.mode === \"shelf\" ? (\n          <div className=\"delete-dialog-other-option\">\n            <Trans>This action won't delete the original book</Trans>\n          </div>\n        ) : this.props.mode === \"trash\" ? (\n          <div className=\"delete-dialog-other-option\" style={{ top: \"80px\" }}>\n            <Trans>\n              This action will remove all the books in recycle bin,together with\n              their notes, bookmarks and digests\n            </Trans>\n          </div>\n        ) : (\n          <div className=\"delete-dialog-other-option\">\n            <Trans>\n              {\n                \"This action will move this book and its the notes, bookmarks and highlights of this book to the recycle bin\"\n              }\n            </Trans>\n          </div>\n        )}\n        <div\n          className=\"delete-dialog-cancel\"\n          onClick={() => {\n            this.handleCancel();\n          }}\n        >\n          <Trans>Cancel</Trans>\n        </div>\n        <div\n          className=\"delete-dialog-comfirm\"\n          onClick={() => {\n            this.handleComfirm();\n          }}\n        >\n          <Trans>Delete</Trans>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default withRouter(DeleteDialog);\n","import { connect } from \"react-redux\";\nimport {\n  handleFetchBooks,\n  handleDeleteDialog,\n  handleActionDialog,\n  handleFetchBookmarks,\n  handleFetchNotes,\n  handleSelectedBooks,\n  handleSelectBook,\n} from \"../../../store/actions\";\nimport { stateType } from \"../../../store\";\nimport DeleteDialog from \"./component\";\nimport { withTranslation } from \"react-i18next\";\n\nconst mapStateToProps = (state: stateType) => {\n  return {\n    books: state.manager.books,\n    selectedBooks: state.manager.selectedBooks,\n    isSelectBook: state.manager.isSelectBook,\n    isOpenDeleteDialog: state.book.isOpenDeleteDialog,\n    currentBook: state.book.currentBook,\n    bookmarks: state.reader.bookmarks,\n    notes: state.reader.notes,\n    digests: state.reader.digests,\n    mode: state.sidebar.mode,\n    shelfIndex: state.sidebar.shelfIndex,\n  };\n};\nconst actionCreator = {\n  handleFetchBooks,\n  handleDeleteDialog,\n  handleFetchBookmarks,\n  handleFetchNotes,\n  handleActionDialog,\n  handleSelectedBooks,\n  handleSelectBook,\n};\nexport default connect(\n  mapStateToProps,\n  actionCreator\n)(withTranslation()(DeleteDialog));\n","import React from \"react\";\nimport \"./editDialog.css\";\nimport localforage from \"localforage\";\nimport { Trans } from \"react-i18next\";\nimport { EditDialogProps, EditDialogState } from \"./interface\";\nimport toast from \"react-hot-toast\";\nclass EditDialog extends React.Component<EditDialogProps, EditDialogState> {\n  constructor(props: EditDialogProps) {\n    super(props);\n    this.state = { isCheck: false };\n  }\n  componentDidMount() {\n    const nameBox: HTMLInputElement = document.querySelector(\n      \".edit-dialog-book-name-box\"\n    ) as HTMLInputElement;\n    const authorBox: HTMLInputElement = document.querySelector(\n      \".edit-dialog-book-author-box\"\n    ) as HTMLInputElement;\n    nameBox.value = this.props.currentBook.name;\n    authorBox.value = this.props.currentBook.author;\n  }\n\n  handleCancel = () => {\n    this.props.handleEditDialog(false);\n  };\n  handleComfirm = () => {\n    const nameBox: HTMLInputElement = document.querySelector(\n      \".edit-dialog-book-name-box\"\n    ) as HTMLInputElement;\n    let name = nameBox.value;\n    const authorBox: HTMLInputElement = document.querySelector(\n      \".edit-dialog-book-author-box\"\n    ) as HTMLInputElement;\n    let author = authorBox.value;\n    let { books } = this.props;\n    books.forEach((item) => {\n      if (item.key === this.props.currentBook.key) {\n        item.name = name;\n        item.author = author;\n        return false;\n      }\n    });\n    localforage.setItem(\"books\", books).then(() => {\n      this.props.handleEditDialog(false);\n      this.props.handleFetchBooks();\n    });\n    toast.success(this.props.t(\"Edit Successfully\"));\n    this.props.handleActionDialog(false);\n  };\n  render() {\n    return (\n      <div className=\"edit-dialog-container\">\n        <div className=\"edit-dialog-title\">\n          <Trans>Edit Book</Trans>\n        </div>\n        <div className=\"edit-dialog-book-name-container\">\n          <div className=\"edit-dialog-book-name-text\">\n            <Trans>Book Name</Trans>\n          </div>\n          <input className=\"edit-dialog-book-name-box\" />\n        </div>\n        <div className=\"edit-dialog-book-author-container\">\n          <div className=\"edit-dialog-book-author-text\">\n            <Trans>Author</Trans>\n          </div>\n          <input className=\"edit-dialog-book-author-box\" />\n        </div>\n        <div\n          className=\"edit-dialog-cancel\"\n          onClick={() => {\n            this.handleCancel();\n          }}\n        >\n          <Trans>Cancel</Trans>\n        </div>\n        <div\n          className=\"edit-dialog-comfirm\"\n          onClick={() => {\n            this.handleComfirm();\n          }}\n        >\n          <Trans>Confirm</Trans>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default EditDialog;\n","import { connect } from \"react-redux\";\nimport \"./editDialog.css\";\nimport { handleFetchBooks } from \"../../../store/actions\";\nimport { handleEditDialog, handleActionDialog } from \"../../../store/actions\";\nimport { stateType } from \"../../../store\";\nimport EditDialog from \"./component\";\nimport { withTranslation } from \"react-i18next\";\n\nconst mapStateToProps = (state: stateType) => {\n  return {\n    books: state.manager.books,\n    isOpenDeleteDialog: state.book.isOpenDeleteDialog,\n    currentBook: state.book.currentBook,\n    bookmarks: state.reader.bookmarks,\n    notes: state.reader.notes,\n    digests: state.reader.digests,\n  };\n};\nconst actionCreator = {\n  handleFetchBooks,\n  handleEditDialog,\n  handleActionDialog,\n};\nexport default connect(\n  mapStateToProps,\n  actionCreator\n)(withTranslation()(EditDialog));\n","import React, { Component } from \"react\";\nimport ShelfUtil from \"../../../utils/readUtils/shelfUtil\";\nimport { Trans } from \"react-i18next\";\nimport { AddDialogProps, AddDialogState } from \"./interface\";\nimport \"./addDialog.css\";\nimport toast from \"react-hot-toast\";\n\nclass AddDialog extends Component<AddDialogProps, AddDialogState> {\n  constructor(props: AddDialogProps) {\n    super(props);\n    this.state = { isNew: true, shelfTitle: \"\" };\n  }\n\n  handleCancel = () => {\n    this.props.handleAddDialog(false);\n  };\n  handleComfirm = () => {\n    const inputElement: HTMLInputElement = document.querySelector(\n      \".add-dialog-new-shelf-box\"\n    ) as HTMLInputElement;\n    if (!isNaN(parseInt(inputElement.value))) {\n      toast(this.props.t(\"Shelf title can't be pure number\"));\n      return;\n    }\n    let shelfTitle: string = this.state.shelfTitle;\n    let shelfList = ShelfUtil.getShelf();\n    let shelfTitles = Object.keys(ShelfUtil.getShelf());\n    let shelfIndex = this.state.isNew\n      ? shelfTitles.length\n      : shelfTitles.indexOf(inputElement.value);\n    if (this.state.isNew) {\n      shelfTitle = inputElement.value;\n      if (shelfList.hasOwnProperty(shelfTitle)) {\n        toast(this.props.t(\"Duplicate Shelf\"));\n        return;\n      }\n    }\n    //未填书架名提醒\n    if (!shelfTitle) {\n      toast(this.props.t(\"Shelf Title is Empty\"));\n      return;\n    }\n    //判断书架中是否已有该图书\n    if (\n      shelfList[`${shelfTitle}`] &&\n      shelfList[`${shelfTitle}`].indexOf(this.props.currentBook.key) > -1\n    ) {\n      toast(this.props.t(\"Duplicate Book\"));\n      return;\n    }\n    if (this.props.isSelectBook) {\n      this.props.selectedBooks.forEach((item) => {\n        ShelfUtil.setShelf(shelfTitle, item);\n      });\n      this.props.handleSelectBook(!this.props.isSelectBook);\n      if (this.props.isSelectBook) {\n        this.props.handleSelectedBooks([]);\n      }\n    } else {\n      ShelfUtil.setShelf(shelfTitle, this.props.currentBook.key);\n    }\n\n    this.props.handleAddDialog(false);\n    toast.success(this.props.t(\"Add Successfully\"));\n    this.props.handleActionDialog(false);\n    this.props.handleMode(\"shelf\");\n    this.props.handleShelfIndex(shelfIndex);\n  };\n  //如果是添加到已存在的书架就diable新建图书的input框\n  handleChange = (shelfTitle: string) => {\n    if (shelfTitle === \"New\") {\n      this.setState({ isNew: true });\n    } else {\n      this.setState({ shelfTitle });\n      this.setState({ isNew: false });\n    }\n  };\n  render() {\n    const renderShelfList = () => {\n      let shelfList = ShelfUtil.getShelf();\n      let shelfTitle = Object.keys(shelfList);\n      return shelfTitle.map((item) => {\n        return (\n          <option\n            value={item}\n            key={item}\n            className=\"add-dialog-shelf-list-option\"\n          >\n            {this.props.t(item)}\n          </option>\n        );\n      });\n    };\n    return (\n      <div className=\"add-dialog-container\">\n        <div className=\"add-dialog-title\">\n          <Trans>Add to Shelf</Trans>\n        </div>\n        <div className=\"add-dialog-shelf-list-container\">\n          <div className=\"add-dialog-shelf-list-text\">\n            <Trans>Select</Trans>\n          </div>\n          <select\n            className=\"add-dialog-shelf-list-box\"\n            onChange={(event: React.ChangeEvent<HTMLSelectElement>) => {\n              this.handleChange(event.target.value);\n            }}\n          >\n            {renderShelfList()}\n          </select>\n        </div>\n        <div className=\"add-dialog-new-shelf-container\">\n          <div className=\"add-dialog-new-shelf-text\">\n            <Trans>New Shelf</Trans>\n          </div>\n          <input\n            className=\"add-dialog-new-shelf-box\"\n            disabled={!this.state.isNew}\n          />\n        </div>\n        <div\n          className=\"add-dialog-cancel\"\n          onClick={() => {\n            this.handleCancel();\n          }}\n        >\n          <Trans>Cancel</Trans>\n        </div>\n        <div\n          className=\"add-dialog-comfirm\"\n          onClick={() => {\n            this.handleComfirm();\n          }}\n        >\n          <Trans>Confirm</Trans>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default AddDialog;\n","import { connect } from \"react-redux\";\nimport {\n  handleAddDialog,\n  handleActionDialog,\n  handleMode,\n  handleShelfIndex,handleSelectBook,\n  handleSelectedBooks,\n} from \"../../../store/actions\";\nimport { stateType } from \"../../../store\";\nimport { withTranslation } from \"react-i18next\";\nimport AddDialog from \"./component\";\n\nconst mapStateToProps = (state: stateType) => {\n  return {\n    books: state.manager.books,\n    selectedBooks: state.manager.selectedBooks,\n    isSelectBook: state.manager.isSelectBook,\n    isOpenDeleteDialog: state.book.isOpenDeleteDialog,\n    currentBook: state.book.currentBook,\n    bookmarks: state.reader.bookmarks,\n    notes: state.reader.notes,\n    digests: state.reader.digests,\n  };\n};\nconst actionCreator = {\n  handleAddDialog,\n  handleActionDialog,handleSelectBook,\n  handleMode,\n  handleShelfIndex,\n  handleSelectedBooks,\n};\nexport default connect(\n  mapStateToProps,\n  actionCreator\n)(withTranslation()(AddDialog as any));\n","//排序弹窗\nimport React from \"react\";\nimport \"./sortDialog.css\";\nimport SortUtil from \"../../../utils/readUtils/sortUtil\";\nimport { Trans } from \"react-i18next\";\nimport { SortDialogProps, SortDialogState } from \"./interface\";\n\nclass SortDialog extends React.Component<SortDialogProps, SortDialogState> {\n  constructor(props: SortDialogProps) {\n    super(props);\n    this.state = {\n      isNote: this.props.mode === \"note\" || this.props.mode === \"digest\",\n    };\n  }\n\n  handleSort = (code: number) => {\n    if (this.state.isNote) {\n      let noteSortCode = this.props.noteSortCode;\n      noteSortCode.sort = code;\n      this.props.handleNoteSortCode(noteSortCode);\n      this.props.handleNoteSort(true);\n      SortUtil.setNoteSortCode(code, this.props.noteSortCode.order);\n    } else {\n      let bookSortCode = this.props.bookSortCode;\n      bookSortCode.sort = code;\n      this.props.handleBookSortCode(bookSortCode);\n      this.props.handleBookSort(true);\n      SortUtil.setBookSortCode(code, this.props.bookSortCode.order);\n    }\n  };\n  handleOrder = (code: number) => {\n    if (this.state.isNote) {\n      let noteSortCode = this.props.noteSortCode;\n      noteSortCode.order = code;\n      this.props.handleNoteSort(true);\n      SortUtil.setNoteSortCode(this.props.noteSortCode.sort, code);\n      this.props.handleNoteSortCode(noteSortCode);\n    } else {\n      let bookSortCode = this.props.bookSortCode;\n      bookSortCode.order = code;\n      this.props.handleBookSort(true);\n      SortUtil.setBookSortCode(this.props.bookSortCode.sort, code);\n      this.props.handleBookSortCode(bookSortCode);\n    }\n  };\n\n  render() {\n    let sortCode = this.state.isNote\n      ? this.props.noteSortCode\n      : this.props.bookSortCode;\n    return (\n      <div\n        className=\"sort-dialog-container\"\n        onMouseLeave={() => {\n          this.props.handleSortDisplay(false);\n        }}\n        onMouseEnter={() => {\n          this.props.handleSortDisplay(true);\n        }}\n        style={this.state.isNote ? { height: \"150px\" } : {}}\n      >\n        {this.state.isNote ? (\n          <ul className=\"sort-by-category\">\n            {[\"Sort by Name\", \"Sort by Date\"].map((item, index) => {\n              return (\n                <li\n                  className=\"sort-by-category-list\"\n                  onClick={() => {\n                    this.handleSort(index + 1);\n                  }}\n                  style={sortCode.sort === index + 1 ? {} : { opacity: 0.34 }}\n                >\n                  <Trans>{item}</Trans>\n                  {sortCode.sort === index + 1 && (\n                    <span\n                      className=\"icon-check\"\n                      style={{ fontWeight: \"bold\" }}\n                    ></span>\n                  )}\n                </li>\n              );\n            })}\n          </ul>\n        ) : (\n          <ul className=\"sort-by-category\">\n            {[\n              \"Sort by Recent\",\n              \"Sort by Name\",\n              \"Sort by Date\",\n              \"Sort by Duration\",\n              \"Sort by Author\",\n              \"Sort by Percentage\",\n            ].map((item, index) => {\n              return (\n                <li\n                  className=\"sort-by-category-list\"\n                  onClick={() => {\n                    this.handleSort(index);\n                  }}\n                  style={sortCode.sort === index ? {} : { opacity: 0.34 }}\n                  key={index}\n                >\n                  <Trans>{item}</Trans>\n                  {sortCode.sort === index && (\n                    <span\n                      className=\"icon-check\"\n                      style={{ fontWeight: \"bold\" }}\n                    ></span>\n                  )}\n                </li>\n              );\n            })}\n          </ul>\n        )}\n        <div className=\"sort-dialog-seperator\"></div>\n        <ul className=\"sort-by-order\">\n          <li\n            className=\"sort-by-order-list\"\n            onClick={() => {\n              this.handleOrder(1);\n            }}\n            style={sortCode.order === 1 ? {} : { opacity: 0.34 }}\n          >\n            <Trans>Ascend</Trans>\n            {sortCode.order === 1 && (\n              <span\n                className=\"icon-check\"\n                style={{ fontWeight: \"bold\" }}\n              ></span>\n            )}\n          </li>\n          <li\n            className=\"sort-by-order-list\"\n            onClick={() => {\n              this.handleOrder(2);\n            }}\n            style={sortCode.order === 2 ? {} : { opacity: 0.34 }}\n          >\n            <Trans>Descend</Trans>\n            {sortCode.order === 2 && (\n              <span\n                className=\"icon-check\"\n                style={{ fontWeight: \"bold\" }}\n              ></span>\n            )}\n          </li>\n        </ul>\n      </div>\n    );\n  }\n}\n\nexport default SortDialog;\n","import { connect } from \"react-redux\";\nimport {\n  handleBookSortCode,\n  handleNoteSortCode,\n  handleSortDisplay,\n  handleBookSort,\n  handleNoteSort,\n} from \"../../../store/actions\";\nimport { stateType } from \"../../../store\";\nimport SortDialog from \"./component\";\n\nconst mapStateToProps = (state: stateType) => {\n  return {\n    bookSortCode: state.manager.bookSortCode,\n    noteSortCode: state.manager.noteSortCode,\n    mode: state.sidebar.mode,\n    isSortDisplay: state.manager.isSortDisplay,\n  };\n};\nconst actionCreator = {\n  handleBookSortCode,\n  handleSortDisplay,\n  handleNoteSortCode,\n  handleBookSort,\n  handleNoteSort,\n};\nexport default connect(mapStateToProps, actionCreator)(SortDialog);\n","import React from \"react\";\nimport { Trans } from \"react-i18next\";\nimport { AboutDialogProps, AboutDialogState } from \"./interface\";\nimport { isElectron } from \"react-device-detect\";\nimport { openExternalUrl } from \"../../../utils/serviceUtils/urlUtil\";\n\nclass AboutDialog extends React.Component<AboutDialogProps, AboutDialogState> {\n  constructor(props: AboutDialogProps) {\n    super(props);\n    this.state = {};\n  }\n  handleJump = (url: string) => {\n    openExternalUrl(url);\n    this.props.handleAbout(false);\n  };\n\n  render() {\n    return (\n      <div\n        className=\"sort-dialog-container\"\n        onMouseLeave={() => {\n          this.props.handleAbout(false);\n        }}\n        onMouseEnter={() => {\n          this.props.handleAbout(true);\n        }}\n        style={\n          this.props.isNewWarning\n            ? { left: \"510px\", width: \"150px\" }\n            : {\n                left: \"510px\",\n\n                width: \"150px\",\n              }\n        }\n      >\n        <ul className=\"sort-by-category\">\n          <li\n            className=\"sort-by-category-list\"\n            onClick={() => {\n              this.props.handleSetting(true);\n              this.props.handleAbout(false);\n            }}\n          >\n            <Trans>Setting</Trans>\n          </li>\n\n          <li\n            className=\"sort-by-category-list\"\n            onClick={() => {\n              if (navigator.language.indexOf(\"zh\") > -1) {\n                this.handleJump(\n                  \"https://troyeguo.notion.site/Koodo-Reader-0c9c7ccdc5104a54825dfc72f1c84bea\"\n                );\n              } else {\n                this.handleJump(\n                  \"https://troyeguo.notion.site/Koodo-Reader-Document-9c767af3d66c459db996bdd08a34c34b\"\n                );\n              }\n            }}\n          >\n            <Trans>Help</Trans>\n          </li>\n          <li\n            className=\"sort-by-category-list\"\n            onClick={() => {\n              this.handleJump(`https://koodo.960960.xyz/en/support`);\n            }}\n          >\n            <Trans>Feedback</Trans>\n          </li>\n          <li\n            className=\"sort-by-category-list\"\n            onClick={() => {\n              if (navigator.language.indexOf(\"zh\") > -1) {\n                this.handleJump(\n                  \"https://www.notion.so/troyeguo/215baeda57804fd29dbb0e91d1e6a021?v=360c00183d944b598668f34c255edfd7\"\n                );\n              } else {\n                this.handleJump(\n                  \"https://www.notion.so/troyeguo/d1c19a132932465bae1d89dd963c92ea?v=ca8aa69cf25849c18c92b92ba868663b\"\n                );\n              }\n            }}\n          >\n            <Trans>Roadmap</Trans>\n          </li>\n          <li\n            className=\"sort-by-category-list\"\n            onClick={() => {\n              this.handleJump(\"https://koodo.960960.xyz\");\n            }}\n          >\n            <Trans>Our Website</Trans>\n          </li>\n          <li\n            className=\"sort-by-category-list\"\n            onClick={() => {\n              this.handleJump(\"https://github.com/troyeguo/koodo-reader\");\n            }}\n          >\n            <Trans>Github Repo</Trans>\n          </li>\n          {isElectron && (\n            <li\n              className=\"sort-by-category-list\"\n              onClick={() => {\n                window\n                  .require(\"electron\")\n                  .ipcRenderer.invoke(\"open-console\", \"ping\");\n              }}\n            >\n              <Trans>Open Console</Trans>\n            </li>\n          )}\n          {this.props.isNewWarning && (\n            <li\n              className=\"sort-by-category-list\"\n              onClick={() => {\n                this.handleJump(\"https://koodo.960960.xyz/en\");\n              }}\n              style={{ color: \"rgb(35, 170, 242)\" }}\n            >\n              <Trans>New Version</Trans>\n            </li>\n          )}\n        </ul>\n      </div>\n    );\n  }\n}\n\nexport default AboutDialog;\n","import { connect } from \"react-redux\";\nimport { handleSetting, handleAbout } from \"../../../store/actions\";\nimport { stateType } from \"../../../store\";\nimport AboutDialog from \"./component\";\n\nconst mapStateToProps = (state: stateType) => {\n  return {\n    isSettingOpen: state.manager.isSettingOpen,\n    isAboutOpen: state.manager.isAboutOpen,\n    isNewWarning: state.manager.isNewWarning,\n  };\n};\nconst actionCreator = {\n  handleSetting,\n  handleAbout,\n};\nexport default connect(mapStateToProps, actionCreator)(AboutDialog);\n","export const config = {\n  callback_url:\n    process.env.NODE_ENV === \"production\"\n      ? \"https://reader.960960.xyz\"\n      : \"http://localhost:3000\",\n  token_url:\n    process.env.NODE_ENV === \"production\"\n      ? \"http://localhost:3366\"\n      : \"http://localhost:3366\",\n  dropbox_client_id: \"vnc67byrssocvy1\",\n  googledrive_client_id:\n    \"99440516227-ifr1ann33f2j610i3ri17ej0i51c7m6e.apps.googleusercontent.com\",\n  onedrive_client_id: \"ac96f9bf-94f2-49c0-8418-999b919bc236\",\n};\nexport const driveList = [\n  {\n    id: 1,\n    name: \"Local\",\n    icon: \"local\",\n    url: \"\",\n  },\n  {\n    id: 2,\n    name: \"Dropbox\",\n    icon: \"dropbox\",\n    url: `https://www.dropbox.com/oauth2/authorize?response_type=token&client_id=${config.dropbox_client_id}&redirect_uri=${config.callback_url}`,\n  },\n\n  {\n    id: 3,\n    name: \"Google Drive\",\n    icon: \"googledrive\",\n    url: \"\",\n  },\n  // {\n  //   id: 4,\n  //   name: \"OneDrive\",\n  //   icon: \"onedrive\",\n  //   url: `https://login.microsoftonline.com/common/oauth2/v2.0/authorize?client_id=${config.onedrive_client_id}&scope=files.readwrite offline_access&response_type=code&redirect_uri=${config.callback_url}`,\n  // },\n  {\n    id: 5,\n    name: \"WebDav\",\n    icon: \"webdav\",\n    url: \"\",\n  },\n];\n","import { restore } from \"./restoreUtil\";\nimport StorageUtil from \"../serviceUtils/storageUtil\";\n\nvar Dropbox = (window as any).Dropbox;\n\nclass DropboxUtil {\n  static UploadFile(blob: any) {\n    return new Promise<boolean>((resolve, reject) => {\n      var ACCESS_TOKEN = StorageUtil.getReaderConfig(\"dropbox_token\") || \"\";\n      var dbx = new Dropbox.Dropbox({ accessToken: ACCESS_TOKEN });\n      const file = new File([blob], \"data.zip\");\n      let date = new Date().getTime();\n      dbx\n        .filesUpload({\n          path: `/${date}/data.zip`,\n          contents: file,\n        })\n        .then(function (response: any) {\n          console.log(response, \"上传成功\");\n          resolve(true);\n        })\n        .catch(function (error: any) {\n          console.error(error, \"上传失败\");\n          resolve(false);\n        });\n    });\n  }\n  static DownloadFile() {\n    return new Promise<boolean>((resolve, reject) => {\n      var ACCESS_TOKEN = StorageUtil.getReaderConfig(\"dropbox_token\") || \"\";\n      var dbx = new Dropbox.Dropbox({ accessToken: ACCESS_TOKEN });\n      dbx\n        .filesListFolder({ path: \"\" })\n        .then(function (response) {\n          let folderArr: string[] = [];\n          response.result.entries.forEach((item) => {\n            if (!isNaN(parseInt(item.name))) folderArr.push(item.name);\n          });\n          let folder = folderArr.sort().reverse()[0];\n          dbx\n            .filesDownload({\n              path: `/${folder}/data.zip`,\n            })\n            .then(async (data: any) => {\n              let file = data.result.fileBlob;\n              file.lastModifiedDate = new Date();\n              file.name = \"data.zip\";\n              let result = await restore(file);\n              if (result) {\n                resolve(true);\n              } else {\n                resolve(false);\n              }\n            })\n            .catch(function (error: any) {\n              console.error(error);\n              resolve(false);\n            });\n        })\n        .catch(function (error) {\n          console.error(error);\n        });\n    });\n  }\n}\n\nexport default DropboxUtil;\n","import { restore } from \"./restoreUtil\";\nimport StorageUtil from \"../serviceUtils/storageUtil\";\n\nclass WebdavUtil {\n  static UploadFile = async (file: any) => {\n    return new Promise<boolean>(async (resolve, reject) => {\n      const { createClient } = window.require(\"webdav\");\n      let { url, username, password } = JSON.parse(\n        StorageUtil.getReaderConfig(\"webdav_token\") || \"\"\n      );\n      const client = createClient(url, {\n        username,\n        password,\n      });\n      var wfs = window.require(\"webdav-fs\")(url, {\n        username: username,\n        password: password,\n      });\n      if ((await client.exists(\"/KoodoReader\")) === false) {\n        await client.createDirectory(\"/KoodoReader\");\n      }\n      wfs.writeFile(\"/KoodoReader/data.zip\", file, \"binary\", function (err) {\n        console.log(err);\n        if (err) resolve(false);\n        let year = new Date().getFullYear(),\n          month = new Date().getMonth() + 1,\n          day = new Date().getDate();\n        client\n          .copyFile(\n            \"/KoodoReader/data.zip\",\n            \"/KoodoReader/\" +\n              `${year}-${month <= 9 ? \"0\" + month : month}-${\n                day <= 9 ? \"0\" + day : day\n              }.zip`\n          )\n          .then(() => {\n            resolve(true);\n          })\n          .catch(() => {\n            resolve(false);\n          });\n      });\n    });\n  };\n  static DownloadFile = async () => {\n    return new Promise<boolean>(async (resolve, reject) => {\n      const fs = window.require(\"fs\");\n      const path = window.require(\"path\");\n      const { createClient } = window.require(\"webdav\");\n      const { ipcRenderer } = window.require(\"electron\");\n      const dirPath = ipcRenderer.sendSync(\"user-data\", \"ping\");\n      const request = window.require(\"request\");\n      let { url, username, password } = JSON.parse(\n        StorageUtil.getReaderConfig(\"webdav_token\") || \"\"\n      );\n      const client = createClient(url, {\n        username,\n        password,\n      });\n      if ((await client.exists(\"/KoodoReader/data.zip\")) === false) {\n        resolve(false);\n      }\n      const downloadLink: string = client.getFileDownloadLink(\n        \"/KoodoReader/data.zip\"\n      );\n      let stream = fs.createWriteStream(path.join(dirPath, `data.zip`));\n      request(downloadLink)\n        .pipe(stream)\n        .on(\"close\", async (err) => {\n          if (err) {\n            console.log(err);\n            resolve(false);\n          } else {\n            var data = fs.readFileSync(path.join(dirPath, `data.zip`));\n            let blobTemp: any = new Blob([data], { type: \"application/zip\" });\n            let fileTemp = new File([blobTemp], \"data.zip\", {\n              lastModified: new Date().getTime(),\n              type: blobTemp.type,\n            });\n            let result = await restore(fileTemp);\n            if (!result) resolve(false);\n            try {\n              const fs_extra = window.require(\"fs-extra\");\n              fs_extra.remove(path.join(dirPath, `data.zip`), (error: any) => {\n                if (error) resolve(false);\n                resolve(true);\n              });\n            } catch (e) {\n              console.log(\"error removing \", path.join(dirPath, `data.zip`));\n              resolve(false);\n            }\n          }\n        });\n    });\n  };\n}\n\nexport default WebdavUtil;\n","import React, { Component } from \"react\";\nimport \"./tokenDialog.css\";\nimport { Trans } from \"react-i18next\";\nimport { TokenDialogProps, TokenDialogState } from \"./interface\";\nimport StorageUtil from \"../../../utils/serviceUtils/storageUtil\";\nimport toast from \"react-hot-toast\";\nimport { openExternalUrl } from \"../../../utils/serviceUtils/urlUtil\";\nclass TokenDialog extends Component<TokenDialogProps, TokenDialogState> {\n  constructor(props: TokenDialogProps) {\n    super(props);\n    this.state = { isNew: false };\n  }\n\n  handleCancel = () => {\n    this.props.handleTokenDialog(false);\n  };\n  handleTokenComfirm = () => {\n    let token: string = (\n      document.querySelector(\".token-dialog-token-box\") as HTMLTextAreaElement\n    ).value;\n    StorageUtil.setReaderConfig(`${this.props.driveName}_token`, token);\n    this.props.handleTokenDialog(false);\n    toast.success(this.props.t(\"Add Successfully\"));\n  };\n  handleDavComfirm = () => {\n    let url: string = (\n      document.querySelector(\".token-dialog-url-box\") as HTMLTextAreaElement\n    ).value;\n    let username: string = (\n      document.querySelector(\n        \".token-dialog-username-box\"\n      ) as HTMLTextAreaElement\n    ).value;\n    let password: string = (\n      document.querySelector(\n        \".token-dialog-password-box\"\n      ) as HTMLTextAreaElement\n    ).value;\n    StorageUtil.setReaderConfig(\n      `${this.props.driveName}_token`,\n      JSON.stringify({ url, username, password })\n    );\n    this.props.handleTokenDialog(false);\n    toast.success(this.props.t(\"Add Successfully\"));\n  };\n  handleJump = (url: string) => {\n    openExternalUrl(url);\n  };\n  render() {\n    return (\n      <div className=\"token-dialog-container\">\n        <div className=\"token-dialog-box\">\n          <div className=\"token-dialog-title\">\n            <Trans>Authorize</Trans>\n            &nbsp;\n            {this.props.driveName}&nbsp;\n            <Trans>Token</Trans>\n          </div>\n          {this.props.driveName === \"webdav\" ? (\n            <>\n              <div\n                className=\"token-dialog-info-text\"\n                style={\n                  StorageUtil.getReaderConfig(\"lang\") === \"en\"\n                    ? { fontSize: \"14px\" }\n                    : {}\n                }\n              >\n                <Trans>Webdav Info</Trans>\n              </div>\n              <input\n                type=\"text\"\n                name=\"username\"\n                placeholder={this.props.t(\"Server Address\")}\n                id=\"token-dialog-url-box\"\n                className=\"token-dialog-url-box\"\n              />\n              <input\n                type=\"text\"\n                name=\"username\"\n                placeholder={this.props.t(\"Username\")}\n                id=\"token-dialog-username-box\"\n                className=\"token-dialog-username-box\"\n              />\n              <input\n                type=\"text\"\n                name=\"username\"\n                placeholder={this.props.t(\"Password\")}\n                id=\"token-dialog-password-box\"\n                className=\"token-dialog-password-box\"\n              />\n            </>\n          ) : (\n            <>\n              <div\n                className=\"token-dialog-info-text\"\n                style={\n                  StorageUtil.getReaderConfig(\"lang\") === \"en\"\n                    ? { fontSize: \"14px\" }\n                    : {}\n                }\n              >\n                <Trans>\n                  Please authorize your account, and fill the following box with\n                  the token\n                </Trans>\n              </div>\n              <div\n                className=\"token-dialog-link-text\"\n                onClick={() => {\n                  this.handleJump(this.props.url);\n                }}\n              >\n                <Trans>Authorize</Trans>\n              </div>\n              <textarea className=\"token-dialog-token-box\" />\n            </>\n          )}\n\n          <div\n            className=\"token-dialog-cancel\"\n            onClick={() => {\n              this.handleCancel();\n            }}\n          >\n            <Trans>Cancel</Trans>\n          </div>\n          <div\n            className=\"token-dialog-comfirm\"\n            onClick={() => {\n              if (this.props.driveName === \"webdav\") {\n                this.handleDavComfirm();\n              } else {\n                this.handleTokenComfirm();\n              }\n            }}\n          >\n            <Trans>Confirm</Trans>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default TokenDialog;\n","import { connect } from \"react-redux\";\nimport { handleTokenDialog } from \"../../../store/actions\";\nimport { stateType } from \"../../../store\";\nimport { withTranslation } from \"react-i18next\";\nimport TokenDialog from \"./component\";\nconst mapStateToProps = (state: stateType) => {\n  return {\n    books: state.manager.books,\n    isOpenDeleteDialog: state.book.isOpenDeleteDialog,\n    currentBook: state.book.currentBook,\n    bookmarks: state.reader.bookmarks,\n    notes: state.reader.notes,\n    digests: state.reader.digests,\n  };\n};\nconst actionCreator = {\n  handleTokenDialog,\n};\nexport default connect(\n  mapStateToProps,\n  actionCreator\n)(withTranslation()(TokenDialog as any));\n","import React from \"react\";\nimport \"./backupDialog.css\";\nimport { driveList } from \"../../../constants/driveList\";\nimport { backup } from \"../../../utils/syncUtils/backupUtil\";\nimport { restore } from \"../../../utils/syncUtils/restoreUtil\";\nimport { Trans } from \"react-i18next\";\nimport DropboxUtil from \"../../../utils/syncUtils/dropbox\";\nimport WebdavUtil from \"../../../utils/syncUtils/webdav\";\nimport { BackupDialogProps, BackupDialogState } from \"./interface\";\nimport TokenDialog from \"../tokenDialog\";\nimport StorageUtil from \"../../../utils/serviceUtils/storageUtil\";\nimport Lottie from \"react-lottie\";\nimport animationSuccess from \"../../../assets/lotties/success.json\";\nimport FileSaver from \"file-saver\";\nimport toast from \"react-hot-toast\";\nimport { isElectron } from \"react-device-detect\";\nconst successOptions = {\n  loop: false,\n  autoplay: true,\n  animationData: animationSuccess,\n  rendererSettings: {\n    preserveAspectRatio: \"xMidYMid slice\",\n  },\n};\nclass BackupDialog extends React.Component<\n  BackupDialogProps,\n  BackupDialogState\n> {\n  constructor(props: BackupDialogProps) {\n    super(props);\n    this.state = {\n      currentStep: 0,\n      isBackup: \"\",\n      currentDrive: 0,\n    };\n  }\n  handleClose = () => {\n    this.props.handleBackupDialog(false);\n  };\n\n  handleFinish = () => {\n    this.setState({ currentStep: 2 });\n    this.props.handleLoadingDialog(false);\n    this.showMessage(\"Excute Successfully\");\n    this.props.handleFetchBooks();\n  };\n  handleRestoreToLocal = async (event: any) => {\n    event.preventDefault();\n    this.props.handleLoadingDialog(true);\n    let result = await restore(event.target.files[0]);\n    if (result) {\n      this.handleFinish();\n    }\n  };\n  showMessage = (message: string) => {\n    toast(this.props.t(message));\n  };\n  handleDrive = (index: number) => {\n    let year = new Date().getFullYear(),\n      month = new Date().getMonth() + 1,\n      day = new Date().getDate();\n    this.setState({ currentDrive: index }, async () => {\n      switch (index) {\n        case 0:\n          let blob: Blob | boolean = await backup(\n            this.props.books,\n            this.props.notes,\n            this.props.bookmarks,\n            false\n          );\n          if (!blob) {\n            this.showMessage(\"Backup Failed\");\n          }\n          FileSaver.saveAs(\n            blob as Blob,\n            `${year}-${month <= 9 ? \"0\" + month : month}-${\n              day <= 9 ? \"0\" + day : day\n            }.zip`\n          );\n          this.handleFinish();\n          break;\n        case 1:\n          if (!StorageUtil.getReaderConfig(\"dropbox_token\")) {\n            this.props.handleTokenDialog(true);\n            break;\n          }\n\n          if (this.state.isBackup === \"yes\") {\n            this.showMessage(\"Uploading, please wait\");\n            this.props.handleLoadingDialog(true);\n\n            let blob: Blob | boolean = await backup(\n              this.props.books,\n              this.props.notes,\n              this.props.bookmarks,\n              false\n            );\n            if (!blob) {\n              this.showMessage(\"Backup Failed\");\n              this.props.handleLoadingDialog(false);\n            }\n            let result = await DropboxUtil.UploadFile(blob);\n            if (result) {\n              this.handleFinish();\n            } else {\n              this.showMessage(\"Upload failed, check your connection\");\n            }\n          } else {\n            this.props.handleLoadingDialog(true);\n            this.showMessage(\"Downloading, please wait\");\n            let result = await DropboxUtil.DownloadFile();\n            if (result) {\n              this.handleFinish();\n            } else {\n              this.showMessage(\"Download failed,network problem or no backup\");\n              this.props.handleLoadingDialog(false);\n            }\n          }\n\n          break;\n        case 2:\n          this.showMessage(\"Coming Soon\");\n          break;\n\n        case 3:\n          if (!StorageUtil.getReaderConfig(\"webdav_token\")) {\n            this.props.handleTokenDialog(true);\n            break;\n          }\n          if (this.state.isBackup === \"yes\") {\n            this.showMessage(\"Uploading, please wait\");\n            this.props.handleLoadingDialog(true);\n\n            let blob: any = await backup(\n              this.props.books,\n              this.props.notes,\n              this.props.bookmarks,\n              false\n            );\n            if (!blob) {\n              this.showMessage(\"Backup Failed\");\n              this.props.handleLoadingDialog(false);\n            }\n\n            let result = await WebdavUtil.UploadFile(\n              new File([blob], \"data.zip\", {\n                lastModified: new Date().getTime(),\n                type: blob.type,\n              })\n            );\n            if (result) {\n              this.handleFinish();\n            } else {\n              this.showMessage(\"Upload failed, check your connection\");\n              this.props.handleLoadingDialog(false);\n            }\n          } else {\n            this.showMessage(\"Downloading, please wait\");\n            this.props.handleLoadingDialog(true);\n\n            let result = await WebdavUtil.DownloadFile();\n            if (!result) {\n              this.showMessage(\"Download failed,network problem or no backup\");\n            } else {\n              this.handleFinish();\n            }\n          }\n          break;\n        default:\n          break;\n      }\n    });\n  };\n  render() {\n    const renderDrivePage = () => {\n      return driveList.map((item, index) => {\n        return (\n          <li\n            key={item.id}\n            className=\"backup-page-list-item\"\n            onClick={() => {\n              //webdav is avavilible on desktop\n              if (index === 3 && !isElectron) {\n                toast(\n                  \"Koodo Reader's web version are limited by the browser, for more powerful features, please download the desktop version.\"\n                );\n                return;\n              }\n              this.handleDrive(index);\n            }}\n            style={index !== 2 ? { opacity: 1 } : {}}\n          >\n            <div className=\"backup-page-list-item-container\">\n              <span\n                className={`icon-${item.icon} backup-page-list-icon`}\n              ></span>\n              {StorageUtil.getReaderConfig(\"dropbox_token\") && index === 1 ? (\n                <div\n                  className=\"backup-page-list-title\"\n                  onClick={() => {\n                    StorageUtil.setReaderConfig(\"dropbox_token\", \"\");\n                    this.showMessage(\"Unauthorize Successfully\");\n                  }}\n                  style={{ color: \"rgb(0, 120, 212)\" }}\n                >\n                  <Trans>Unauthorize</Trans>\n                </div>\n              ) : StorageUtil.getReaderConfig(\"webdav_token\") && index === 3 ? (\n                <div\n                  className=\"backup-page-list-title\"\n                  onClick={() => {\n                    StorageUtil.setReaderConfig(\"webdav_token\", \"\");\n                    this.showMessage(\"Unauthorize Successfully\");\n                  }}\n                  style={{ color: \"rgb(0, 120, 212)\" }}\n                >\n                  <Trans>Unauthorize</Trans>\n                </div>\n              ) : (\n                <div className=\"backup-page-list-title\">\n                  <Trans>{item.name}</Trans>\n                </div>\n              )}\n            </div>\n          </li>\n        );\n      });\n    };\n\n    const dialogProps = {\n      driveName: driveList[this.state.currentDrive!].icon,\n      url: driveList[this.state.currentDrive!].url,\n    };\n\n    return (\n      <div className=\"backup-page-container\">\n        {this.props.isOpenTokenDialog ? <TokenDialog {...dialogProps} /> : null}\n        {this.state.currentStep === 0 ? (\n          <div className=\"backup-page-title\">\n            <Trans>Choose your operation</Trans>\n          </div>\n        ) : this.state.currentStep === 1 && this.state.isBackup === \"yes\" ? (\n          <div className=\"backup-page-title\">\n            <Trans>Where to keep your data?</Trans>\n          </div>\n        ) : this.state.currentStep === 1 && this.state.isBackup === \"no\" ? (\n          <div className=\"backup-page-title\">\n            <Trans>Where is your data?</Trans>\n          </div>\n        ) : null}\n        {this.state.currentStep === 0 ? (\n          <div className=\"backup-page-option\">\n            <div\n              className={\n                this.state.isBackup === \"yes\"\n                  ? \"backup-page-backup active\"\n                  : \"backup-page-backup\"\n              }\n              onClick={() => {\n                this.setState({ isBackup: \"yes\" });\n              }}\n            >\n              <span className=\"icon-backup\"></span>\n              <div>\n                <Trans>Backup</Trans>\n              </div>\n            </div>\n\n            <div\n              className={\n                this.state.isBackup === \"no\"\n                  ? \"backup-page-backup active\"\n                  : \"backup-page-backup\"\n              }\n              onClick={() => {\n                this.setState({ isBackup: \"no\" });\n              }}\n            >\n              <span className=\"icon-restore\"></span>\n              <div>\n                <Trans>Restore</Trans>\n              </div>\n            </div>\n          </div>\n        ) : this.state.currentStep === 1 ? (\n          <div className=\"backup-page-drive-container\">\n            <div>{renderDrivePage()}</div>\n            {this.state.isBackup === \"no\" ? (\n              <input\n                type=\"file\"\n                id=\"restore-file\"\n                accept=\"application/zip\"\n                className=\"restore-file\"\n                name=\"file\"\n                multiple={false}\n                onChange={(event) => {\n                  this.handleRestoreToLocal(event);\n                }}\n              />\n            ) : null}\n          </div>\n        ) : (\n          <div className=\"backup-page-finish-container\">\n            <div className=\"backup-page-finish\">\n              <Lottie options={successOptions} height={80} width={80} />\n              <div className=\"backup-page-finish-text\">\n                <Trans>\n                  {this.state.isBackup === \"yes\"\n                    ? \"Backup Successfully\"\n                    : \"Restore Successfully\"}\n                </Trans>\n              </div>\n              {this.state.isBackup ? null : (\n                <div style={{ opacity: 0.6 }}>\n                  <Trans>Try refresh or restart</Trans>\n                </div>\n              )}\n            </div>\n          </div>\n        )}\n        {this.state.isBackup === \"yes\" && this.state.currentStep === 0 ? (\n          <div className=\"backup-page-backup-selector\"></div>\n        ) : null}\n        {this.state.isBackup === \"no\" && this.state.currentStep === 0 ? (\n          <div\n            className=\"backup-page-backup-selector\"\n            style={{ marginLeft: \"252px\" }}\n          ></div>\n        ) : null}\n        <div\n          className=\"backup-page-close-icon\"\n          onClick={() => {\n            this.handleClose();\n          }}\n        >\n          <span className=\"icon-close backup-close-icon\"></span>\n        </div>\n\n        {this.state.currentStep === 1 ? (\n          <div\n            className=\"backup-page-next\"\n            onClick={() => {\n              this.setState({ currentStep: 0 });\n            }}\n          >\n            <Trans>Last Step</Trans>\n          </div>\n        ) : this.state.currentStep === 0 ? (\n          <div\n            className=\"backup-page-next\"\n            onClick={() => {\n              this.setState({ currentStep: 1 });\n            }}\n            style={this.state.isBackup ? {} : { display: \"none\" }}\n          >\n            <Trans>Next Step</Trans>\n          </div>\n        ) : null}\n      </div>\n    );\n  }\n}\n\nexport default BackupDialog;\n","import {\n  handleBackupDialog,\n  handleTokenDialog,\n  handleLoadingDialog,\n  handleTipDialog,\n  handleFetchBooks,\n} from \"../../../store/actions\";\nimport { connect } from \"react-redux\";\nimport { withTranslation } from \"react-i18next\";\nimport { stateType } from \"../../../store\";\nimport BackupDialog from \"./component\";\n\nconst mapStateToProps = (state: stateType) => {\n  return {\n    books: state.manager.books,\n    bookmarks: state.reader.bookmarks,\n    notes: state.reader.notes,\n    digests: state.reader.digests,\n    isOpenTokenDialog: state.backupPage.isOpenTokenDialog,\n  };\n};\nconst actionCreator = {\n  handleBackupDialog,\n  handleTokenDialog,\n  handleLoadingDialog,\n  handleTipDialog,\n  handleFetchBooks,\n};\nexport default connect(\n  mapStateToProps,\n  actionCreator\n)(withTranslation()(BackupDialog));\n","import React from \"react\";\nimport \"./settingDialog.css\";\nimport { SettingInfoProps, SettingInfoState } from \"./interface\";\nimport { Trans } from \"react-i18next\";\nimport i18n from \"../../../i18n\";\nimport { version } from \"../../../../package.json\";\nimport StorageUtil from \"../../../utils/serviceUtils/storageUtil\";\nimport { changePath } from \"../../../utils/syncUtils/common\";\nimport { isElectron } from \"react-device-detect\";\nimport { dropdownList } from \"../../../constants/dropdownList\";\nimport { Tooltip } from \"react-tippy\";\nimport { restore } from \"../../../utils/syncUtils/restoreUtil\";\nimport {\n  settingList,\n  langList,\n  searchList,\n  skinList,\n} from \"../../../constants/settingList\";\nimport { themeList } from \"../../../constants/themeList\";\nimport _ from \"underscore\";\nimport toast from \"react-hot-toast\";\nimport { openExternalUrl } from \"../../../utils/serviceUtils/urlUtil\";\nclass SettingDialog extends React.Component<\n  SettingInfoProps,\n  SettingInfoState\n> {\n  constructor(props: SettingInfoProps) {\n    super(props);\n    this.state = {\n      isTouch: StorageUtil.getReaderConfig(\"isTouch\") === \"yes\",\n      isImportPath: StorageUtil.getReaderConfig(\"isImportPath\") === \"yes\",\n      isMergeWord: StorageUtil.getReaderConfig(\"isMergeWord\") === \"yes\",\n      isPreventTrigger:\n        StorageUtil.getReaderConfig(\"isPreventTrigger\") === \"yes\",\n      isAutoFullscreen:\n        StorageUtil.getReaderConfig(\"isAutoFullscreen\") === \"yes\",\n      isPreventAdd: StorageUtil.getReaderConfig(\"isPreventAdd\") === \"yes\",\n      isOpenBook: StorageUtil.getReaderConfig(\"isOpenBook\") === \"yes\",\n      isExpandContent: StorageUtil.getReaderConfig(\"isExpandContent\") === \"yes\",\n      isPreventSleep: StorageUtil.getReaderConfig(\"isPreventSleep\") === \"yes\",\n      isOpenInMain: StorageUtil.getReaderConfig(\"isOpenInMain\") === \"yes\",\n      isDisableUpdate: StorageUtil.getReaderConfig(\"isDisableUpdate\") === \"yes\",\n      appSkin: StorageUtil.getReaderConfig(\"appSkin\"),\n      isDisableAnalytics:\n        StorageUtil.getReaderConfig(\"isDisableAnalytics\") === \"yes\",\n      isUseBuiltIn: StorageUtil.getReaderConfig(\"isUseBuiltIn\") === \"yes\",\n      isPDFCover: StorageUtil.getReaderConfig(\"isPDFCover\") === \"yes\",\n      currentThemeIndex: _.findLastIndex(themeList, {\n        name: StorageUtil.getReaderConfig(\"themeColor\"),\n      }),\n    };\n  }\n  componentDidMount() {\n    StorageUtil.getReaderConfig(\"systemFont\") &&\n      document\n        .getElementsByClassName(\"lang-setting-dropdown\")[0]\n        ?.children[\n          dropdownList[0].option.indexOf(\n            StorageUtil.getReaderConfig(\"systemFont\")\n          )\n        ]?.setAttribute(\"selected\", \"selected\");\n    document\n      .getElementsByClassName(\"lang-setting-dropdown\")[1]\n      ?.children[\n        langList\n          .map((item) => item.value)\n          .indexOf(\n            StorageUtil.getReaderConfig(\"lang\") ||\n              (navigator.language.indexOf(\"zh\") > -1 ? \"zh\" : \"en\")\n          )\n      ]?.setAttribute(\"selected\", \"selected\");\n    document.getElementsByClassName(\"lang-setting-dropdown\")[2]?.children[\n      _.findLastIndex(searchList, {\n        value:\n          StorageUtil.getReaderConfig(\"searchEngine\") ||\n          (navigator.language === \"zh-CN\" ? \"baidu\" : \"google\"),\n      })\n    ]?.setAttribute(\"selected\", \"selected\");\n    document.getElementsByClassName(\"lang-setting-dropdown\")[3]?.children[\n      _.findLastIndex(skinList, {\n        value: StorageUtil.getReaderConfig(\"appSkin\") || \"light\",\n      })\n    ]?.setAttribute(\"selected\", \"selected\");\n  }\n  handleRest = (bool: boolean) => {\n    toast.success(this.props.t(\"Change Successfully\"));\n  };\n  changeLanguage = (lng: string) => {\n    i18n.changeLanguage(lng);\n    StorageUtil.setReaderConfig(\"lang\", lng);\n  };\n  changeSearch = (searchEngine: string) => {\n    StorageUtil.setReaderConfig(\"searchEngine\", searchEngine);\n  };\n  changeSkin = (skin: string) => {\n    StorageUtil.setReaderConfig(\"appSkin\", skin);\n\n    if (\n      skin === \"night\" ||\n      (StorageUtil.getReaderConfig(\"appSkin\") === \"system\" &&\n        StorageUtil.getReaderConfig(\"isOSNight\") === \"yes\")\n    ) {\n      StorageUtil.setReaderConfig(\"backgroundColor\", \"rgba(44,47,49,1)\");\n      StorageUtil.setReaderConfig(\"textColor\", \"rgba(255,255,255,1)\");\n    } else if (\n      skin === \"light\" ||\n      (StorageUtil.getReaderConfig(\"appSkin\") === \"system\" &&\n        StorageUtil.getReaderConfig(\"isOSNight\") !== \"yes\")\n    ) {\n      StorageUtil.setReaderConfig(\"backgroundColor\", \"rgba(255,255,255,1)\");\n      StorageUtil.setReaderConfig(\"textColor\", \"rgba(0,0,0,1)\");\n    }\n\n    if (isElectron) {\n      toast(this.props.t(\"Try refresh or restart\"));\n    } else {\n      window.location.reload();\n    }\n  };\n  changeFont = (font: string) => {\n    let body = document.getElementsByTagName(\"body\")[0];\n    body?.setAttribute(\"style\", \"font-family:\" + font + \"!important\");\n    StorageUtil.setReaderConfig(\"systemFont\", font);\n  };\n  handleJump = (url: string) => {\n    openExternalUrl(url);\n  };\n  handleSetting = (stateName: string) => {\n    this.setState({ [stateName]: !this.state[stateName] } as any);\n    StorageUtil.setReaderConfig(\n      stateName,\n      this.state[stateName] ? \"no\" : \"yes\"\n    );\n    this.handleRest(this.state[stateName]);\n  };\n  syncFromLocation = async () => {\n    const fs = window.require(\"fs\");\n    const path = window.require(\"path\");\n    const { zip } = window.require(\"zip-a-folder\");\n    let storageLocation = localStorage.getItem(\"storageLocation\")\n      ? localStorage.getItem(\"storageLocation\")\n      : window\n          .require(\"electron\")\n          .ipcRenderer.sendSync(\"storage-location\", \"ping\");\n    let sourcePath = path.join(storageLocation, \"config\");\n    let outPath = path.join(storageLocation, \"config.zip\");\n    await zip(sourcePath, outPath);\n\n    var data = fs.readFileSync(outPath);\n\n    let blobTemp = new Blob([data], { type: \"application/epub+zip\" });\n    let fileTemp = new File([blobTemp], \"config.zip\", {\n      lastModified: new Date().getTime(),\n      type: blobTemp.type,\n    });\n\n    let result = await restore(fileTemp, true);\n    if (result) {\n      toast.success(this.props.t(\"Change Successfully\"));\n    } else {\n      toast.error(this.props.t(\"Change Failed\"));\n    }\n  };\n  handleChangeLocation = async () => {\n    const { ipcRenderer } = window.require(\"electron\");\n    const path = await ipcRenderer.invoke(\"change-path\");\n    if (!path.filePaths[0]) {\n      return;\n    }\n    let result = await changePath(\n      localStorage.getItem(\"storageLocation\")\n        ? localStorage.getItem(\"storageLocation\")\n        : ipcRenderer.sendSync(\"storage-location\", \"ping\"),\n      path.filePaths[0]\n    );\n    if (result === 1) {\n      this.syncFromLocation();\n    } else if (result === 2) {\n      this.props.handleFetchBooks();\n      toast.success(this.props.t(\"Change Successfully\"));\n    } else {\n      toast.error(this.props.t(\"Change Failed\"));\n    }\n    localStorage.setItem(\"storageLocation\", path.filePaths[0]);\n    document.getElementsByClassName(\n      \"setting-dialog-location-title\"\n    )[0].innerHTML =\n      path.filePaths[0] ||\n      localStorage.getItem(\"storageLocation\") ||\n      ipcRenderer.sendSync(\"storage-location\", \"ping\");\n  };\n\n  handleTheme = (name: string, index: number) => {\n    this.setState({ currentThemeIndex: index });\n    StorageUtil.setReaderConfig(\"themeColor\", name);\n    if (isElectron) {\n      toast(this.props.t(\"Try refresh or restart\"));\n    } else {\n      window.location.reload();\n    }\n  };\n  handleMergeWord = () => {\n    if (this.state.isOpenInMain && !this.state.isMergeWord) {\n      toast(this.props.t(\"Please turn off open books in the main window\"));\n      return;\n    }\n    this.handleSetting(\"isMergeWord\");\n  };\n  handleOpenInMain = () => {\n    if (this.state.isMergeWord && !this.state.isOpenInMain) {\n      toast(this.props.t(\"Please turn off merge with word first\"));\n      return;\n    }\n    this.handleSetting(\"isOpenInMain\");\n  };\n  render() {\n    return (\n      <div className=\"setting-dialog-container\">\n        <p className=\"setting-dialog-title\">\n          <Trans>Setting</Trans>\n        </p>\n        <p className=\"setting-subtitle\">\n          <Trans>Version</Trans>\n          {version}\n        </p>\n        <div\n          className=\"setting-close-container\"\n          onClick={() => {\n            this.props.handleSetting(false);\n          }}\n        >\n          <span className=\"icon-close setting-close\"></span>\n        </div>\n\n        <div className=\"setting-dialog-info\">\n          {settingList.map((item, index) => {\n            return (\n              <div\n                style={\n                  item.isElectron ? (isElectron ? {} : { display: \"none\" }) : {}\n                }\n                key={item.propName}\n              >\n                <div className=\"setting-dialog-new-title\" key={item.title}>\n                  <span style={{ width: \"250px\" }}>\n                    <Trans>{item.title}</Trans>\n                  </span>\n\n                  <span\n                    className=\"single-control-switch\"\n                    onClick={() => {\n                      switch (item.propName) {\n                        case \"isMergeWord\":\n                          this.handleMergeWord();\n                          break;\n                        case \"isOpenInMain\":\n                          this.handleOpenInMain();\n                          break;\n                        default:\n                          this.handleSetting(item.propName);\n                          break;\n                      }\n                    }}\n                    style={this.state[item.propName] ? {} : { opacity: 0.6 }}\n                  >\n                    <span\n                      className=\"single-control-button\"\n                      style={\n                        this.state[item.propName]\n                          ? {\n                              transform: \"translateX(20px)\",\n                              transition: \"transform 0.5s ease\",\n                            }\n                          : {\n                              transform: \"translateX(0px)\",\n                              transition: \"transform 0.5s ease\",\n                            }\n                      }\n                    ></span>\n                  </span>\n                </div>\n                <p className=\"setting-option-subtitle\">\n                  <Trans>{item.desc}</Trans>\n                </p>\n              </div>\n            );\n          })}\n          <div className=\"setting-dialog-new-title\">\n            <Trans>Theme Color</Trans>\n            <ul className=\"theme-setting-container\">\n              {themeList.map((item, index) => (\n                <Tooltip\n                  key={item.id}\n                  title={this.props.t(item.title)}\n                  position=\"top\"\n                  trigger=\"mouseenter\"\n                >\n                  <li\n                    className={\n                      index === this.state.currentThemeIndex\n                        ? \"active-color theme-setting-item\"\n                        : \"theme-setting-item\"\n                    }\n                    onClick={() => {\n                      this.handleTheme(item.name, index);\n                    }}\n                    style={{ backgroundColor: item.color }}\n                  ></li>\n                </Tooltip>\n              ))}\n            </ul>\n          </div>\n\n          {isElectron && (\n            <>\n              <div className=\"setting-dialog-new-title\">\n                <Trans>Change storage location</Trans>\n\n                <span\n                  className=\"change-location-button\"\n                  onClick={() => {\n                    this.handleChangeLocation();\n                  }}\n                >\n                  <Trans>Change location</Trans>\n                </span>\n              </div>\n              <div className=\"setting-dialog-location-title\">\n                {localStorage.getItem(\"storageLocation\")\n                  ? localStorage.getItem(\"storageLocation\")\n                  : window\n                      .require(\"electron\")\n                      .ipcRenderer.sendSync(\"storage-location\", \"ping\")}\n              </div>\n            </>\n          )}\n\n          <div className=\"setting-dialog-new-title\">\n            <Trans>System Font</Trans>\n            <select\n              name=\"\"\n              className=\"lang-setting-dropdown\"\n              onChange={(event) => {\n                this.changeFont(event.target.value);\n              }}\n            >\n              {dropdownList[0].option.map((item) => (\n                <option value={item} key={item} className=\"lang-setting-option\">\n                  {this.props.t(item)}\n                </option>\n              ))}\n            </select>\n          </div>\n\n          <div className=\"setting-dialog-new-title\">\n            <Trans>Language</Trans>\n            <select\n              name=\"\"\n              className=\"lang-setting-dropdown\"\n              onChange={(event) => {\n                this.changeLanguage(event.target.value);\n              }}\n            >\n              {langList.map((item) => (\n                <option\n                  value={item.value}\n                  key={item.value}\n                  className=\"lang-setting-option\"\n                >\n                  {item.label}\n                </option>\n              ))}\n            </select>\n          </div>\n          <div className=\"setting-dialog-new-title\">\n            <Trans>Default search engine</Trans>\n            <select\n              name=\"\"\n              className=\"lang-setting-dropdown\"\n              onChange={(event) => {\n                this.changeSearch(event.target.value);\n              }}\n            >\n              {searchList.map((item) => (\n                <option\n                  value={item.value}\n                  key={item.value}\n                  className=\"lang-setting-option\"\n                >\n                  {this.props.t(item.label)}\n                </option>\n              ))}\n            </select>\n          </div>\n          <div className=\"setting-dialog-new-title\">\n            <Trans>Appearance</Trans>\n            <select\n              name=\"\"\n              className=\"lang-setting-dropdown\"\n              onChange={(event) => {\n                this.changeSkin(event.target.value);\n              }}\n            >\n              {skinList.map((item) => (\n                <option\n                  value={item.value}\n                  key={item.value}\n                  className=\"lang-setting-option\"\n                >\n                  {this.props.t(item.label)}\n                </option>\n              ))}\n            </select>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default SettingDialog;\n","import { connect } from \"react-redux\";\nimport SettingDialog from \"./component\";\nimport { withTranslation } from \"react-i18next\";\nimport {\n  handleSetting,\n  handleTipDialog,\n  handleTip,\n  handleFetchBooks,\n} from \"../../../store/actions\";\nimport { stateType } from \"../../../store\";\n\nconst mapStateToProps = (state: stateType) => {\n  return {\n    bookmarks: state.reader.bookmarks,\n    books: state.manager.books,\n    notes: state.reader.notes,\n  };\n};\nconst actionCreator = {\n  handleSetting,\n  handleTipDialog,\n  handleTip,\n  handleFetchBooks,\n};\nexport default connect(\n  mapStateToProps,\n  actionCreator\n)(withTranslation()(SettingDialog as any));\n","import React from \"react\";\nimport \"./actionDialog.css\";\nimport { Trans } from \"react-i18next\";\nimport { ActionDialogProps } from \"./interface\";\nimport AddTrash from \"../../../utils/readUtils/addTrash\";\nimport FileSaver from \"file-saver\";\nimport Parser from \"html-react-parser\";\nimport ShelfUtil from \"../../../utils/readUtils/shelfUtil\";\nimport toast from \"react-hot-toast\";\nimport BookUtil from \"../../../utils/fileUtils/bookUtil\";\nclass ActionDialog extends React.Component<ActionDialogProps> {\n  handleDeleteBook = () => {\n    this.props.handleReadingBook(this.props.currentBook);\n    this.props.handleDeleteDialog(true);\n    this.props.handleActionDialog(false);\n  };\n  handleEditBook = () => {\n    this.props.handleEditDialog(true);\n    this.props.handleReadingBook(this.props.currentBook);\n    this.props.handleActionDialog(false);\n  };\n  handleAddShelf = () => {\n    this.props.handleAddDialog(true);\n    this.props.handleReadingBook(this.props.currentBook);\n    this.props.handleActionDialog(false);\n  };\n  handleRestoreBook = () => {\n    AddTrash.clear(this.props.currentBook.key);\n    this.props.handleActionDialog(false);\n    toast.success(this.props.t(\"Restore Successfully\"));\n    this.props.handleFetchBooks();\n  };\n  render() {\n    if (this.props.mode === \"trash\") {\n      return (\n        <div\n          className=\"action-dialog-container\"\n          onMouseLeave={() => {\n            this.props.handleActionDialog(false);\n          }}\n          style={{\n            left: this.props.left,\n            top: this.props.top,\n            maxHeight: \"45px\",\n            paddingTop: \"3px\",\n          }}\n        >\n          <div className=\"action-dialog-actions-container\">\n            <div\n              className=\"action-dialog-add\"\n              onClick={() => {\n                this.handleRestoreBook();\n              }}\n            >\n              <span className=\"icon-clockwise view-icon\"></span>\n              <span className=\"action-name\">\n                <Trans>Restore</Trans>\n              </span>\n              <p className=\"action-name\"></p>\n            </div>\n          </div>\n        </div>\n      );\n    }\n    return (\n      <div\n        className=\"action-dialog-container\"\n        onMouseLeave={() => {\n          this.props.handleActionDialog(false);\n        }}\n        onMouseEnter={() => {\n          this.props.handleActionDialog(true);\n        }}\n        style={{ left: this.props.left, top: this.props.top }}\n      >\n        <div className=\"action-dialog-actions-container\">\n          <div\n            className=\"action-dialog-add\"\n            onClick={() => {\n              this.handleAddShelf();\n            }}\n          >\n            <span className=\"icon-shelf view-icon\"></span>\n            <p className=\"action-name\">\n              <Trans>Add to Shelf</Trans>\n            </p>\n            <p className=\"action-name\"></p>\n          </div>\n          <div\n            className=\"action-dialog-delete\"\n            onClick={() => {\n              this.handleDeleteBook();\n            }}\n          >\n            <span className=\"icon-trash view-icon\"></span>\n            <p className=\"action-name\">\n              <Trans>Delete</Trans>\n            </p>\n            <p className=\"action-name\"></p>\n          </div>\n          <div\n            className=\"action-dialog-edit\"\n            onClick={() => {\n              this.handleEditBook();\n            }}\n          >\n            <span className=\"icon-edit view-icon\"></span>\n            <p className=\"action-name\">\n              <Trans>Edit</Trans>\n            </p>\n            <p className=\"action-name\"></p>\n          </div>\n          <div\n            className=\"action-dialog-edit\"\n            onClick={() => {\n              BookUtil.fetchBook(\n                this.props.currentBook.key,\n                true,\n                this.props.currentBook.path\n              ).then((result: any) => {\n                toast.success(this.props.t(\"Export Successfully\"));\n                FileSaver.saveAs(\n                  new Blob([result]),\n                  this.props.currentBook.name +\n                    `.${this.props.currentBook.format.toLocaleLowerCase()}`\n                );\n              });\n            }}\n          >\n            <span className=\"icon-export view-icon\"></span>\n            <p className=\"action-name\">\n              <Trans>Export</Trans>\n            </p>\n            <p className=\"action-name\"></p>\n          </div>\n        </div>\n        <div className=\"sort-dialog-seperator\"></div>\n\n        <div className=\"action-dialog-book-info\">\n          <div>\n            <p className=\"action-dialog-book-publisher\">\n              <Trans>Book Name</Trans>:\n            </p>\n            <p className=\"action-dialog-book-title\">\n              {this.props.currentBook.name}\n            </p>\n            <p className=\"action-dialog-book-publisher\">\n              <Trans>Author</Trans>:\n            </p>\n            <p className=\"action-dialog-book-title\">\n              <Trans>{this.props.currentBook.author}</Trans>\n            </p>\n          </div>\n          <div>\n            <p className=\"action-dialog-book-publisher\">\n              <Trans>Publisher</Trans>:\n            </p>\n            <p className=\"action-dialog-book-title\">\n              {this.props.currentBook.publisher}\n            </p>\n          </div>\n          <div>\n            <p className=\"action-dialog-book-publisher\">\n              <Trans>File size</Trans>:\n            </p>\n            <p className=\"action-dialog-book-title\">\n              {this.props.currentBook.size\n                ? this.props.currentBook.size / 1024 / 1024 > 1\n                  ? parseFloat(\n                      this.props.currentBook.size / 1024 / 1024 + \"\"\n                    ).toFixed(2) + \"Mb\"\n                  : parseInt(this.props.currentBook.size / 1024 + \"\") + \"Kb\"\n                : // eslint-disable-next-line\n                  \"0\" + \"Kb\"}\n            </p>\n          </div>\n          <div>\n            <p className=\"action-dialog-book-added\">\n              <Trans>Added at</Trans>:\n            </p>\n            <p className=\"action-dialog-book-title\">\n              {new Date(parseInt(this.props.currentBook.key))\n                .toLocaleString()\n                .replace(/:\\d{1,2}$/, \" \")}\n            </p>\n          </div>\n          <div>\n            <p className=\"action-dialog-book-publisher\">\n              <Trans>Shelf</Trans>:\n            </p>\n            <p className=\"action-dialog-book-title\">\n              {ShelfUtil.getBookPosition(this.props.currentBook.key).map(\n                (item) => (\n                  <>\n                    #<Trans>{item}</Trans>&nbsp;\n                  </>\n                )\n              )}\n            </p>\n          </div>\n          <div>\n            <p className=\"action-dialog-book-desc\">\n              <Trans>Description</Trans>:\n            </p>\n            <div className=\"action-dialog-book-detail\">\n              {Parser(this.props.currentBook.description || \" \")}\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default ActionDialog;\n","import { connect } from \"react-redux\";\nimport {\n  handleEditDialog,\n  handleDeleteDialog,\n  handleAddDialog,\n  handleActionDialog,\n  handleReadingBook,\n  handleFetchBooks,\n} from \"../../../store/actions\";\n\nimport { stateType } from \"../../../store\";\nimport { withTranslation } from \"react-i18next\";\nimport ActionDialog from \"./component\";\n\nconst mapStateToProps = (state: stateType) => {\n  return {\n    mode: state.sidebar.mode,\n    currentEpub: state.book.currentEpub,\n    currentBook: state.book.currentBook,\n  };\n};\nconst actionCreator = {\n  handleEditDialog,\n  handleAddDialog,\n  handleDeleteDialog,\n  handleReadingBook,\n  handleActionDialog,\n  handleFetchBooks,\n};\nexport default connect(\n  mapStateToProps,\n  actionCreator\n)(withTranslation()(ActionDialog as any));\n","import React from \"react\";\nimport RecentBooks from \"../../utils/readUtils/recordRecent\";\nimport \"./bookCardItem.css\";\nimport { BookCardProps, BookCardState } from \"./interface\";\nimport AddFavorite from \"../../utils/readUtils/addFavorite\";\nimport ActionDialog from \"../dialogs/actionDialog\";\nimport StorageUtil from \"../../utils/serviceUtils/storageUtil\";\nimport { withRouter } from \"react-router-dom\";\nimport RecordLocation from \"../../utils/readUtils/recordLocation\";\nimport { isElectron } from \"react-device-detect\";\nimport EmptyCover from \"../emptyCover\";\nimport BookUtil from \"../../utils/fileUtils/bookUtil\";\nimport toast from \"react-hot-toast\";\n\ndeclare var window: any;\n\nclass BookCardItem extends React.Component<BookCardProps, BookCardState> {\n  epub: any;\n  constructor(props: BookCardProps) {\n    super(props);\n    this.state = {\n      isOpenConfig: false,\n      isFavorite:\n        AddFavorite.getAllFavorite().indexOf(this.props.book.key) > -1,\n      left: 0,\n      top: 0,\n    };\n  }\n\n  componentDidMount() {\n    let filePath = \"\";\n    //控制是否自动打开本书\n    if (isElectron) {\n      const { ipcRenderer } = window.require(\"electron\");\n      filePath = ipcRenderer.sendSync(\"get-file-data\");\n    }\n\n    if (\n      StorageUtil.getReaderConfig(\"isOpenBook\") === \"yes\" &&\n      RecentBooks.getAllRecent()[0] === this.props.book.key &&\n      !this.props.currentBook.key &&\n      !filePath\n    ) {\n      this.props.handleReadingBook(this.props.book);\n      if (StorageUtil.getReaderConfig(\"isOpenInMain\") === \"yes\") {\n        this.props.history.push(BookUtil.getBookUrl(this.props.book));\n      } else {\n        BookUtil.RedirectBook(this.props.book);\n      }\n    }\n  }\n\n  handleMoreAction = (event: any) => {\n    event.preventDefault();\n    const e = event || window.event;\n    let x = e.clientX;\n    if (x > document.body.clientWidth - 300) {\n      x = x - 180;\n    }\n    this.setState(\n      {\n        left: x,\n        top:\n          document.body.clientHeight - e.clientY > 300\n            ? e.clientY\n            : e.clientY - 300,\n      },\n      () => {\n        this.props.handleActionDialog(true);\n        this.props.handleReadingBook(this.props.book);\n      }\n    );\n  };\n  handleDeleteBook = () => {\n    this.props.handleReadingBook(this.props.book);\n    this.props.handleDeleteDialog(true);\n    this.props.handleActionDialog(false);\n  };\n  handleLoveBook = () => {\n    AddFavorite.setFavorite(this.props.book.key);\n    this.setState({ isFavorite: true });\n    toast.success(this.props.t(\"Add Successfully\"));\n  };\n  handleCancelLoveBook = () => {\n    AddFavorite.clear(this.props.book.key);\n    this.setState({ isFavorite: false });\n    if (Object.keys(AddFavorite.getAllFavorite()).length === 0) {\n      this.props.history.push(\"/manager/empty\");\n      document.title = \"Koodo Reader\";\n    }\n    toast.success(this.props.t(\"Cancel Successfully\"));\n  };\n  //控制按钮的弹出\n  handleConfig = (mode: boolean) => {\n    this.setState({ isOpenConfig: mode });\n  };\n  handleJump = () => {\n    if (this.props.isSelectBook) {\n      this.props.handleSelectedBooks(\n        this.props.isSelected\n          ? this.props.selectedBooks.filter(\n              (item) => item !== this.props.book.key\n            )\n          : [...this.props.selectedBooks, this.props.book.key]\n      );\n      return;\n    }\n    RecentBooks.setRecent(this.props.book.key);\n    this.props.handleReadingBook(this.props.book);\n    if (StorageUtil.getReaderConfig(\"isOpenInMain\") === \"yes\") {\n      this.props.history.push(BookUtil.getBookUrl(this.props.book));\n    } else {\n      BookUtil.RedirectBook(this.props.book);\n    }\n  };\n  render() {\n    let percentage = RecordLocation.getCfi(this.props.book.key)\n      ? RecordLocation.getCfi(this.props.book.key).percentage\n      : 0;\n    const actionProps = { left: this.state.left, top: this.state.top };\n\n    return (\n      <>\n        <div\n          className=\"book-list-item\"\n          onMouseOver={() => {\n            this.handleConfig(true);\n          }}\n          onMouseLeave={() => {\n            this.handleConfig(false);\n            this.props.handleActionDialog(false);\n          }}\n          onContextMenu={(event) => {\n            this.handleMoreAction(event);\n          }}\n        >\n          {!this.props.book.cover ||\n          this.props.book.cover === \"noCover\" ||\n          (this.props.book.format === \"PDF\" &&\n            StorageUtil.getReaderConfig(\"isPDFCover\") !== \"yes\") ? (\n            <div\n              className=\"book-item-cover\"\n              onClick={() => {\n                this.handleJump();\n              }}\n            >\n              <EmptyCover\n                {...{\n                  format: this.props.book.format,\n                  title: this.props.book.name,\n                  scale: 1,\n                }}\n              />\n            </div>\n          ) : (\n            <img\n              className=\"book-item-cover\"\n              src={this.props.book.cover}\n              alt=\"\"\n              onClick={() => {\n                this.handleJump();\n              }}\n            />\n          )}\n\n          <p className=\"book-item-title\">{this.props.book.name}</p>\n\n          {this.state.isFavorite && !this.props.isSelectBook ? (\n            <span\n              className=\"icon-love book-loved-icon\"\n              onClick={() => {\n                this.handleCancelLoveBook();\n              }}\n            ></span>\n          ) : null}\n          {this.props.isSelectBook ? (\n            <span\n              className=\"icon-message book-selected-icon\"\n              style={this.props.isSelected ? {} : { color: \"#eee\" }}\n            ></span>\n          ) : null}\n\n          {this.state.isOpenConfig && !this.props.isSelectBook ? (\n            <>\n              {this.props.book.format !== \"PDF\" && (\n                <div className=\"reading-progress-icon\">\n                  <div style={{ position: \"relative\", left: \"4px\" }}>\n                    {percentage\n                      ? Math.floor(percentage * 100) < 10\n                        ? \"0\" + Math.floor(percentage * 100)\n                        : Math.floor(percentage * 100) === 100\n                        ? \"完\"\n                        : Math.floor(percentage * 100)\n                      : \"00\"}\n                    <span className=\"reading-percentage-char\">%</span>\n                  </div>\n                </div>\n              )}\n              <span\n                className=\"icon-more book-more-action\"\n                onClick={(event) => {\n                  this.handleMoreAction(event);\n                }}\n              ></span>\n              <span\n                className=\"icon-love book-love-icon\"\n                onClick={() => {\n                  this.handleLoveBook();\n                }}\n              ></span>\n            </>\n          ) : null}\n        </div>\n\n        {this.props.isOpenActionDialog &&\n        this.props.book.key === this.props.currentBook.key ? (\n          <div className=\"action-dialog-parent\">\n            <ActionDialog {...actionProps} />\n          </div>\n        ) : null}\n      </>\n    );\n  }\n}\nexport default withRouter(BookCardItem);\n","import { connect } from \"react-redux\";\nimport {\n  handleActionDialog,\n  handleReadingBook,\n  handleDragItem,\n  handleDeleteDialog,\n  handleSelectedBooks,\n} from \"../../store/actions\";\nimport { withTranslation } from \"react-i18next\";\nimport Book from \"./component\";\nimport { stateType } from \"../../store\";\n\nconst mapStateToProps = (state: stateType) => {\n  return {\n    isOpenActionDialog: state.book.isOpenActionDialog,\n    dragItem: state.book.dragItem,\n    currentBook: state.book.currentBook,\n    isSelectBook: state.manager.isSelectBook,\n    selectedBooks: state.manager.selectedBooks,\n  };\n};\nconst actionCreator = {\n  handleReadingBook,\n  handleActionDialog,\n  handleDragItem,\n  handleDeleteDialog,\n  handleSelectedBooks,\n};\nexport default connect(\n  mapStateToProps,\n  actionCreator\n)(withTranslation()(Book as any));\n","import React from \"react\";\nimport \"./bookListItem.css\";\nimport RecordLocation from \"../../utils/readUtils/recordLocation\";\nimport { BookItemProps, BookItemState } from \"./interface\";\nimport { Trans } from \"react-i18next\";\nimport AddFavorite from \"../../utils/readUtils/addFavorite\";\nimport { withRouter } from \"react-router-dom\";\nimport RecentBooks from \"../../utils/readUtils/recordRecent\";\nimport StorageUtil from \"../../utils/serviceUtils/storageUtil\";\nimport AddTrash from \"../../utils/readUtils/addTrash\";\nimport EmptyCover from \"../emptyCover\";\nimport BookUtil from \"../../utils/fileUtils/bookUtil\";\nimport FileSaver from \"file-saver\";\nimport localforage from \"localforage\";\nimport { isElectron } from \"react-device-detect\";\nimport toast from \"react-hot-toast\";\nclass BookListItem extends React.Component<BookItemProps, BookItemState> {\n  epub: any;\n  constructor(props: BookItemProps) {\n    super(props);\n    this.state = {\n      isDeleteDialog: false,\n      isFavorite: AddFavorite.getAllFavorite().indexOf(this.props.book.key) > 1,\n    };\n  }\n  componentDidMount() {\n    let filePath = \"\";\n    //控制是否自动打开本书\n    if (isElectron) {\n      const { ipcRenderer } = window.require(\"electron\");\n      filePath = ipcRenderer.sendSync(\"get-file-data\");\n    }\n    if (\n      StorageUtil.getReaderConfig(\"isOpenBook\") === \"yes\" &&\n      RecentBooks.getAllRecent()[0] === this.props.book.key &&\n      !this.props.currentBook.key &&\n      !filePath\n    ) {\n      this.props.handleReadingBook(this.props.book);\n      if (StorageUtil.getReaderConfig(\"isOpenInMain\") === \"yes\") {\n        this.props.history.push(BookUtil.getBookUrl(this.props.book));\n      } else {\n        BookUtil.RedirectBook(this.props.book);\n      }\n    }\n  }\n\n  handleDeleteBook = () => {\n    this.props.handleDeleteDialog(true);\n    this.props.handleReadingBook(this.props.book);\n  };\n  handleEditBook = () => {\n    this.props.handleEditDialog(true);\n    this.props.handleReadingBook(this.props.book);\n  };\n  handleAddShelf = () => {\n    this.props.handleAddDialog(true);\n    this.props.handleReadingBook(this.props.book);\n  };\n  handleLoveBook = () => {\n    AddFavorite.setFavorite(this.props.book.key);\n    this.setState({ isFavorite: true });\n    toast.success(this.props.t(\"Add Successfully\"));\n  };\n  handleCancelLoveBook = () => {\n    AddFavorite.clear(this.props.book.key);\n    this.setState({ isFavorite: false });\n    toast.success(this.props.t(\"Cancel Successfully\"));\n  };\n  handleResoreBook = () => {\n    AddTrash.clear(this.props.currentBook.key);\n    toast.success(this.props.t(\"Restore Successfully\"));\n    this.props.handleFetchBooks();\n  };\n  handleJump = () => {\n    if (this.props.isSelectBook) {\n      this.props.handleSelectedBooks(\n        this.props.isSelected\n          ? this.props.selectedBooks.filter(\n              (item) => item !== this.props.book.key\n            )\n          : [...this.props.selectedBooks, this.props.book.key]\n      );\n      return;\n    }\n    RecentBooks.setRecent(this.props.book.key);\n    this.props.handleReadingBook(this.props.book);\n    if (StorageUtil.getReaderConfig(\"isOpenInMain\") === \"yes\") {\n      this.props.history.push(BookUtil.getBookUrl(this.props.book));\n    } else {\n      BookUtil.RedirectBook(this.props.book);\n    }\n  };\n  render() {\n    let percentage = RecordLocation.getCfi(this.props.book.key)\n      ? RecordLocation.getCfi(this.props.book.key).percentage\n      : 0;\n\n    return (\n      <div className=\"book-list-item-container\">\n        {!this.props.book.cover ||\n        this.props.book.cover === \"noCover\" ||\n        (this.props.book.format === \"PDF\" &&\n          StorageUtil.getReaderConfig(\"isPDFCover\") !== \"yes\") ? (\n          <div\n            className=\"book-item-list-cover\"\n            onClick={() => {\n              this.handleJump();\n            }}\n          >\n            <EmptyCover\n              {...{\n                format: this.props.book.format,\n                title: this.props.book.name,\n                scale: 0.54,\n              }}\n            />\n          </div>\n        ) : (\n          <div className=\"book-item-list-cover\">\n            <img\n              className=\"book-item-list-cover-item\"\n              src={this.props.book.cover}\n              alt=\"\"\n              onClick={() => {\n                this.handleJump();\n              }}\n            />\n          </div>\n        )}\n        {this.props.isSelectBook && this.props.isSelected ? (\n          <span\n            className=\"icon-message book-selected-icon\"\n            style={{ left: \"35px\", bottom: \"5px\" }}\n          ></span>\n        ) : null}\n        <p\n          className=\"book-item-list-title\"\n          onClick={() => {\n            this.handleJump();\n          }}\n        >\n          <span className=\"book-item-list-subtitle\">\n            {this.props.book.name}\n          </span>\n        </p>\n\n        <p className=\"book-item-list-author\">\n          <span className=\"book-item-list-subtitle\">\n            <Trans>\n              {this.props.book.author\n                ? this.props.book.author\n                : \"Unknown Authur\"}\n            </Trans>\n          </span>\n        </p>\n        <p className=\"book-item-list-percentage\">\n          {percentage ? Math.round(percentage * 100) : 0}%\n        </p>\n        {this.props.mode === \"trash\" ? (\n          <div className=\"book-item-list-config\">\n            <span\n              className=\"icon-clockwise list-icon\"\n              onClick={() => {\n                this.handleResoreBook();\n              }}\n            ></span>\n          </div>\n        ) : (\n          <div className=\"book-item-list-config\">\n            {this.state.isFavorite ? (\n              <span\n                className=\"icon-love list-icon\"\n                onClick={() => {\n                  this.handleCancelLoveBook();\n                }}\n                style={{ color: \"#f87356\" }}\n              ></span>\n            ) : (\n              <span\n                className=\"icon-love list-icon\"\n                onClick={() => {\n                  this.handleLoveBook();\n                }}\n              ></span>\n            )}\n\n            <span\n              className=\"icon-shelf list-icon\"\n              onClick={() => {\n                this.handleAddShelf();\n              }}\n            ></span>\n            <span\n              className=\"icon-trash list-icon\"\n              onClick={() => {\n                this.handleDeleteBook();\n              }}\n            ></span>\n            <span\n              className=\"icon-edit list-icon\"\n              onClick={() => {\n                this.handleEditBook();\n              }}\n            ></span>\n            <span\n              className=\"icon-export list-icon\"\n              onClick={() => {\n                localforage\n                  .getItem(this.props.currentBook.key)\n                  .then((result: any) => {\n                    toast.success(this.props.t(\"Export Successfully\"));\n\n                    FileSaver.saveAs(\n                      new Blob([result]),\n                      this.props.currentBook.name +\n                        `.${this.props.currentBook.format.toLocaleLowerCase()}`\n                    );\n                  });\n              }}\n            ></span>\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n\nexport default withRouter(BookListItem);\n","import { connect } from \"react-redux\";\nimport {\n  handleEditDialog,\n  handleDeleteDialog,\n  handleAddDialog,\n  handleReadingBook,\n  handleDragItem,\n  handleFetchBooks,\n  handleSelectedBooks,\n} from \"../../store/actions\";\nimport { withTranslation } from \"react-i18next\";\n\nimport { stateType } from \"../../store\";\nimport BookItem from \"./component\";\nconst mapStateToProps = (state: stateType) => {\n  return {\n    isReading: state.book.isReading,\n    percentage: state.progressPanel.percentage,\n    currentBook: state.book.currentBook,\n    dragItem: state.book.dragItem,\n    mode: state.sidebar.mode,\n    isSelectBook: state.manager.isSelectBook,\n    selectedBooks: state.manager.selectedBooks,\n  };\n};\nconst actionCreator = {\n  handleReadingBook,\n  handleEditDialog,\n  handleDeleteDialog,\n  handleAddDialog,\n  handleDragItem,\n  handleFetchBooks,\n  handleSelectedBooks,\n};\nexport default connect(\n  mapStateToProps,\n  actionCreator\n)(withTranslation()(BookItem as any));\n","import React from \"react\";\nimport RecentBooks from \"../../utils/readUtils/recordRecent\";\nimport \"./bookCoverItem.css\";\nimport { BookCoverProps, BookCoverState } from \"./interface\";\nimport AddFavorite from \"../../utils/readUtils/addFavorite\";\nimport ActionDialog from \"../dialogs/actionDialog\";\nimport StorageUtil from \"../../utils/serviceUtils/storageUtil\";\nimport { withRouter } from \"react-router-dom\";\nimport RecordLocation from \"../../utils/readUtils/recordLocation\";\nimport { isElectron } from \"react-device-detect\";\nimport EmptyCover from \"../emptyCover\";\nimport Parser from \"html-react-parser\";\nimport { Trans } from \"react-i18next\";\nimport BookUtil from \"../../utils/fileUtils/bookUtil\";\nimport toast from \"react-hot-toast\";\ndeclare var window: any;\n\nclass BookCoverItem extends React.Component<BookCoverProps, BookCoverState> {\n  epub: any;\n  constructor(props: BookCoverProps) {\n    super(props);\n    this.state = {\n      isOpenConfig: false,\n      isFavorite:\n        AddFavorite.getAllFavorite().indexOf(this.props.book.key) > -1,\n      left: 0,\n      top: 0,\n    };\n  }\n\n  componentDidMount() {\n    let filePath = \"\";\n    //控制是否自动打开本书\n    if (isElectron) {\n      const { ipcRenderer } = window.require(\"electron\");\n      filePath = ipcRenderer.sendSync(\"get-file-data\");\n    }\n\n    if (\n      StorageUtil.getReaderConfig(\"isOpenBook\") === \"yes\" &&\n      RecentBooks.getAllRecent()[0] === this.props.book.key &&\n      !this.props.currentBook.key &&\n      !filePath\n    ) {\n      this.props.handleReadingBook(this.props.book);\n      if (StorageUtil.getReaderConfig(\"isOpenInMain\") === \"yes\") {\n        this.props.history.push(BookUtil.getBookUrl(this.props.book));\n      } else {\n        BookUtil.RedirectBook(this.props.book);\n      }\n    }\n  }\n\n  handleMoreAction = (event: any) => {\n    event.preventDefault();\n    const e = event || window.event;\n    let x = e.clientX;\n    if (x > document.body.clientWidth - 300 && !this.props.isCollapsed) {\n      x = x - 180;\n    }\n    this.setState(\n      {\n        left: x,\n        top:\n          document.body.clientHeight - e.clientY > 300\n            ? e.clientY\n            : e.clientY - 300,\n      },\n      () => {\n        this.props.handleActionDialog(true);\n        this.props.handleReadingBook(this.props.book);\n      }\n    );\n  };\n  handleDeleteBook = () => {\n    this.props.handleReadingBook(this.props.book);\n    this.props.handleDeleteDialog(true);\n    this.props.handleActionDialog(false);\n  };\n  handleLoveBook = () => {\n    AddFavorite.setFavorite(this.props.book.key);\n    this.setState({ isFavorite: true });\n    toast.success(this.props.t(\"Add Successfully\"));\n  };\n  handleCancelLoveBook = () => {\n    AddFavorite.clear(this.props.book.key);\n    this.setState({ isFavorite: false });\n    toast.success(this.props.t(\"Cancel Successfully\"));\n  };\n  //控制按钮的弹出\n  handleConfig = (mode: boolean) => {\n    this.setState({ isOpenConfig: mode });\n  };\n  handleJump = () => {\n    if (this.props.isSelectBook) {\n      this.props.handleSelectedBooks(\n        this.props.isSelected\n          ? this.props.selectedBooks.filter(\n              (item) => item !== this.props.book.key\n            )\n          : [...this.props.selectedBooks, this.props.book.key]\n      );\n      return;\n    }\n    RecentBooks.setRecent(this.props.book.key);\n    this.props.handleReadingBook(this.props.book);\n    if (StorageUtil.getReaderConfig(\"isOpenInMain\") === \"yes\") {\n      this.props.history.push(BookUtil.getBookUrl(this.props.book));\n    } else {\n      BookUtil.RedirectBook(this.props.book);\n    }\n  };\n  render() {\n    let percentage = RecordLocation.getCfi(this.props.book.key)\n      ? RecordLocation.getCfi(this.props.book.key).percentage\n      : 0;\n    const actionProps = { left: this.state.left, top: this.state.top };\n    return (\n      <>\n        <div\n          className=\"book-list-cover-item\"\n          onMouseOver={() => {\n            this.handleConfig(true);\n          }}\n          onMouseLeave={() => {\n            this.handleConfig(false);\n            this.props.handleActionDialog(false);\n          }}\n          onContextMenu={(event) => {\n            this.handleMoreAction(event);\n          }}\n        >\n          {!this.props.book.cover ||\n          this.props.book.cover === \"noCover\" ||\n          (this.props.book.format === \"PDF\" &&\n            StorageUtil.getReaderConfig(\"isPDFCover\") !== \"yes\") ? (\n            <div\n              className=\"book-cover-item-cover\"\n              onClick={() => {\n                this.handleJump();\n              }}\n            >\n              <EmptyCover\n                {...{\n                  format: this.props.book.format,\n                  title: this.props.book.name,\n                  scale: 1.15,\n                }}\n              />\n            </div>\n          ) : (\n            <img\n              className=\"book-cover-item-cover\"\n              src={this.props.book.cover}\n              alt=\"\"\n              onClick={() => {\n                this.handleJump();\n              }}\n            />\n          )}\n\n          <p className=\"book-cover-item-title\">{this.props.book.name}</p>\n          <p className=\"book-cover-item-author\">\n            <Trans>Author</Trans>:&nbsp;\n            <Trans>{this.props.book.author}</Trans>\n          </p>\n          <p className=\"book-cover-item-author\">\n            <Trans>Publisher</Trans>:&nbsp;\n            <Trans>{this.props.book.publisher}</Trans>\n          </p>\n          <div className=\"book-cover-item-desc\">\n            <Trans>Description</Trans>:&nbsp;\n            {this.props.book.description ? (\n              Parser(this.props.book.description)\n            ) : (\n              <Trans>Empty</Trans>\n            )}\n          </div>\n          {this.state.isFavorite && !this.props.isSelectBook ? (\n            <span\n              className=\"icon-love book-loved-icon\"\n              onClick={() => {\n                this.handleCancelLoveBook();\n              }}\n              style={{ right: \"274px\", bottom: \"25px\" }}\n            ></span>\n          ) : null}\n          {this.props.isSelectBook && this.props.isSelected ? (\n            <span\n              className=\"icon-message book-selected-icon\"\n              style={{ right: \"274px\", bottom: \"25px\" }}\n            ></span>\n          ) : null}\n          {this.state.isOpenConfig && !this.props.isSelectBook ? (\n            <>\n              {this.props.book.format !== \"PDF\" && (\n                <div\n                  className=\"reading-progress-icon\"\n                  style={{ right: \"270px\" }}\n                >\n                  <div style={{ position: \"relative\", left: \"4px\" }}>\n                    {percentage\n                      ? Math.floor(percentage * 100) < 10\n                        ? \"0\" + Math.floor(percentage * 100)\n                        : Math.floor(percentage * 100) === 100\n                        ? \"完\"\n                        : Math.floor(percentage * 100)\n                      : \"00\"}\n                    <span className=\"reading-percentage-char\">%</span>\n                  </div>\n                </div>\n              )}\n              <span\n                className=\"icon-more book-more-action\"\n                onClick={(event) => {\n                  this.handleMoreAction(event);\n                }}\n                style={{ right: \"270px\" }}\n              ></span>\n              <span\n                className=\"icon-love book-love-icon\"\n                onClick={() => {\n                  this.handleLoveBook();\n                }}\n                style={{ right: \"275px\", bottom: \"25px\" }}\n              ></span>\n            </>\n          ) : null}\n        </div>\n        {this.props.isOpenActionDialog &&\n        this.props.book.key === this.props.currentBook.key ? (\n          <ActionDialog {...actionProps} />\n        ) : null}\n      </>\n    );\n  }\n}\nexport default withRouter(BookCoverItem);\n","import { connect } from \"react-redux\";\nimport {\n  handleActionDialog,\n  handleReadingBook,\n  handleDragItem,\n  handleDeleteDialog,\n  handleSelectedBooks,\n} from \"../../store/actions\";\nimport BookCoverItem from \"./component\";\nimport { stateType } from \"../../store\";\nimport { withTranslation } from \"react-i18next\";\n\nconst mapStateToProps = (state: stateType) => {\n  return {\n    isOpenActionDialog: state.book.isOpenActionDialog,\n    isCollapsed: state.sidebar.isCollapsed,\n    dragItem: state.book.dragItem,\n    currentBook: state.book.currentBook,\n    isSelectBook: state.manager.isSelectBook,\n    selectedBooks: state.manager.selectedBooks,\n  };\n};\nconst actionCreator = {\n  handleReadingBook,\n  handleActionDialog,\n  handleDragItem,\n  handleDeleteDialog,\n  handleSelectedBooks,\n};\nexport default connect(\n  mapStateToProps,\n  actionCreator\n)(withTranslation()(BookCoverItem));\n","export const emptyList = [\n  {\n    mode: \"home\",\n    main: \"Empty Library\",\n    sub: \"Click the import button to add books\",\n  },\n  {\n    mode: \"favorite\",\n    main: \"No Favorite Books\",\n    sub: \"Move your mouse on the top of any book, click the heart icon to add it to your favorite books\",\n  },\n  {\n    mode: \"bookmark\",\n    main: \"Empty Bookmark\",\n    sub: \"Move your mouse on the top edge of the reader\",\n  },\n  {\n    mode: \"note\",\n    main: \"Empty Note\",\n    sub: \"Select any text and click the Note button on the popup menu\",\n  },\n  {\n    mode: \"digest\",\n    main: \"Empty Highlight\",\n    sub: \"Select any text and click the Highlight button on the popup menu\",\n  },\n  {\n    mode: \"shelf\",\n    main: \"Empty Shelf\",\n    sub: \"Move your mouse on top of any book, then click the more icon to add the book to the shelf\",\n  },\n\n  {\n    mode: \"trash\",\n    main: \"Empty Recycle Bin\",\n    sub: \"The deleted books will show up here\",\n  },\n];\n","import React from \"react\";\nimport \"./emptyPage.css\";\nimport { emptyList } from \"../../constants/emptyList\";\nimport { Trans } from \"react-i18next\";\nimport { EmptyPageProps, EmptyPageState } from \"./interface\";\nimport StorageUtil from \"../../utils/serviceUtils/storageUtil\";\n\nclass EmptyPage extends React.Component<EmptyPageProps, EmptyPageState> {\n  render() {\n    const renderEmptyList = () => {\n      return emptyList.map((item) => {\n        return (\n          <div\n            className=\"empty-page-info-container\"\n            key={item.mode}\n            style={\n              this.props.mode === item.mode ? {} : { visibility: \"hidden\" }\n            }\n          >\n            <div className=\"empty-page-info-main\">\n              <Trans>{item.main}</Trans>\n            </div>\n            <div className=\"empty-page-info-sub\">\n              <Trans>{item.sub}</Trans>\n            </div>\n          </div>\n        );\n      });\n    };\n    return (\n      <div\n        className=\"empty-page-container\"\n        style={\n          this.props.isCollapsed\n            ? { width: \"calc(100vw - 100px)\", left: \"100px\" }\n            : {}\n        }\n      >\n        <div\n          className=\"empty-illustration-container\"\n          style={{ width: \"calc(100% - 50px)\" }}\n        >\n          <img\n            src={\n              StorageUtil.getReaderConfig(\"appSkin\") === \"night\" ||\n              (StorageUtil.getReaderConfig(\"appSkin\") === \"system\" &&\n                StorageUtil.getReaderConfig(\"isOSNight\") === \"yes\")\n                ? \"./assets/empty_light.svg\"\n                : \"./assets/empty.svg\"\n            }\n            alt=\"\"\n            className=\"empty-page-illustration\"\n          />\n        </div>\n\n        {renderEmptyList()}\n      </div>\n    );\n  }\n}\n\nexport default EmptyPage;\n","import { connect } from \"react-redux\";\nimport { stateType } from \"../../store\";\nimport EmptyPage from \"./component\";\nimport { withTranslation } from \"react-i18next\";\n\nconst mapStateToProps = (state: stateType) => {\n  return {\n    mode: state.sidebar.mode,\n    isCollapsed: state.sidebar.isCollapsed,\n  };\n};\nconst actionCreator = {};\nexport default connect(\n  mapStateToProps,\n  actionCreator\n)(withTranslation()(EmptyPage as any));\n","export const viewMode = [\n  {\n    name: \"Card\",\n    icon: \"grid\",\n    mode: \"card\",\n  },\n  {\n    name: \"List\",\n    icon: \"menu\",\n    mode: \"list\",\n  },\n\n  {\n    name: \"Cover\",\n    icon: \"cover\",\n    mode: \"cover\",\n  },\n];\n","import React from \"react\";\nimport \"./viewMode.css\";\nimport { ViewModeProps, ViewModeState } from \"./interface\";\nimport StorageUtil from \"../../utils/serviceUtils/storageUtil\";\nimport { Tooltip } from \"react-tippy\";\nimport { viewMode } from \"../../constants/viewMode\";\n\nclass ViewMode extends React.Component<ViewModeProps, ViewModeState> {\n  constructor(props: ViewModeProps) {\n    super(props);\n    this.state = {};\n  }\n  handleChange = (mode: string) => {\n    StorageUtil.setReaderConfig(\"viewMode\", mode);\n    this.props.handleFetchList();\n  };\n  render() {\n    return (\n      <div className=\"book-list-view\">\n        {viewMode.map((item) => (\n          <Tooltip\n            key={item.name}\n            title={this.props.t(item.name)}\n            position=\"top\"\n            trigger=\"mouseenter\"\n          >\n            <div\n              className=\"card-list-mode\"\n              onClick={() => {\n                this.handleChange(item.mode);\n              }}\n              style={this.props.viewMode !== item.mode ? { opacity: 0.5 } : {}}\n            >\n              <span className={`icon-${item.icon}`}></span>\n            </div>\n          </Tooltip>\n        ))}\n      </div>\n    );\n  }\n}\n\nexport default ViewMode;\n","import { connect } from \"react-redux\";\nimport { stateType } from \"../../store\";\nimport { withTranslation } from \"react-i18next\";\nimport ViewMode from \"./component\";\nimport { handleFetchList } from \"../../store/actions\";\nconst mapStateToProps = (state: stateType) => {\n  return {\n    viewMode: state.manager.viewMode,\n  };\n};\nconst actionCreator = { handleFetchList };\nexport default connect(\n  mapStateToProps,\n  actionCreator\n)(withTranslation()(ViewMode as any));\n","import React from \"react\";\nimport AddFavorite from \"../../utils/readUtils/addFavorite\";\nimport BookModel from \"../../model/Book\";\nimport { Trans } from \"react-i18next\";\nimport { BookListProps, BookListState } from \"./interface\";\nimport localforage from \"localforage\";\nimport { withRouter } from \"react-router-dom\";\nimport FileSaver from \"file-saver\";\nimport toast from \"react-hot-toast\";\nclass SelectBook extends React.Component<BookListProps, BookListState> {\n  constructor(props: BookListProps) {\n    super(props);\n    this.state = {\n      isOpenDelete: false,\n      favoriteBooks: Object.keys(AddFavorite.getAllFavorite()).length,\n    };\n  }\n\n  render() {\n    return (\n      <div\n        className=\"booklist-manage-container\"\n        style={this.props.isCollapsed ? { left: \"75px\" } : {}}\n      >\n        <span\n          onClick={() => {\n            this.props.handleSelectBook(!this.props.isSelectBook);\n            if (this.props.isSelectBook) {\n              this.props.handleSelectedBooks([]);\n            }\n          }}\n          className=\"book-manage-title\"\n        >\n          <Trans>{this.props.isSelectBook ? \"Cancel\" : \"Select\"}</Trans>\n        </span>\n        {this.props.isSelectBook && (\n          <>\n            <span\n              className=\"book-manage-title\"\n              onClick={() => {\n                this.props.handleAddDialog(true);\n              }}\n            >\n              <Trans>Add to Shelf</Trans>\n            </span>\n            <span\n              className=\"book-manage-title\"\n              onClick={() => {\n                this.props.handleDeleteDialog(true);\n              }}\n            >\n              <Trans>Delete</Trans>\n            </span>\n            <span\n              className=\"book-manage-title\"\n              onClick={() => {\n                this.props.books\n                  .filter(\n                    (item: BookModel) =>\n                      this.props.selectedBooks.indexOf(item.key) > -1\n                  )\n                  .forEach(async (item: BookModel) => {\n                    let result: any = await localforage.getItem(item.key);\n\n                    FileSaver.saveAs(\n                      new Blob([result]),\n                      item.name + `.${item.format.toLocaleLowerCase()}`\n                    );\n                  });\n                this.props.handleSelectBook(!this.props.isSelectBook);\n                if (this.props.isSelectBook) {\n                  this.props.handleSelectedBooks([]);\n                }\n                toast.success(this.props.t(\"Export Successfully\"));\n              }}\n            >\n              <Trans>Export</Trans>\n            </span>\n            <span\n              className=\"book-manage-title\"\n              onClick={() => {\n                if (\n                  this.props.selectedBooks.length === this.props.books.length\n                ) {\n                  this.props.handleSelectedBooks([]);\n                } else {\n                  this.props.handleSelectedBooks(\n                    this.props.books.map((item) => item.key)\n                  );\n                }\n              }}\n            >\n              {this.props.selectedBooks.length === this.props.books.length ? (\n                <Trans>Deselect All</Trans>\n              ) : (\n                <Trans>Select All</Trans>\n              )}\n            </span>{\" \"}\n          </>\n        )}\n      </div>\n    );\n  }\n}\n\nexport default withRouter(SelectBook);\n","import { connect } from \"react-redux\";\nimport {\n  handleDeleteDialog,\n  handleSelectBook,\n  handleAddDialog,\n  handleSelectedBooks,\n} from \"../../store/actions\";\nimport { stateType } from \"../../store\";\nimport { withTranslation } from \"react-i18next\";\nimport SelectBook from \"./component\";\n\nconst mappropsToProps = (state: stateType) => {\n  return {\n    books: state.manager.books,\n    selectedBooks: state.manager.selectedBooks,\n    isCollapsed: state.sidebar.isCollapsed,\n    isSelectBook: state.manager.isSelectBook,\n  };\n};\nconst actionCreator = {\n  handleDeleteDialog,\n  handleSelectBook,\n  handleAddDialog,\n  handleSelectedBooks,\n};\nexport default connect(\n  mappropsToProps,\n  actionCreator\n)(withTranslation()(SelectBook as any));\n","import React from \"react\";\nimport ShelfUtil from \"../../utils/readUtils/shelfUtil\";\nimport { Trans } from \"react-i18next\";\nimport { ShelfChooserProps, ShelfChooserState } from \"./interface\";\nimport localforage from \"localforage\";\nimport DeletePopup from \"../dialogs/deletePopup\";\nimport { withRouter } from \"react-router-dom\";\nimport { backup } from \"../../utils/syncUtils/backupUtil\";\nimport { isElectron } from \"react-device-detect\";\nclass ShelfChooser extends React.Component<\n  ShelfChooserProps,\n  ShelfChooserState\n> {\n  constructor(props: ShelfChooserProps) {\n    super(props);\n    this.state = {\n      shelfIndex: 0,\n      isOpenDelete: false,\n    };\n  }\n\n  //切换书架\n  handleShelfItem = (event: any) => {\n    let index = event.target.value.split(\",\")[1];\n    this.setState({ shelfIndex: index });\n    this.props.handleShelfIndex(index);\n    if (index > 0) {\n      this.props.handleMode(\"shelf\");\n    } else {\n      this.props.handleMode(\"home\");\n    }\n  };\n  handleDeleteShelf = () => {\n    if (this.state.shelfIndex < 1) return;\n    let shelfTitles = Object.keys(ShelfUtil.getShelf());\n    //获取当前书架名\n    let currentShelfTitle = shelfTitles[this.state.shelfIndex];\n    ShelfUtil.removeShelf(currentShelfTitle);\n    this.setState({ shelfIndex: 0 }, () => {\n      this.props.handleShelfIndex(0);\n      this.props.handleMode(\"shelf\");\n    });\n  };\n  renderShelfList = () => {\n    let shelfList = ShelfUtil.getShelf();\n    let shelfTitle = Object.keys(shelfList);\n\n    return shelfTitle.map((item, index) => {\n      return (\n        <option\n          value={[item, index.toString()]}\n          key={index}\n          className=\"add-dialog-shelf-list-option\"\n          selected={this.props.shelfIndex === index ? true : false}\n        >\n          {this.props.t(item === \"New\" ? \"Books\" : item)}\n        </option>\n      );\n    });\n  };\n  handleDeletePopup = (isOpenDelete: boolean) => {\n    this.setState({ isOpenDelete });\n  };\n  render() {\n    if (isElectron) {\n      //兼容之前的版本\n      localforage.getItem(this.props.books[0].key).then((result) => {\n        if (result) {\n          backup(\n            this.props.books,\n            this.props.notes,\n            this.props.bookmarks,\n            false\n          );\n        }\n      });\n    }\n    const deletePopupProps = {\n      mode: \"shelf\",\n      name: Object.keys(ShelfUtil.getShelf())[this.state.shelfIndex],\n      title: \"Delete this shelf\",\n      description: \"This action will clear and remove this shelf\",\n      handleDeletePopup: this.handleDeletePopup,\n      handleDeleteOpearion: this.handleDeleteShelf,\n    };\n\n    return (\n      <>\n        {this.state.isOpenDelete && <DeletePopup {...deletePopupProps} />}\n        <div\n          className=\"booklist-shelf-container\"\n          style={this.props.isCollapsed ? {} : { left: \"calc(50% - 60px)\" }}\n        >\n          <p className=\"general-setting-title\" style={{ display: \"inline\" }}>\n            <Trans>Shelf</Trans>\n          </p>\n          <select\n            className=\"booklist-shelf-list\"\n            onChange={(event: React.ChangeEvent<HTMLSelectElement>) => {\n              this.handleShelfItem(event);\n            }}\n          >\n            {this.renderShelfList()}\n          </select>\n          {this.state.shelfIndex > 0 ? (\n            <span\n              className=\"icon-trash delete-shelf-icon\"\n              onClick={() => {\n                this.handleDeletePopup(true);\n              }}\n            ></span>\n          ) : null}\n        </div>\n      </>\n    );\n  }\n}\n\nexport default withRouter(ShelfChooser);\n","import { connect } from \"react-redux\";\nimport {\n  handleFetchList,\n  handleFetchBooks,\n  handleMode,\n  handleShelfIndex,\n  handleDeleteDialog,\n} from \"../../store/actions\";\nimport { stateType } from \"../../store\";\nimport { withTranslation } from \"react-i18next\";\nimport ShelfChooser from \"./component\";\n\nconst mappropsToProps = (state: stateType) => {\n  return {\n    books: state.manager.books,\n    mode: state.sidebar.mode,\n    bookmarks: state.reader.bookmarks,\n    notes: state.reader.notes,\n    selectedBooks: state.manager.selectedBooks,\n    shelfIndex: state.sidebar.shelfIndex,\n    isCollapsed: state.sidebar.isCollapsed,\n    searchResults: state.manager.searchResults,\n    isSearch: state.manager.isSearch,\n    isSelectBook: state.manager.isSelectBook,\n    isBookSort: state.manager.isBookSort,\n    viewMode: state.manager.viewMode,\n    bookSortCode: state.manager.bookSortCode,\n    noteSortCode: state.manager.noteSortCode,\n  };\n};\nconst actionCreator = {\n  handleFetchList,\n  handleMode,\n  handleShelfIndex,\n  handleDeleteDialog,\n  handleFetchBooks,\n};\nexport default connect(\n  mappropsToProps,\n  actionCreator\n)(withTranslation()(ShelfChooser));\n","import React from \"react\";\nimport \"./booklist.css\";\nimport BookCardItem from \"../../../components/bookCardItem\";\nimport BookListItem from \"../../../components/bookListItem\";\nimport BookCoverItem from \"../../../components/bookCoverItem\";\nimport AddFavorite from \"../../../utils/readUtils/addFavorite\";\nimport RecordRecent from \"../../../utils/readUtils/recordRecent\";\nimport ShelfUtil from \"../../../utils/readUtils/shelfUtil\";\nimport SortUtil from \"../../../utils/readUtils/sortUtil\";\nimport BookModel from \"../../../model/Book\";\nimport { BookListProps, BookListState } from \"./interface\";\nimport StorageUtil from \"../../../utils/serviceUtils/storageUtil\";\nimport localforage from \"localforage\";\nimport Empty from \"../../emptyPage\";\nimport { Redirect, withRouter } from \"react-router-dom\";\nimport ViewMode from \"../../../components/viewMode\";\nimport { backup } from \"../../../utils/syncUtils/backupUtil\";\nimport { isElectron } from \"react-device-detect\";\nimport SelectBook from \"../../../components/selectBook\";\nimport ShelfSelector from \"../../../components/shelfSelector\";\nclass BookList extends React.Component<BookListProps, BookListState> {\n  constructor(props: BookListProps) {\n    super(props);\n    this.state = {\n      favoriteBooks: Object.keys(AddFavorite.getAllFavorite()).length,\n    };\n  }\n  componentWillMount() {\n    if (this.props.mode === \"trash\") {\n      this.props.handleFetchBooks(true);\n    } else {\n      this.props.handleFetchBooks(false);\n    }\n  }\n  componentDidMount() {\n    if (!this.props.books || !this.props.books[0]) {\n      return <Redirect to=\"manager/empty\" />;\n    }\n  }\n\n  handleKeyFilter = (items: any[], arr: string[]) => {\n    let itemArr: any[] = [];\n    arr.forEach((item) => {\n      items.forEach((subItem: any) => {\n        if (subItem.key === item) {\n          itemArr.push(subItem);\n        }\n      });\n    });\n    return itemArr;\n  };\n\n  //获取书架数据\n  handleShelf(items: any, index: number) {\n    //获取书架名\n    if (index < 1) return items;\n    let shelfTitle = Object.keys(ShelfUtil.getShelf());\n    //获取当前书架名\n    let currentShelfTitle = shelfTitle[index];\n    if (!currentShelfTitle) return items;\n    //获取当前书架的图书列表\n    let currentShelfList = ShelfUtil.getShelf()[currentShelfTitle];\n    //根据图书列表获取到图书数据\n    let shelfItems = items.filter((item: { key: number }) => {\n      return currentShelfList.indexOf(item.key) > -1;\n    });\n    return shelfItems;\n  }\n\n  //根据搜索图书index获取到搜索出的图书\n  handleIndexFilter = (items: any, arr: number[]) => {\n    let itemArr: any[] = [];\n    arr.forEach((item) => {\n      items[item] && itemArr.push(items[item]);\n    });\n\n    return itemArr;\n  };\n  renderBookList = () => {\n    //根据不同的场景获取不同的图书数据\n\n    let books = this.props.isSearch //搜索图书\n      ? this.handleIndexFilter(this.props.books, this.props.searchResults)\n      : this.props.shelfIndex > 0 //展示书架\n      ? this.handleIndexFilter(\n          this.handleShelf(this.props.books, this.props.shelfIndex),\n          //返回排序后的图书index\n          SortUtil.sortBooks(this.props.books, this.props.bookSortCode) || []\n        )\n      : this.props.mode === \"favorite\" && !this.props.isBookSort\n      ? this.handleKeyFilter(this.props.books, AddFavorite.getAllFavorite())\n      : this.props.mode === \"favorite\" && this.props.isBookSort\n      ? this.handleIndexFilter(\n          this.handleKeyFilter(this.props.books, AddFavorite.getAllFavorite()),\n          //返回排序后的图书index\n          SortUtil.sortBooks(this.props.books, this.props.bookSortCode) || []\n        )\n      : this.props.isBookSort && this.props.bookSortCode.sort !== 0\n      ? this.handleIndexFilter(\n          this.props.books,\n          //返回排序后的图书index\n          SortUtil.sortBooks(this.props.books, this.props.bookSortCode) || []\n        )\n      : this.handleKeyFilter(\n          this.props.books,\n          this.props.bookSortCode.order === 1\n            ? RecordRecent.getAllRecent()\n            : RecordRecent.getAllRecent().reverse()\n        );\n    if (this.props.mode === \"shelf\" && books.length === 0) {\n      return (\n        <div\n          style={{\n            position: \"fixed\",\n            left: 0,\n            top: 0,\n            width: \"100%\",\n            height: \"100%\",\n            zIndex: -1,\n          }}\n        >\n          <Empty />\n        </div>\n      );\n    }\n    return books.map((item: BookModel, index: number) => {\n      return this.props.viewMode === \"list\" ? (\n        <BookListItem\n          {...{\n            key: item.key,\n            book: item,\n            isSelected: this.props.selectedBooks.indexOf(item.key) > -1,\n          }}\n        />\n      ) : this.props.viewMode === \"card\" ? (\n        <BookCardItem\n          key={item.key}\n          book={item}\n          isSelected={this.props.selectedBooks.indexOf(item.key) > -1}\n        />\n      ) : (\n        <BookCoverItem\n          {...{\n            key: item.key,\n            book: item,\n            isSelected: this.props.selectedBooks.indexOf(item.key) > -1,\n          }}\n        />\n      );\n    });\n  };\n\n  render() {\n    if (\n      (this.state.favoriteBooks === 0 && this.props.mode === \"favorite\") ||\n      !this.props.books ||\n      !this.props.books[0]\n    ) {\n      return <Redirect to=\"/manager/empty\" />;\n    }\n    if (isElectron) {\n      //兼容之前的版本\n      localforage.getItem(this.props.books[0].key).then((result) => {\n        if (result) {\n          backup(\n            this.props.books,\n            this.props.notes,\n            this.props.bookmarks,\n            false\n          );\n        }\n      });\n    }\n\n    StorageUtil.setReaderConfig(\n      \"totalBooks\",\n      this.props.books.length.toString()\n    );\n    return (\n      <>\n        <ViewMode />\n        <SelectBook />\n        {!this.props.isSelectBook && <ShelfSelector />}\n        <div\n          className=\"book-list-container-parent\"\n          style={\n            this.props.isCollapsed\n              ? { width: \"calc(100vw - 70px)\", left: \"70px\" }\n              : {}\n          }\n        >\n          <div className=\"book-list-container\">\n            <ul className=\"book-list-item-box\">{this.renderBookList()}</ul>\n          </div>\n        </div>\n      </>\n    );\n  }\n}\n\nexport default withRouter(BookList);\n","import { connect } from \"react-redux\";\nimport {\n  handleFetchList,\n  handleFetchBooks,\n  handleMode,\n  handleShelfIndex,\n} from \"../../../store/actions\";\nimport { stateType } from \"../../../store\";\nimport { withTranslation } from \"react-i18next\";\nimport BookList from \"./component\";\n\nconst mappropsToProps = (state: stateType) => {\n  return {\n    books: state.manager.books,\n    mode: state.sidebar.mode,\n    bookmarks: state.reader.bookmarks,\n    notes: state.reader.notes,\n    selectedBooks: state.manager.selectedBooks,\n    shelfIndex: state.sidebar.shelfIndex,\n    isCollapsed: state.sidebar.isCollapsed,\n    searchResults: state.manager.searchResults,\n    isSearch: state.manager.isSearch,\n    isSelectBook: state.manager.isSelectBook,\n    isBookSort: state.manager.isBookSort,\n    viewMode: state.manager.viewMode,\n    bookSortCode: state.manager.bookSortCode,\n    noteSortCode: state.manager.noteSortCode,\n  };\n};\nconst actionCreator = {\n  handleFetchList,\n  handleMode,\n  handleShelfIndex,\n  handleFetchBooks,\n};\nexport default connect(\n  mappropsToProps,\n  actionCreator\n)(withTranslation()(BookList as any));\n","import React from \"react\";\nimport \"./booklist.css\";\nimport BookCardItem from \"../../../components/bookCardItem\";\nimport BookCoverItem from \"../../../components/bookCoverItem\";\nimport BookListItem from \"../../../components/bookListItem\";\nimport AddTrash from \"../../../utils/readUtils/addTrash\";\nimport RecordRecent from \"../../../utils/readUtils/recordRecent\";\nimport SortUtil from \"../../../utils/readUtils/sortUtil\";\nimport BookModel from \"../../../model/Book\";\nimport { Trans } from \"react-i18next\";\nimport { BookListProps, BookListState } from \"./interface\";\nimport Empty from \"../../emptyPage\";\nimport { withRouter } from \"react-router-dom\";\nimport ViewMode from \"../../../components/viewMode\";\n\nclass BookList extends React.Component<BookListProps, BookListState> {\n  constructor(props: BookListProps) {\n    super(props);\n    this.state = {};\n  }\n  componentWillMount() {\n    this.props.handleFetchBooks(true);\n  }\n  handleKeyFilter = (items: any[], arr: string[]) => {\n    let itemArr: any[] = [];\n    arr.forEach((item) => {\n      items.forEach((subItem: any) => {\n        if (subItem.key === item) {\n          itemArr.push(subItem);\n        }\n      });\n    });\n\n    return itemArr;\n  };\n\n  //根据搜索图书index获取到搜索出的图书\n  handleIndexFilter = (items: any, arr: number[]) => {\n    let itemArr: any[] = [];\n    arr.forEach((item) => {\n      items[item] && itemArr.push(items[item]);\n    });\n\n    return itemArr;\n  };\n  renderBookList = () => {\n    //根据不同的场景获取不同的图书数据\n    let books = !this.props.isBookSort\n      ? this.handleKeyFilter(this.props.deletedBooks, AddTrash.getAllTrash())\n      : this.props.isBookSort\n      ? this.handleIndexFilter(\n          this.handleKeyFilter(this.props.deletedBooks, AddTrash.getAllTrash()),\n          //返回排序后的图书index\n          SortUtil.sortBooks(\n            this.props.deletedBooks,\n            this.props.bookSortCode\n          ) || []\n        )\n      : this.props.isBookSort\n      ? this.handleIndexFilter(\n          this.props.deletedBooks,\n          //返回排序后的图书index\n          SortUtil.sortBooks(\n            this.props.deletedBooks,\n            this.props.bookSortCode\n          ) || []\n        )\n      : this.handleKeyFilter(\n          this.props.deletedBooks,\n          RecordRecent.getAllRecent()\n        );\n    if (books.length === 0) {\n      return (\n        <div\n          style={{\n            position: \"fixed\",\n            left: 0,\n            top: 0,\n            width: \"100%\",\n            height: \"100%\",\n            zIndex: -1,\n          }}\n        >\n          <Empty />\n        </div>\n      );\n    }\n\n    return books.map((item: BookModel, index: number) => {\n      return this.props.viewMode === \"list\" ? (\n        <BookListItem\n          {...{\n            key: item.key,\n            book: item,\n          }}\n        />\n      ) : this.props.viewMode === \"card\" ? (\n        <BookCardItem\n          key={item.key}\n          book={item}\n          isSelected={this.props.selectedBooks.indexOf(item.key) > -1}\n        />\n      ) : (\n        <BookCoverItem\n          key={item.key}\n          book={item}\n          isSelected={this.props.selectedBooks.indexOf(item.key) > -1}\n        />\n      );\n    });\n  };\n\n  render() {\n    return (\n      <>\n        <ViewMode />\n        <div\n          className=\"booklist-delete-container\"\n          onClick={() => {\n            this.props.handleDeleteDialog(true);\n          }}\n          style={this.props.isCollapsed ? { left: \"calc(50% - 60px)\" } : {}}\n        >\n          <Trans>Delete All Books</Trans>\n        </div>\n\n        <div\n          className=\"book-list-container-parent\"\n          style={\n            this.props.isCollapsed\n              ? { width: \"calc(100vw - 70px)\", left: \"70px\" }\n              : {}\n          }\n        >\n          <div className=\"book-list-container\">\n            <ul className=\"book-list-item-box\">{this.renderBookList()}</ul>\n          </div>\n        </div>\n      </>\n    );\n  }\n}\n\nexport default withRouter(BookList);\n","import { connect } from \"react-redux\";\nimport {\n  handleFetchList,\n  handleFetchBooks,\n  handleMode,\n  handleShelfIndex,\n  handleDeleteDialog,\n} from \"../../../store/actions\";\nimport { stateType } from \"../../../store\";\nimport BookList from \"./component\";\n\nconst mappropsToProps = (state: stateType) => {\n  return {\n    books: state.manager.books,\n    deletedBooks: state.manager.deletedBooks,\n    mode: state.sidebar.mode,\n    isBookSort: state.manager.isBookSort,\n    isCollapsed: state.sidebar.isCollapsed,\n    viewMode: state.manager.viewMode,\n    bookSortCode: state.manager.bookSortCode,\n    noteSortCode: state.manager.noteSortCode,\n    selectedBooks: state.manager.selectedBooks,\n  };\n};\nconst actionCreator = {\n  handleFetchList,\n  handleMode,\n  handleShelfIndex,\n  handleDeleteDialog,\n  handleFetchBooks,\n};\nexport default connect(mappropsToProps, actionCreator)(BookList);\n","import React from \"react\";\nimport \"./cardList.css\";\nimport NoteModel from \"../../../model/Note\";\nimport { Trans } from \"react-i18next\";\nimport { CardListProps, CardListStates } from \"./interface\";\nimport DeleteIcon from \"../../../components/deleteIcon\";\nimport RecordLocation from \"../../../utils/readUtils/recordLocation\";\nimport { withRouter } from \"react-router-dom\";\nimport SortUtil from \"../../../utils/readUtils/sortUtil\";\nimport { Redirect } from \"react-router-dom\";\nimport NoteTag from \"../../../components/noteTag\";\nimport BookUtil from \"../../../utils/fileUtils/bookUtil\";\nimport toast from \"react-hot-toast\";\nimport StorageUtil from \"../../../utils/serviceUtils/storageUtil\";\nimport BookModel from \"../../../model/Book\";\nclass CardList extends React.Component<CardListProps, CardListStates> {\n  constructor(props: CardListProps) {\n    super(props);\n    this.state = { deleteKey: \"\" };\n  }\n  //根据bookkey获取\n  handleBookName = (bookKey: string) => {\n    let { books } = this.props;\n    let bookName = \"\";\n    for (let i = 0; i < this.props.books.length; i++) {\n      if (books[i].key === bookKey) {\n        bookName = books[i].name;\n        break;\n      }\n    }\n    return bookName;\n  };\n  handleShowDelete = (deleteKey: string) => {\n    this.setState({ deleteKey });\n  };\n  handleJump = (cfi: string, bookKey: string, percentage: number) => {\n    let { books } = this.props;\n    let book: BookModel | null = null;\n    //根据bookKey获取指定的book和epub\n    for (let i = 0; i < books.length; i++) {\n      if (books[i].key === bookKey) {\n        book = books[i];\n        break;\n      }\n    }\n    if (!book) {\n      toast(this.props.t(\"Book not exist\"));\n      return;\n    }\n    if (book.format === \"EPUB\") {\n      RecordLocation.recordCfi(bookKey, cfi, percentage);\n    } else if (book.format === \"PDF\") {\n      let bookLocation = JSON.parse(cfi) || {};\n      RecordLocation.recordPDFLocation(book.md5, bookLocation);\n    } else {\n      let bookLocation = JSON.parse(cfi) || {};\n      RecordLocation.recordHtmlLocation(\n        bookKey,\n        bookLocation.text,\n        bookLocation.chapterTitle,\n        bookLocation.count,\n        bookLocation.percentage\n      );\n    }\n\n    if (StorageUtil.getReaderConfig(\"isOpenInMain\") === \"yes\") {\n      this.props.history.push(BookUtil.getBookUrl(book));\n    } else {\n      BookUtil.RedirectBook(book);\n    }\n  };\n  render() {\n    let { cards } = this.props;\n    if (cards.length === 0) {\n      return <Redirect to=\"/manager/empty\" />;\n    }\n\n    let noteObj = SortUtil.sortNotes(\n      cards,\n      this.props.noteSortCode,\n      this.props.books\n    );\n    const renderCardListItem = (title: string) => {\n      return noteObj![title].map((item: NoteModel, index: number) => {\n        const cardProps = {\n          itemKey: item.key,\n          mode: \"notes\",\n        };\n        return (\n          <li\n            className=\"card-list-item\"\n            key={index}\n            onMouseOver={() => {\n              this.handleShowDelete(item.key);\n            }}\n            onMouseLeave={() => {\n              this.handleShowDelete(\"\");\n            }}\n            style={\n              this.props.mode === \"note\" && !this.props.isCollapsed\n                ? { height: \"250px\" }\n                : this.props.mode === \"note\" && this.props.isCollapsed\n                ? { height: \"250px\", width: \"calc(50vw - 70px)\" }\n                : this.props.isCollapsed\n                ? { width: \"calc(50vw - 70px)\" }\n                : {}\n            }\n          >\n            <div className=\"card-list-item-card\">\n              <div style={{ position: \"relative\", bottom: \"25px\" }}>\n                {this.state.deleteKey === item.key ? (\n                  <DeleteIcon {...cardProps} />\n                ) : null}\n              </div>\n              <div className=\"card-list-item-text-parent\">\n                <div className=\"card-list-item-note\">\n                  {this.props.mode === \"note\" ? item.notes : item.text}\n                </div>\n              </div>\n              {this.props.mode === \"note\" ? (\n                <div className=\"card-list-item-text-note\">\n                  <div className=\"card-list-item-text\">{item.text}</div>\n                </div>\n              ) : null}\n\n              <div className=\"card-list-item-citation\">\n                <div className=\"card-list-item-title\">\n                  <Trans>From</Trans>《\n                </div>\n                <div className=\"card-list-item-chapter card-list-item-title\">\n                  {this.handleBookName(item.bookKey)}\n                </div>\n                <div className=\"card-list-item-chapter card-list-item-title\">\n                  》{item.chapter}\n                </div>\n              </div>\n              <div\n                className=\"note-tags\"\n                style={{\n                  position: \"absolute\",\n                  bottom: \"60px\",\n                  height: \"30px\",\n                  overflow: \"hidden\",\n                }}\n              >\n                <NoteTag\n                  {...{\n                    handleTag: () => {},\n                    tag: item.tag || [],\n                    isCard: true,\n                  }}\n                />\n              </div>\n              <div\n                onClick={() => {\n                  this.handleJump(item.cfi, item.bookKey, item.percentage);\n                }}\n              >\n                <div\n                  className=\"card-list-item-show-more\"\n                  style={{ bottom: \"10px\" }}\n                >\n                  {this.props.mode === \"note\" ? (\n                    <Trans>{\"More Notes\"}</Trans>\n                  ) : (\n                    <Trans>{\"Show in the book\"}</Trans>\n                  )}\n\n                  <span className=\"icon-dropdown icon-card-right\"></span>\n                </div>\n              </div>\n            </div>\n          </li>\n        );\n      });\n    };\n    const renderCardList = () => {\n      return Object.keys(noteObj!).map((item, index) => {\n        return (\n          <li className=\"card-page-item\" key={index}>\n            <div className=\"card-page-item-date\">{item}</div>\n            <ul className=\"card-list-container-box\">\n              {renderCardListItem(item)}\n            </ul>\n          </li>\n        );\n      });\n    };\n    return <div className=\"card-list-container\">{renderCardList()}</div>;\n  }\n}\n\nexport default withRouter(CardList);\n","import { connect } from \"react-redux\";\nimport { stateType } from \"../../../store\";\nimport { withTranslation } from \"react-i18next\";\nimport CardList from \"./component\";\nimport { handleReadingBook } from \"../../../store/actions\";\n\nconst mapStateToProps = (state: stateType) => {\n  return {\n    digests: state.reader.digests,\n    isCollapsed: state.sidebar.isCollapsed,\n    currentEpub: state.book.currentEpub,\n    currentBook: state.book.currentBook,\n    bookmarks: state.reader.bookmarks,\n    chapters: state.reader.chapters,\n    books: state.manager.books,\n    noteSortCode: state.manager.noteSortCode,\n  };\n};\nconst actionCreator = {\n  handleReadingBook,\n};\nexport default connect(\n  mapStateToProps,\n  actionCreator\n)(withTranslation()(CardList as any));\n","import React from \"react\";\nimport \"./noteList.css\";\nimport { NoteListProps, NoteListState } from \"./interface\";\nimport CardList from \"../cardList\";\nimport NoteTag from \"../../../components/noteTag\";\nimport NoteModel from \"../../../model/Note\";\nimport Empty from \"../../emptyPage\";\n\nclass NoteList extends React.Component<NoteListProps, NoteListState> {\n  constructor(props: NoteListProps) {\n    super(props);\n    this.state = {\n      tag: [],\n    };\n  }\n  componentWillMount() {\n    this.props.handleFetchNotes();\n  }\n  handleTag = (tag: string[]) => {\n    this.setState({ tag });\n  };\n  handleFilter = (items: any, arr: number[]) => {\n    let itemArr: any[] = [];\n    arr.forEach((item) => {\n      items[item] && itemArr.push(items[item]);\n    });\n    return itemArr;\n  };\n  filterTag = (notes: NoteModel[]) => {\n    let temp: NoteModel[] = [];\n    for (let i = 0; i < notes.length; i++) {\n      let flag = false;\n      for (let j = 0; j < this.state.tag.length; j++) {\n        if (notes[i].tag && notes[i].tag.indexOf(this.state.tag[j]) > -1) {\n          flag = true;\n          break;\n        }\n      }\n      if (flag) {\n        temp.push(notes[i]);\n      }\n    }\n    return temp;\n  };\n  render() {\n    const noteProps = {\n      cards: this.props.isSearch\n        ? this.handleFilter(\n            this.props.notes.filter((item) => item.notes !== \"\"),\n            this.props.searchResults\n          )\n        : this.state.tag.length > 0\n        ? this.filterTag(this.props.notes.filter((item) => item.notes !== \"\"))\n        : this.props.notes.filter((item) => item.notes !== \"\"),\n      mode: \"note\",\n    };\n    return (\n      <div\n        className=\"note-list-container-parent\"\n        style={\n          this.props.isCollapsed\n            ? { width: \"calc(100vw - 70px)\", left: \"70px\" }\n            : {}\n        }\n      >\n        <div className=\"note-tags\">\n          <NoteTag {...{ handleTag: this.handleTag }} />\n        </div>\n        {noteProps.cards.length === 0 ? (\n          <div\n            style={{\n              position: \"fixed\",\n              left: 0,\n              top: 0,\n              width: \"100%\",\n              height: \"100%\",\n              zIndex: -1,\n            }}\n          >\n            {this.state.tag.length === 0 && <Empty />}\n          </div>\n        ) : (\n          <CardList {...noteProps} />\n        )}\n      </div>\n    );\n  }\n}\n\nexport default NoteList;\n","import { connect } from \"react-redux\";\nimport { stateType } from \"../../../store\";\nimport NoteList from \"./component\";\nimport { handleFetchNotes } from \"../../../store/actions\";\n\nconst mapStateToProps = (state: stateType) => {\n  return {\n    notes: state.reader.notes,\n    isSearch: state.manager.isSearch,\n    isCollapsed: state.sidebar.isCollapsed,\n    searchResults: state.manager.searchResults,\n  };\n};\nconst actionCreator = { handleFetchNotes };\nexport default connect(mapStateToProps, actionCreator)(NoteList);\n","import React from \"react\";\nimport \"./digestList.css\";\nimport { DigestListProps, DigestListStates } from \"./interface\";\nimport CardList from \"../cardList\";\nimport NoteTag from \"../../../components/noteTag\";\nimport NoteModel from \"../../../model/Note\";\nimport Empty from \"../../emptyPage\";\n\nclass DigestList extends React.Component<DigestListProps, DigestListStates> {\n  constructor(props: DigestListProps) {\n    super(props);\n    this.state = {\n      tag: [],\n    };\n  }\n  componentWillMount() {\n    this.props.handleFetchNotes();\n  }\n  handleFilter = (items: any, arr: number[]) => {\n    let itemArr: any[] = [];\n    arr.forEach((item) => {\n      items[item] && itemArr.push(items[item]);\n    });\n    return itemArr;\n  };\n  handleTag = (tag: string[]) => {\n    this.setState({ tag });\n  };\n  filterTag = (digests: NoteModel[]) => {\n    let temp: NoteModel[] = [];\n    for (let i = 0; i < digests.length; i++) {\n      let flag = false;\n      for (let j = 0; j < this.state.tag.length; j++) {\n        if (digests[i].tag && digests[i].tag.indexOf(this.state.tag[j]) > -1) {\n          flag = true;\n          break;\n        }\n      }\n      if (flag) {\n        temp.push(digests[i]);\n      }\n    }\n    return temp;\n  };\n  render() {\n    const noteProps = {\n      cards: this.props.isSearch\n        ? this.handleFilter(this.props.digests, this.props.searchResults)\n        : this.state.tag.length > 0\n        ? this.filterTag(this.props.digests)\n        : this.props.digests,\n      mode: \"digest\",\n    };\n\n    return (\n      <div\n        className=\"digest-list-container-parent\"\n        style={\n          this.props.isCollapsed\n            ? { width: \"calc(100vw - 70px)\", left: \"70px\" }\n            : {}\n        }\n      >\n        <div className=\"note-tags\">\n          <NoteTag {...{ handleTag: this.handleTag }} />\n        </div>\n        {noteProps.cards.length === 0 ? (\n          <div\n            style={{\n              position: \"fixed\",\n              left: 0,\n              top: 0,\n              width: \"100%\",\n              height: \"100%\",\n              zIndex: -1,\n            }}\n          >\n            {this.state.tag.length === 0 && <Empty />}\n          </div>\n        ) : (\n          <CardList {...noteProps} />\n        )}\n      </div>\n    );\n  }\n}\n\nexport default DigestList;\n","import { connect } from \"react-redux\";\nimport { stateType } from \"../../../store\";\nimport DigestList from \"./component\";\nimport { handleFetchNotes } from \"../../../store/actions\";\n\nconst mapStateToProps = (state: stateType) => {\n  return {\n    digests: state.reader.digests,\n    isSearch: state.manager.isSearch,\n    isCollapsed: state.sidebar.isCollapsed,\n    searchResults: state.manager.searchResults,\n  };\n};\nconst actionCreator = { handleFetchNotes };\nexport default connect(mapStateToProps, actionCreator)(DigestList);\n","import React from \"react\";\nimport \"./loadingPage.css\";\nimport { LoadingPageProps } from \"./interface\";\nimport StorageUtil from \"../../utils/serviceUtils/storageUtil\";\nimport { Redirect } from \"react-router-dom\";\n\nclass LoadingPage extends React.Component<LoadingPageProps> {\n  render() {\n    if (this.props.books) {\n      return <Redirect to=\"/manager/home\" />;\n    }\n    let arr: number[] = [];\n    for (\n      let i = 0;\n      i < parseInt(StorageUtil.getReaderConfig(\"totalBooks\")) || 0;\n      i++\n    ) {\n      arr.push(i);\n    }\n    if (StorageUtil.getReaderConfig(\"viewMode\") !== \"list\") {\n      const renderLoadingCard = () => {\n        return arr.map((item, index) => {\n          return (\n            <div className=\"loading-page-book\" key={item}>\n              <div\n                className=\"loading-page-cover\"\n                style={{ opacity: `${(index % 7) * 0.2}` }}\n              ></div>\n            </div>\n          );\n        });\n      };\n      return (\n        <div className=\"loading-page-container-parent\">\n          <div className=\"loading-page-container\">{renderLoadingCard()}</div>\n        </div>\n      );\n    } else {\n      const renderLoadingList = () => {\n        return arr.map((item, index) => {\n          return (\n            <div className=\"loading-page-list\" key={item}>\n              <div className=\"loading-page-list-cover\"></div>\n              <div className=\"loading-page-bar\">\n                <div className=\"loading-page-bar1\"></div>\n                <div className=\"loading-page-bar2\"></div>\n                <div className=\"loading-page-bar3\"></div>\n              </div>\n            </div>\n          );\n        });\n      };\n      return (\n        <div className=\"loading-page-container-parent\">\n          <div className=\"loading-page-container\" style={{ marginTop: \"8px\" }}>\n            {renderLoadingList()}\n          </div>\n        </div>\n      );\n    }\n  }\n}\n\nexport default LoadingPage;\n","import { connect } from \"react-redux\";\nimport { stateType } from \"../../store\";\nimport LoadingPage from \"./component\";\n\nconst mapStateToProps = (state: stateType) => {\n  return {\n    books: state.manager.books,\n  };\n};\nconst actionCreator = {};\nexport default connect(mapStateToProps, actionCreator)(LoadingPage);\n","import BookList from \"../containers/lists/bookList\";\nimport DeletedBookList from \"../containers/lists/deletedBookList\";\nimport NoteList from \"../containers/lists/noteList\";\nimport DigestList from \"../containers/lists/digestList\";\nimport EmptyPage from \"../containers/emptyPage\";\nimport LoadingPage from \"../containers/loadingPage\";\n\nexport const routes = [\n  { path: \"/manager/empty\", component: EmptyPage },\n  { path: \"/manager/loading\", component: LoadingPage },\n  { path: \"/manager/note\", component: NoteList },\n  { path: \"/manager/digest\", component: DigestList },\n  { path: \"/manager/home\", component: BookList },\n  { path: \"/manager/favorite\", component: BookList },\n  { path: \"/manager/trash\", component: DeletedBookList },\n];\n","import React from \"react\";\nimport \"./arrow.css\";\nconst Arrow = () => {\n  return (\n    <div className=\"arrow-container\">\n      <svg\n        xmlns=\"http://www.w3.org/2000/svg\"\n        width=\"48\"\n        height=\"48\"\n        viewBox=\"0 0 48 48\"\n        className=\"circle\"\n      >\n        <g\n          transform=\"translate(48 48) rotate(180)\"\n          fill=\"none\"\n          stroke=\"rgba(75,75,75)\"\n          strokeWidth=\"1.5\"\n        >\n          <circle cx=\"24\" cy=\"24\" r=\"24\" stroke=\"none\" />\n          <circle cx=\"24\" cy=\"24\" r=\"23.25\" fill=\"none\" />\n        </g>\n      </svg>\n      <svg\n        xmlns=\"http://www.w3.org/2000/svg\"\n        width=\"7\"\n        height=\"40.5\"\n        viewBox=\"0 0 9 64.5\"\n        className=\"arrow\"\n      >\n        <g transform=\"translate(-799.5 -100)\">\n          <line\n            y2=\"59\"\n            transform=\"translate(804 163.5) rotate(180)\"\n            fill=\"none\"\n            stroke=\"rgba(75,75,75)\"\n            strokeLinecap=\"round\"\n            strokeWidth=\"2\"\n          />\n          <path\n            d=\"M4.5,0,9,8H0Z\"\n            transform=\"translate(799.5 100)\"\n            fill=\"rgba(75,75,75)\"\n          />\n        </g>\n      </svg>\n    </div>\n  );\n};\n\nexport default Arrow;\n","import React from \"react\";\nimport \"./loadingDialog.css\";\nimport Lottie from \"react-lottie\";\nimport animationData from \"../../../assets/lotties/loading.json\";\nimport { Trans } from \"react-i18next\";\nconst defaultOptions = {\n  loop: true,\n  autoplay: true,\n  animationData: animationData,\n  rendererSettings: {\n    preserveAspectRatio: \"xMidYMid slice\",\n  },\n};\nconst LoadingDialog = (props) => {\n  return (\n    <div className=\"loading-dialog\">\n      <div className=\"loading-dialog-title\">\n        <Trans>Please Wait a moment</Trans>\n      </div>\n      <div className=\"loading-animation\">\n        <Lottie options={defaultOptions} height={250} width={280} />\n      </div>\n    </div>\n  );\n};\nexport default LoadingDialog;\n","import React from \"react\";\nimport \"./updateInfo.css\";\nimport { TipDialogProps, TipDialogState } from \"./interface\";\nimport { Trans } from \"react-i18next\";\nimport Lottie from \"react-lottie\";\nimport animationDownload from \"../../../assets/lotties/download.json\";\n\nconst downloadOptions = {\n  loop: true,\n  autoplay: true,\n  animationData: animationDownload,\n  rendererSettings: {\n    preserveAspectRatio: \"xMidYMid slice\",\n  },\n};\n\nclass TipDialog extends React.Component<TipDialogProps, TipDialogState> {\n  constructor(props: TipDialogProps) {\n    super(props);\n    this.state = {};\n  }\n\n  handleClose = () => {\n    this.props.handleTipDialog(false);\n  };\n  render() {\n    return (\n      <div className=\"download-desk-container\">\n        <div\n          className=\"setting-close-container\"\n          onClick={() => {\n            this.handleClose();\n          }}\n        >\n          <span className=\"icon-close tip-close-icon\"></span>\n        </div>\n\n        <div className=\"download-desk-title\">\n          <Trans>Tips</Trans>\n        </div>\n\n        <div className=\"download-desk-feature-container\">\n          <div className=\"download-desk-feature-item\">\n            <Trans>{this.props.tip}</Trans>\n          </div>\n        </div>\n        <div\n          className=\"new-version-open\"\n          onClick={() => {\n            this.handleClose();\n          }}\n          style={{ marginTop: \"-10px\" }}\n        >\n          <Trans>Understand</Trans>\n        </div>\n        <div className=\"download-desk-animation\">\n          <Lottie options={downloadOptions} height={200} width={300} />\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default TipDialog;\n","import { connect } from \"react-redux\";\nimport { handleTipDialog } from \"../../../store/actions\";\nimport TipDialog from \"./component\";\nimport { stateType } from \"../../../store\";\n\nconst mapStateToProps = (state: stateType) => {\n  return { tip: state.manager.tip };\n};\nconst actionCreator = {\n  handleTipDialog,\n};\nexport default connect(mapStateToProps, actionCreator)(TipDialog);\n","import React from \"react\";\nimport Sidebar from \"../../containers/sidebar\";\nimport Header from \"../../containers/header\";\nimport DeleteDialog from \"../../components/dialogs/deleteDialog\";\nimport EditDialog from \"../../components/dialogs/editDialog\";\nimport AddDialog from \"../../components/dialogs/addDialog\";\nimport SortDialog from \"../../components/dialogs/sortDialog\";\nimport AboutDialog from \"../../components/dialogs/aboutDialog\";\nimport BackupDialog from \"../../components/dialogs/backupDialog\";\nimport \"./manager.css\";\nimport { ManagerProps, ManagerState } from \"./interface\";\nimport { Trans } from \"react-i18next\";\nimport StorageUtil from \"../../utils/serviceUtils/storageUtil\";\nimport AddFavorite from \"../../utils/readUtils/addFavorite\";\nimport SettingDialog from \"../../components/dialogs/settingDialog\";\nimport { isMobileOnly } from \"react-device-detect\";\nimport { Route, Switch, Redirect } from \"react-router-dom\";\nimport { routes } from \"../../router/routes\";\nimport Arrow from \"../../components/arrow\";\nimport LoadingDialog from \"../../components/dialogs/loadingDialog\";\nimport TipDialog from \"../../components/dialogs/TipDialog\";\nimport { Toaster } from \"react-hot-toast\";\n\n//判断是否为触控设备\nconst is_touch_device = () => {\n  return \"ontouchstart\" in window;\n};\n\nclass Manager extends React.Component<ManagerProps, ManagerState> {\n  timer!: NodeJS.Timeout;\n  constructor(props: ManagerProps) {\n    super(props);\n    this.state = {\n      totalBooks: parseInt(StorageUtil.getReaderConfig(\"totalBooks\")) || 0,\n      favoriteBooks: Object.keys(AddFavorite.getAllFavorite()).length,\n      isAuthed: false,\n      isError: false,\n      isCopied: false,\n      isUpdated: false,\n      isDrag: false,\n      token: \"\",\n    };\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps: ManagerProps) {\n    if (nextProps.books && this.state.totalBooks !== nextProps.books.length) {\n      this.setState(\n        {\n          totalBooks: nextProps.books.length,\n        },\n        () => {\n          StorageUtil.setReaderConfig(\n            \"totalBooks\",\n            this.state.totalBooks.toString()\n          );\n        }\n      );\n    }\n    if (nextProps.books && nextProps.books.length === 1 && !this.props.books) {\n      this.props.history.push(\"/manager/home\");\n    }\n    if (this.props.mode !== nextProps.mode) {\n      this.setState({\n        favoriteBooks: Object.keys(AddFavorite.getAllFavorite()).length,\n      });\n    }\n  }\n  UNSAFE_componentWillMount() {\n    this.props.handleFetchBooks();\n    this.props.handleFetchNotes();\n    this.props.handleFetchBookmarks();\n    this.props.handleFetchBookSortCode();\n    this.props.handleFetchNoteSortCode();\n    this.props.handleFetchList();\n  }\n  componentDidMount() {\n    if (is_touch_device() && !StorageUtil.getReaderConfig(\"isTouch\")) {\n      StorageUtil.setReaderConfig(\"isTouch\", \"yes\");\n    }\n    this.props.handleReadingState(false);\n  }\n\n  handleDrag = (isDrag: boolean) => {\n    this.setState({ isDrag });\n  };\n  render() {\n    let { books } = this.props;\n    if (isMobileOnly) {\n      return (\n        <>\n          <p className=\"waring-title\">\n            <Trans>Warning</Trans>\n          </p>\n          <div className=\"mobile-warning\">\n            <span>\n              <Trans>\n                For better user experince, please visit this site on a computer\n              </Trans>\n            </span>\n          </div>\n          <div>\n            <img\n              src={\n                StorageUtil.getReaderConfig(\"appSkin\") === \"night\" ||\n                (StorageUtil.getReaderConfig(\"appSkin\") === \"system\" &&\n                  StorageUtil.getReaderConfig(\"isOSNight\") === \"yes\")\n                  ? \"./assets/empty_light.svg\"\n                  : \"./assets/empty.svg\"\n              }\n              alt=\"\"\n              className=\"waring-pic\"\n            />\n          </div>\n        </>\n      );\n    }\n    return (\n      <div\n        className=\"manager\"\n        onDragEnter={() => {\n          !this.props.dragItem && this.handleDrag(true);\n          (\n            document.getElementsByClassName(\"import-from-local\")[0] as any\n          ).style.zIndex = \"50\";\n        }}\n      >\n        {!this.props.dragItem && (\n          <div\n            className=\"drag-background\"\n            onClick={() => {\n              this.props.handleEditDialog(false);\n              this.props.handleDeleteDialog(false);\n              this.props.handleAddDialog(false);\n              this.props.handleTipDialog(false);\n              this.props.handleLoadingDialog(false);\n              this.props.handleNewDialog(false);\n              this.props.handleBackupDialog(false);\n              this.props.handleSetting(false);\n              this.handleDrag(false);\n            }}\n            style={\n              this.props.isSettingOpen ||\n              this.props.isBackup ||\n              this.props.isShowNew ||\n              this.props.isOpenDeleteDialog ||\n              this.props.isOpenEditDialog ||\n              this.props.isOpenAddDialog ||\n              this.props.isTipDialog ||\n              this.props.isShowLoading ||\n              this.state.isDrag\n                ? {}\n                : {\n                    display: \"none\",\n                  }\n            }\n          >\n            {this.state.isDrag && (\n              <div className=\"drag-info\">\n                <Arrow />\n                <p className=\"arrow-text\">\n                  <Trans>Drop your books here</Trans>\n                </p>\n              </div>\n            )}\n          </div>\n        )}\n        <Sidebar />\n        <Header {...{ handleDrag: this.handleDrag }} />\n        {this.props.isOpenDeleteDialog && <DeleteDialog />}\n        {this.props.isOpenEditDialog && <EditDialog />}\n        {this.props.isOpenAddDialog && <AddDialog />}\n        {this.props.isShowLoading && <LoadingDialog />}\n        <Toaster />\n        {this.props.isSortDisplay && <SortDialog />}\n        {this.props.isAboutOpen && <AboutDialog />}\n        {this.props.isBackup && <BackupDialog />}\n        {this.props.isSettingOpen && <SettingDialog />}\n        {this.props.isTipDialog && <TipDialog />}\n        {(!books || books.length === 0) && this.state.totalBooks ? (\n          <Redirect to=\"/manager/loading\" />\n        ) : (\n          <Switch>\n            {routes.map((ele) => (\n              <Route\n                render={() => <ele.component />}\n                key={ele.path}\n                path={ele.path}\n              />\n            ))}\n          </Switch>\n        )}\n      </div>\n    );\n  }\n}\nexport default Manager;\n","import { connect } from \"react-redux\";\nimport {\n  handleFetchBooks,\n  handleFetchBookSortCode,\n  handleFetchNoteSortCode,\n  handleFetchList,\n  handleTipDialog,\n  handleLoadingDialog,\n  handleNewDialog,\n  handleSetting,\n  handleBackupDialog,\n  handleFetchNotes,\n  handleFetchBookmarks,\n  handleEditDialog,\n  handleDeleteDialog,\n  handleAddDialog,\n  handleReadingState,\n} from \"../../store/actions\";\nimport { withTranslation } from \"react-i18next\";\n\nimport \"./manager.css\";\nimport { stateType } from \"../../store\";\nimport Manager from \"./component\";\nimport { withRouter } from \"react-router-dom\";\nconst mapStateToProps = (state: stateType) => {\n  return {\n    books: state.manager.books,\n    notes: state.reader.notes,\n    digests: state.reader.digests,\n    bookmarks: state.reader.bookmarks,\n    isReading: state.book.isReading,\n    mode: state.sidebar.mode,\n    dragItem: state.book.dragItem,\n    shelfIndex: state.sidebar.shelfIndex,\n    isOpenEditDialog: state.book.isOpenEditDialog,\n    isOpenDeleteDialog: state.book.isOpenDeleteDialog,\n    isOpenAddDialog: state.book.isOpenAddDialog,\n    isSettingOpen: state.manager.isSettingOpen,\n    isAboutOpen: state.manager.isAboutOpen,\n    isBookSort: state.manager.isBookSort,\n    isSortDisplay: state.manager.isSortDisplay,\n    isShowLoading: state.manager.isShowLoading,\n    isShowNew: state.manager.isShowNew,\n    isTipDialog: state.manager.isTipDialog,\n    isBackup: state.backupPage.isBackup,\n  };\n};\nconst actionCreator = {\n  handleFetchBooks,\n  handleFetchNotes,\n  handleSetting,\n  handleFetchBookmarks,\n  handleFetchBookSortCode,\n  handleFetchNoteSortCode,\n  handleFetchList,\n  handleEditDialog,\n  handleDeleteDialog,\n  handleAddDialog,\n  handleTipDialog,\n  handleLoadingDialog,\n  handleNewDialog,\n  handleBackupDialog,\n  handleReadingState,\n};\nexport default connect(\n  mapStateToProps,\n  actionCreator\n)(withTranslation()(withRouter(Manager)));\n","import {\n  handleFetchNotes,\n  handleFetchBookmarks,\n  handleFetchChapters,\n  handleFetchPercentage,\n  handleFetchBooks,\n  handleRenderFunc,\n} from \"../../store/actions\";\n\nimport \"./index.css\";\nimport { connect } from \"react-redux\";\nimport { stateType } from \"../../store\";\nimport Reader from \"./component\";\nimport { withTranslation } from \"react-i18next\";\nconst mapStateToProps = (state: stateType) => {\n  return {\n    currentEpub: state.book.currentEpub,\n    currentBook: state.book.currentBook,\n  };\n};\nconst actionCreator = {\n  handleFetchNotes,\n  handleFetchBookmarks,\n  handleFetchChapters,\n  handleFetchPercentage,\n  handleFetchBooks,\n  handleRenderFunc,\n};\nexport default connect(\n  mapStateToProps,\n  actionCreator\n)(withTranslation()(Reader));\n","import React from \"react\";\nimport RecentBooks from \"../../utils/readUtils/recordRecent\";\nimport { EpubReaderProps, EpubReaderState } from \"./interface\";\nimport localforage from \"localforage\";\nimport Reader from \"../../containers/epubReader\";\nimport { withRouter } from \"react-router-dom\";\nimport _ from \"underscore\";\nimport BookUtil from \"../../utils/fileUtils/bookUtil\";\nimport \"../../assets/styles/reset.css\";\nimport toast, { Toaster } from \"react-hot-toast\";\nimport StorageUtil from \"../../utils/serviceUtils/storageUtil\";\n\ndeclare var window: any;\n\nclass EpubReader extends React.Component<EpubReaderProps, EpubReaderState> {\n  epub: any;\n  constructor(props: EpubReaderProps) {\n    super(props);\n    this.state = {};\n  }\n\n  componentWillMount() {\n    if (StorageUtil.getReaderConfig(\"isMergeWord\") === \"yes\") {\n      document\n        .querySelector(\"body\")\n        ?.setAttribute(\"style\", \"background-color: rgba(0,0,0,0)\");\n    }\n    let url = document.location.href.split(\"/\");\n    let key = url[url.length - 1].split(\"?\")[0];\n\n    localforage.getItem(\"books\").then((result: any) => {\n      let book =\n        result[_.findIndex(result, { key })] ||\n        JSON.parse(localStorage.getItem(\"tempBook\") || \"{}\");\n\n      BookUtil.fetchBook(key, false, book.path).then((result) => {\n        if (!result) {\n          toast.error(this.props.t(\"Book not exsits\"));\n          return;\n        }\n        this.props.handleReadingBook(book);\n\n        this.props.handleReadingEpub(window.ePub(result, {}));\n        this.props.handleReadingState(true);\n        RecentBooks.setRecent(key);\n        document.title = book.name + \" - Koodo Reader\";\n      });\n    });\n  }\n\n  render() {\n    if (!this.props.isReading) {\n      return null;\n    }\n    return (\n      <>\n        <Toaster />\n        <Reader />\n      </>\n    );\n  }\n}\nexport default withRouter(EpubReader);\n","import { connect } from \"react-redux\";\nimport {\n  handleActionDialog,\n  handleReadingState,\n  handleReadingBook,\n  handleReadingEpub,\n} from \"../../store/actions\";\nimport EpubReader from \"./component\";\nimport { stateType } from \"../../store\";\nimport { withTranslation } from \"react-i18next\";\n\nconst mapStateToProps = (state: stateType) => {\n  return {\n    isOpenActionDialog: state.book.isOpenActionDialog,\n    currentBook: state.book.currentBook,\n    currentEpub: state.book.currentEpub,\n    isReading: state.book.isReading,\n  };\n};\nconst actionCreator = {\n  handleReadingState,\n  handleReadingBook,\n  handleReadingEpub,\n  handleActionDialog,\n};\nexport default connect(\n  mapStateToProps,\n  actionCreator\n)(withTranslation()(EpubReader));\n","import React from \"react\";\nimport \"./progressPanel.css\";\nimport { Trans } from \"react-i18next\";\nimport { ProgressPanelProps, ProgressPanelState } from \"./interface\";\nimport { Tooltip } from \"react-tippy\";\nimport _ from \"underscore\";\n\nclass ProgressPanel extends React.Component<\n  ProgressPanelProps,\n  ProgressPanelState\n> {\n  constructor(props: ProgressPanelProps) {\n    super(props);\n    this.state = {\n      displayPercentage: this.props.percentage ? this.props.percentage : 0,\n      currentChapter: this.props.currentChapter,\n      currentChapterIndex: 0,\n    };\n  }\n  componentDidMount() {}\n  componentWillReceiveProps(nextProps: ProgressPanelProps) {\n    if (nextProps.currentChapter && nextProps.htmlBook) {\n      this.setState({\n        currentChapter: nextProps.currentChapter,\n        currentChapterIndex:\n          _.findIndex(nextProps.htmlBook.chapters, {\n            label: nextProps.currentChapter,\n          }) > -1\n            ? _.findIndex(nextProps.htmlBook.chapters, {\n                label: nextProps.currentChapter,\n              })\n            : 0,\n        displayPercentage:\n          _.findIndex(nextProps.htmlBook.chapters, {\n            label: nextProps.currentChapter,\n          }) / nextProps.htmlBook.chapters.length,\n      });\n    }\n    if (nextProps.percentage) {\n      this.setState({ displayPercentage: nextProps.percentage });\n    }\n  }\n\n  onProgressChange = (event: any) => {\n    const percentage = event.target.value / 100;\n    if (this.props.htmlBook.chapters.length > 0) {\n      this.props.htmlBook.rendition.goToChapter(\n        this.props.htmlBook.chapters[\n          Math.floor(this.props.htmlBook.chapters.length * percentage)\n        ].label\n      );\n    }\n  };\n  //使进度百分比随拖动实时变化\n  onProgressInput = (event: any) => {\n    this.setState({ displayPercentage: event.target.value / 100 });\n  };\n  nextChapter = () => {\n    if (this.props.htmlBook.chapters.length > 0) {\n      this.props.htmlBook.rendition.goToChapter(\n        this.props.htmlBook.chapters[\n          _.findIndex(this.props.htmlBook.chapters, {\n            label: this.props.currentChapter,\n          }) <\n          this.props.htmlBook.chapters.length - 1\n            ? _.findIndex(this.props.htmlBook.chapters, {\n                label: this.props.currentChapter,\n              }) + 1\n            : this.props.htmlBook.chapters.length - 1\n        ].label\n      );\n    }\n  };\n  prevChapter = () => {\n    if (this.props.htmlBook.chapters.length > 0) {\n      this.props.htmlBook.rendition.goToChapter(\n        this.props.htmlBook.chapters[\n          _.findIndex(this.props.htmlBook.chapters, {\n            label: this.props.currentChapter,\n          }) > 0\n            ? _.findIndex(this.props.htmlBook.chapters, {\n                label: this.props.currentChapter,\n              }) - 1\n            : 0\n        ].label\n      );\n    }\n  };\n  handleJumpChapter = (event: any) => {\n    if (this.props.htmlBook.chapters.length > 0) {\n      this.props.htmlBook.rendition.goToChapter(\n        this.props.htmlBook.chapters[event.target.value].label\n      );\n    }\n  };\n  render() {\n    if (!this.props.htmlBook) {\n      return <div className=\"progress-panel\">Loading</div>;\n    }\n\n    return (\n      <div className=\"progress-panel\">\n        <p className=\"progress-text\" style={{ marginTop: 10 }}>\n          <span>\n            <Trans>Progress</Trans>:{\" \"}\n            {Math.round(\n              this.state.displayPercentage > 1\n                ? 100\n                : this.state.displayPercentage * 100\n            )}\n            %&nbsp;&nbsp;&nbsp;\n          </span>\n        </p>\n\n        <p className=\"progress-text\" style={{ marginTop: 0 }}>\n          <Trans>Chapters</Trans>\n          <input\n            type=\"text\"\n            name=\"jumpChapter\"\n            id=\"jumpChapter\"\n            onBlur={(event) => {\n              this.handleJumpChapter(event);\n            }}\n            defaultValue={this.state.currentChapterIndex}\n          />\n          <span>/ {this.props.htmlBook.chapters.length}</span>\n        </p>\n        <div>\n          <input\n            className=\"input-progress\"\n            defaultValue={Math.round(this.state.displayPercentage * 100)}\n            type=\"range\"\n            max=\"100\"\n            min=\"0\"\n            step=\"1\"\n            onMouseUp={(event) => {\n              this.onProgressChange(event);\n            }}\n            onTouchEnd={(event) => {\n              this.onProgressChange(event);\n            }}\n            onChange={(event) => {\n              this.onProgressInput(event);\n            }}\n            style={{ width: 300, left: 50, top: 73 }}\n          />\n        </div>\n\n        <div\n          className=\"previous-chapter\"\n          onClick={() => {\n            this.prevChapter();\n          }}\n        >\n          <Tooltip\n            title={this.props.t(\"Prev Chapter\")}\n            position=\"top\"\n            trigger=\"mouseenter\"\n          >\n            <span className=\"icon-dropdown previous-chapter-icon\"> </span>\n          </Tooltip>\n        </div>\n\n        <div\n          className=\"next-chapter\"\n          onClick={() => {\n            this.nextChapter();\n          }}\n        >\n          <Tooltip\n            title={this.props.t(\"Next Chapter\")}\n            position=\"top\"\n            trigger=\"mouseenter\"\n          >\n            <span className=\"icon-dropdown next-chapter-icon\"></span>\n          </Tooltip>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default ProgressPanel;\n","import { connect } from \"react-redux\";\nimport { stateType } from \"../../../store\";\nimport { withTranslation } from \"react-i18next\";\nimport ProgressPanel from \"./component\";\nconst mapStateToProps = (state: stateType) => {\n  return {\n    currentEpub: state.book.currentEpub,\n    currentBook: state.book.currentBook,\n    isReading: state.book.isReading,\n    percentage: state.progressPanel.percentage,\n    currentChapter: state.reader.currentChapter,\n    htmlBook: state.reader.htmlBook,\n    renderFunc: state.book.renderFunc,\n  };\n};\nconst actionCreator = {};\nexport default connect(\n  mapStateToProps,\n  actionCreator\n)(withTranslation()(ProgressPanel as any));\n","import { connect } from \"react-redux\";\nimport {\n  handleActionDialog,\n  handleReadingState,\n  handleReadingBook,\n  handleReadingEpub,\n  handleHtmlBook,\n  handleRenderFunc,\n  handleFetchBooks,\n  handleCurrentChapter,\n  handleFetchNotes,\n  handleFetchBookmarks,\n  handleFetchChapters,\n  handleFetchPercentage,\n} from \"../../store/actions\";\nimport Viewer from \"./component\";\nimport { stateType } from \"../../store\";\nimport { withTranslation } from \"react-i18next\";\n\nconst mapStateToProps = (state: stateType) => {\n  return {\n    isOpenActionDialog: state.book.isOpenActionDialog,\n    currentBook: state.book.currentBook,\n    isReading: state.book.isReading,\n    htmlBook: state.reader.htmlBook,\n    books: state.manager.books,\n  };\n};\nconst actionCreator = {\n  handleReadingState,\n  handleReadingBook,\n  handleReadingEpub,\n  handleActionDialog,\n  handleHtmlBook,\n  handleRenderFunc,\n  handleFetchBooks,\n  handleCurrentChapter,\n  handleFetchNotes,\n  handleFetchBookmarks,\n  handleFetchChapters,\n  handleFetchPercentage,\n};\nexport default connect(\n  mapStateToProps,\n  actionCreator\n)(withTranslation()(Viewer as any));\n","import React from \"react\";\nimport SettingPanel from \"../../containers/panels/settingPanel\";\nimport NavigationPanel from \"../../containers/panels/navigationPanel\";\nimport OperationPanel from \"../../containers/panels/operationPanel\";\nimport { Toaster } from \"react-hot-toast\";\nimport ProgressPanel from \"../../containers/panels/htmlProgressPanel\";\nimport { ReaderProps, ReaderState } from \"./interface\";\nimport StorageUtil from \"../../utils/serviceUtils/storageUtil\";\nimport ReadingTime from \"../../utils/readUtils/readingTime\";\nimport Viewer from \"../../containers/htmlViewer\";\nimport _ from \"underscore\";\nimport localforage from \"localforage\";\nimport RecordLocation from \"../../utils/readUtils/recordLocation\";\n\nclass Reader extends React.Component<ReaderProps, ReaderState> {\n  messageTimer!: NodeJS.Timeout;\n  tickTimer!: NodeJS.Timeout;\n  rendition: any;\n\n  constructor(props: ReaderProps) {\n    super(props);\n    this.state = {\n      isOpenRightPanel:\n        StorageUtil.getReaderConfig(\"isSettingLocked\") === \"yes\" ? true : false,\n      isOpenTopPanel: false,\n      isOpenBottomPanel: false,\n      hoverPanel: \"\",\n      isOpenLeftPanel:\n        StorageUtil.getReaderConfig(\"isNavLocked\") === \"yes\" ? true : false,\n      rendition: null,\n      scale: StorageUtil.getReaderConfig(\"scale\") || 1,\n      margin: parseInt(StorageUtil.getReaderConfig(\"margin\")) || 30,\n      time: ReadingTime.getTime(this.props.currentBook.key),\n      isTouch: StorageUtil.getReaderConfig(\"isTouch\") === \"yes\",\n      isPreventTrigger:\n        StorageUtil.getReaderConfig(\"isPreventTrigger\") === \"yes\",\n      readerMode: StorageUtil.getReaderConfig(\"readerMode\") || \"double\",\n    };\n  }\n  componentDidMount() {\n    if (StorageUtil.getReaderConfig(\"isMergeWord\") === \"yes\") {\n      document\n        .querySelector(\"body\")\n        ?.setAttribute(\"style\", \"background-color: rgba(0,0,0,0)\");\n    }\n  }\n  componentWillMount() {\n    let url = document.location.href.split(\"/\");\n    let key = url[url.length - 1].split(\"?\")[0];\n    this.props.handleFetchBooks();\n    localforage.getItem(\"books\").then((result: any) => {\n      let book;\n      //兼容在主窗口打开\n      if (this.props.currentBook.key) {\n        book = this.props.currentBook;\n      } else {\n        book =\n          result[_.findIndex(result, { key })] ||\n          JSON.parse(localStorage.getItem(\"tempBook\") || \"{}\");\n      }\n      this.props.handleReadingBook(book);\n      this.props.handleFetchPercentage(book);\n    });\n  }\n  //进入阅读器\n  handleEnterReader = (position: string) => {\n    //控制上下左右的菜单的显示\n    switch (position) {\n      case \"right\":\n        this.setState({\n          isOpenRightPanel: this.state.isOpenRightPanel ? false : true,\n        });\n        break;\n      case \"left\":\n        this.setState({\n          isOpenLeftPanel: this.state.isOpenLeftPanel ? false : true,\n        });\n        break;\n      case \"top\":\n        this.setState({\n          isOpenTopPanel: this.state.isOpenTopPanel ? false : true,\n        });\n        break;\n      case \"bottom\":\n        this.setState({\n          isOpenBottomPanel: this.state.isOpenBottomPanel ? false : true,\n        });\n        break;\n      default:\n        break;\n    }\n  };\n  //退出阅读器\n  handleLeaveReader = (position: string) => {\n    //控制上下左右的菜单的显示\n    switch (position) {\n      case \"right\":\n        if (StorageUtil.getReaderConfig(\"isSettingLocked\") === \"yes\") {\n          break;\n        } else {\n          this.setState({ isOpenRightPanel: false });\n          break;\n        }\n\n      case \"left\":\n        if (StorageUtil.getReaderConfig(\"isNavLocked\") === \"yes\") {\n          break;\n        } else {\n          this.setState({ isOpenLeftPanel: false });\n          break;\n        }\n      case \"top\":\n        this.setState({ isOpenTopPanel: false });\n        break;\n      case \"bottom\":\n        this.setState({ isOpenBottomPanel: false });\n        break;\n      default:\n        break;\n    }\n  };\n\n  render() {\n    const renditionProps = {\n      rendition: this.state.rendition,\n      handleLeaveReader: this.handleLeaveReader,\n      handleEnterReader: this.handleEnterReader,\n      isShow:\n        this.state.isOpenLeftPanel ||\n        this.state.isOpenTopPanel ||\n        this.state.isOpenBottomPanel ||\n        this.state.isOpenRightPanel,\n    };\n    return (\n      <div className=\"viewer\">\n        {StorageUtil.getReaderConfig(\"isHidePageButton\") !== \"yes\" && (\n          <>\n            <div\n              className=\"previous-chapter-single-container\"\n              onClick={async () => {\n                this.props.htmlBook.rendition.prev();\n                let position = this.props.htmlBook.rendition.getPosition();\n\n                RecordLocation.recordHtmlLocation(\n                  this.props.currentBook.key,\n                  position.text,\n                  position.chapterTitle,\n                  position.count,\n                  position.percentage\n                );\n              }}\n            >\n              <span className=\"icon-dropdown previous-chapter-single\"></span>\n            </div>\n            <div\n              className=\"next-chapter-single-container\"\n              onClick={async () => {\n                this.props.htmlBook.rendition.next();\n                let position = this.props.htmlBook.rendition.getPosition();\n                RecordLocation.recordHtmlLocation(\n                  this.props.currentBook.key,\n                  position.text,\n                  position.chapterTitle,\n                  position.count,\n                  position.percentage\n                );\n              }}\n            >\n              <span className=\"icon-dropdown next-chapter-single\"></span>\n            </div>\n          </>\n        )}\n        {StorageUtil.getReaderConfig(\"isHideMenuButton\") !== \"yes\" && (\n          <div\n            className=\"reader-setting-icon-container\"\n            onClick={() => {\n              this.handleEnterReader(\"left\");\n              this.handleEnterReader(\"right\");\n              this.handleEnterReader(\"bottom\");\n              this.handleEnterReader(\"top\");\n            }}\n          >\n            <span className=\"icon-grid reader-setting-icon\"></span>\n          </div>\n        )}\n        <Toaster />\n\n        <div\n          className=\"left-panel\"\n          onMouseEnter={() => {\n            if (\n              this.state.isTouch ||\n              this.state.isOpenLeftPanel ||\n              this.state.isPreventTrigger\n            ) {\n              this.setState({ hoverPanel: \"left\" });\n              return;\n            }\n            this.handleEnterReader(\"left\");\n          }}\n          onMouseLeave={() => {\n            this.setState({ hoverPanel: \"\" });\n          }}\n          style={this.state.hoverPanel === \"left\" ? { opacity: 0.5 } : {}}\n          onClick={() => {\n            this.handleEnterReader(\"left\");\n          }}\n        >\n          <span className=\"icon-grid panel-icon\"></span>\n        </div>\n        <div\n          className=\"right-panel\"\n          onMouseEnter={() => {\n            if (\n              this.state.isTouch ||\n              this.state.isOpenRightPanel ||\n              this.state.isPreventTrigger\n            ) {\n              this.setState({ hoverPanel: \"right\" });\n              return;\n            }\n            this.handleEnterReader(\"right\");\n          }}\n          onMouseLeave={() => {\n            this.setState({ hoverPanel: \"\" });\n          }}\n          style={this.state.hoverPanel === \"right\" ? { opacity: 0.5 } : {}}\n          onClick={() => {\n            this.handleEnterReader(\"right\");\n          }}\n        >\n          <span className=\"icon-grid panel-icon\"></span>\n        </div>\n        <div\n          className=\"top-panel\"\n          onMouseEnter={() => {\n            if (\n              this.state.isTouch ||\n              this.state.isOpenTopPanel ||\n              this.state.isPreventTrigger\n            ) {\n              this.setState({ hoverPanel: \"top\" });\n              return;\n            }\n            this.handleEnterReader(\"top\");\n          }}\n          style={this.state.hoverPanel === \"top\" ? { opacity: 0.5 } : {}}\n          onMouseLeave={() => {\n            this.setState({ hoverPanel: \"\" });\n          }}\n          onClick={() => {\n            this.handleEnterReader(\"top\");\n          }}\n        >\n          <span className=\"icon-grid panel-icon\"></span>\n        </div>\n        <div\n          className=\"bottom-panel\"\n          onMouseEnter={() => {\n            if (\n              this.state.isTouch ||\n              this.state.isOpenBottomPanel ||\n              this.state.isPreventTrigger\n            ) {\n              this.setState({ hoverPanel: \"bottom\" });\n              return;\n            }\n            this.handleEnterReader(\"bottom\");\n          }}\n          style={this.state.hoverPanel === \"bottom\" ? { opacity: 0.5 } : {}}\n          onMouseLeave={() => {\n            this.setState({ hoverPanel: \"\" });\n          }}\n          onClick={() => {\n            this.handleEnterReader(\"bottom\");\n          }}\n        >\n          <span className=\"icon-grid panel-icon\"></span>\n        </div>\n        {this.props.currentBook.key && <Viewer {...renditionProps} />}\n        <div\n          className=\"setting-panel-container\"\n          onMouseLeave={(event) => {\n            this.handleLeaveReader(\"right\");\n          }}\n          style={\n            this.state.isOpenRightPanel\n              ? {}\n              : {\n                  transform: \"translateX(309px)\",\n                }\n          }\n        >\n          <SettingPanel />\n        </div>\n        <div\n          className=\"navigation-panel-container\"\n          onMouseLeave={(event) => {\n            this.handleLeaveReader(\"left\");\n          }}\n          style={\n            this.state.isOpenLeftPanel\n              ? {}\n              : {\n                  transform: \"translateX(-309px)\",\n                }\n          }\n        >\n          <NavigationPanel {...{ time: this.state.time }} />\n        </div>\n        <div\n          className=\"progress-panel-container\"\n          onMouseLeave={(event) => {\n            this.handleLeaveReader(\"bottom\");\n          }}\n          style={\n            this.state.isOpenBottomPanel\n              ? {}\n              : {\n                  transform: \"translateY(110px)\",\n                }\n          }\n        >\n          <ProgressPanel {...{ time: this.state.time }} />\n        </div>\n        <div\n          className=\"operation-panel-container\"\n          onMouseLeave={(event) => {\n            this.handleLeaveReader(\"top\");\n          }}\n          style={\n            this.state.isOpenTopPanel\n              ? {}\n              : {\n                  transform: \"translateY(-110px)\",\n                }\n          }\n        >\n          <OperationPanel {...{ time: this.state.time }} />\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Reader;\n","import {\n  handleFetchNotes,\n  handleFetchBookmarks,\n  handleFetchChapters,\n  handleFetchBooks,\n  handleReadingBook,\n  handleFetchPercentage,\n} from \"../../store/actions\";\nimport { connect } from \"react-redux\";\nimport { stateType } from \"../../store\";\nimport Reader from \"./component\";\nimport { withTranslation } from \"react-i18next\";\n\nconst mapStateToProps = (state: stateType) => {\n  return {\n    currentEpub: state.book.currentEpub,\n    currentBook: state.book.currentBook,\n    percentage: state.progressPanel.percentage,\n    htmlBook: state.reader.htmlBook,\n  };\n};\nconst actionCreator = {\n  handleFetchNotes,\n  handleFetchBookmarks,\n  handleFetchChapters,\n  handleFetchBooks,\n  handleReadingBook,\n  handleFetchPercentage,\n};\nexport default connect(\n  mapStateToProps,\n  actionCreator\n)(withTranslation()(Reader));\n","import React from \"react\";\nimport \"./style.css\";\nimport { withRouter } from \"react-router-dom\";\nimport { stateType } from \"../../store\";\nimport { connect } from \"react-redux\";\nimport { handleReadingState } from \"../../store/actions\";\nimport { isElectron } from \"react-device-detect\";\n\nconst BackToMain = (props: any) => {\n  return (\n    <div\n      className=\"back-main-container\"\n      onClick={() => {\n        if (isElectron) {\n          if (\n            window\n              .require(\"electron\")\n              .ipcRenderer.sendSync(\"check-main-open\", \"ping\")\n          ) {\n            window\n              .require(\"electron\")\n              .ipcRenderer.invoke(\"focus-on-main\", \"ping\");\n            window.close();\n          } else {\n            window\n              .require(\"electron\")\n              .ipcRenderer.invoke(\"create-new-main\", \"ping\");\n            window.close();\n          }\n        } else {\n          props.history.push(\"/manager/home\");\n          document.title = \"Koodo Reader\";\n          props.handleReadingState(false);\n        }\n      }}\n      style={document.URL.indexOf(\"djvu\") > -1 ? { bottom: \"60px\" } : {}}\n    >\n      <span className=\"icon-home back-home\"></span>\n    </div>\n  );\n};\nconst mapStateToProps = (state: stateType) => {\n  return {};\n};\nconst actionCreator = { handleReadingState };\nexport default connect(mapStateToProps, actionCreator)(withRouter(BackToMain));\n","import React from \"react\";\nimport RecentBooks from \"../../utils/readUtils/recordRecent\";\nimport { ViewerProps, ViewerState } from \"./interface\";\nimport localforage from \"localforage\";\nimport { withRouter } from \"react-router-dom\";\nimport _ from \"underscore\";\nimport BookUtil from \"../../utils/fileUtils/bookUtil\";\nimport { toast } from \"react-hot-toast\";\nimport BackToMain from \"../../components/backToMain\";\nimport { djvuMouseEvent } from \"../../utils/serviceUtils/mouseEvent\";\n\ndeclare var window: any;\n\nclass Viewer extends React.Component<ViewerProps, ViewerState> {\n  epub: any;\n  constructor(props: ViewerProps) {\n    super(props);\n    this.state = {};\n  }\n\n  componentDidMount() {\n    let url = document.location.href.split(\"/\");\n    let key = url[url.length - 1].split(\"?\")[0];\n\n    localforage.getItem(\"books\").then((result: any) => {\n      let book;\n      //兼容在主窗口打开\n      if (this.props.currentBook.key) {\n        book = this.props.currentBook;\n      } else {\n        book =\n          result[_.findIndex(result, { key })] ||\n          JSON.parse(localStorage.getItem(\"tempBook\") || \"{}\");\n      }\n      BookUtil.fetchBook(key, true, book.path).then((result) => {\n        if (!result) {\n          toast.error(this.props.t(\"Book not exsits\"));\n          return;\n        }\n        this.props.handleReadingBook(book);\n        this.handleDjvu(result as ArrayBuffer);\n        this.props.handleReadingState(true);\n        RecentBooks.setRecent(key);\n        document.title = book.name + \" - Koodo Reader\";\n      });\n    });\n    document\n      .querySelector(\".ebook-viewer\")\n      ?.setAttribute(\"style\", \"height:100vh\");\n  }\n\n  handleDjvu = async (result: ArrayBuffer) => {\n    setTimeout(() => {\n      var ViewerInstance = new window.DjVu.Viewer();\n      ViewerInstance.render(document.querySelector(\".ebook-viewer\"));\n      ViewerInstance.loadDocument(result);\n      djvuMouseEvent();\n    }, 100);\n  };\n\n  render() {\n    return (\n      <div>\n        <div className=\"ebook-viewer\" id=\"page-area\">\n          Loading\n        </div>\n        <BackToMain />\n      </div>\n    );\n  }\n}\nexport default withRouter(Viewer as any);\n","import { connect } from \"react-redux\";\nimport {\n  handleActionDialog,\n  handleReadingState,\n  handleReadingBook,\n  handleReadingEpub,\n} from \"../../store/actions\";\nimport Viewer from \"./component\";\nimport { stateType } from \"../../store\";\nimport { withTranslation } from \"react-i18next\";\n\nconst mapStateToProps = (state: stateType) => {\n  return {\n    isOpenActionDialog: state.book.isOpenActionDialog,\n    currentBook: state.book.currentBook,\n    isReading: state.book.isReading,\n  };\n};\nconst actionCreator = {\n  handleReadingState,\n  handleReadingBook,\n  handleReadingEpub,\n  handleActionDialog,\n};\nexport default connect(\n  mapStateToProps,\n  actionCreator\n)(withTranslation()(Viewer as any));\n","import React from \"react\";\nimport RecentBooks from \"../../utils/readUtils/recordRecent\";\nimport { ViewerProps, ViewerState } from \"./interface\";\nimport localforage from \"localforage\";\nimport { withRouter } from \"react-router-dom\";\nimport _ from \"underscore\";\nimport BookUtil from \"../../utils/fileUtils/bookUtil\";\nimport BackToMain from \"../../components/backToMain\";\nimport PopupMenu from \"../../components/popups/popupMenu\";\nimport { Toaster } from \"react-hot-toast\";\nimport { handleLinkJump } from \"../../utils/readUtils/linkUtil\";\nimport { pdfMouseEvent } from \"../../utils/serviceUtils/mouseEvent\";\nclass Viewer extends React.Component<ViewerProps, ViewerState> {\n  epub: any;\n  constructor(props: ViewerProps) {\n    super(props);\n    this.state = {\n      href: \"\",\n      title: \"\",\n      cfiRange: null,\n      contents: null,\n      rect: null,\n      pageWidth: 0,\n      pageHeight: 0,\n      loading: true,\n    };\n  }\n  componentWillMount() {\n    this.props.handleFetchBookmarks();\n    this.props.handleFetchNotes();\n    this.props.handleFetchBooks();\n  }\n  componentDidMount() {\n    let url = document.location.href.split(\"/\");\n    let key = url[url.length - 1].split(\"?\")[0];\n    localforage.getItem(\"books\").then((result: any) => {\n      let book;\n      if (this.props.currentBook.key) {\n        book = this.props.currentBook;\n      } else {\n        book =\n          result[_.findIndex(result, { key })] ||\n          JSON.parse(localStorage.getItem(\"tempBook\") || \"{}\");\n      }\n\n      document.title = book.name + \" - Koodo Reader\";\n      this.props.handleReadingState(true);\n      RecentBooks.setRecent(key);\n      this.props.handleReadingBook(book);\n      this.setState({ title: book.name + \" - Koodo Reader\" });\n      this.setState({ href: BookUtil.getPDFUrl(book) });\n    });\n    document\n      .querySelector(\".ebook-viewer\")\n      ?.setAttribute(\"style\", \"height:100%\");\n    let pageArea = document.getElementById(\"page-area\");\n    if (!pageArea) return;\n    let iframe = pageArea.getElementsByTagName(\"iframe\")[0];\n    if (!iframe) return;\n    iframe.onload = () => {\n      let doc: any =\n        iframe.contentWindow || iframe.contentDocument?.defaultView;\n      this.setState({ loading: false });\n      pdfMouseEvent();\n      doc.document.addEventListener(\"click\", (event: any) => {\n        event.preventDefault();\n        handleLinkJump(event);\n      });\n\n      doc.document.addEventListener(\"mouseup\", () => {\n        if (!doc!.getSelection()) return;\n        var rect = doc!.getSelection()!.getRangeAt(0).getBoundingClientRect();\n        this.setState({\n          rect,\n          pageWidth: doc.document.body.scrollWidth,\n          pageHeight: doc.document.body.scrollHeight,\n        });\n        // iWin.getSelection() && showHighlight(getHightlightCoords());\n      });\n    };\n  }\n\n  render() {\n    return (\n      <div className=\"ebook-viewer\" id=\"page-area\">\n        {!this.state.loading && (\n          <PopupMenu\n            {...{\n              rendition: {\n                on: (status: string, callback: any) => {\n                  callback();\n                },\n              },\n              rect: this.state.rect,\n              pageWidth: this.state.pageWidth,\n              pageHeight: this.state.pageHeight,\n              chapterIndex: 0,\n              chapter: \"0\",\n            }}\n          />\n        )}\n        <iframe\n          src={this.state.href}\n          title={this.state.title}\n          width=\"100%\"\n          height=\"100%\"\n        >\n          Loading\n        </iframe>\n        <BackToMain /> <Toaster />\n      </div>\n    );\n  }\n}\nexport default withRouter(Viewer as any);\n","import { connect } from \"react-redux\";\nimport {\n  handleActionDialog,\n  handleReadingState,\n  handleReadingBook,\n  handleReadingEpub,\n  handleFetchNotes,\n  handleFetchBookmarks,\n  handleFetchBooks,\n} from \"../../store/actions\";\nimport Viewer from \"./component\";\nimport { stateType } from \"../../store\";\nimport { withTranslation } from \"react-i18next\";\n\nconst mapStateToProps = (state: stateType) => {\n  return {\n    isOpenActionDialog: state.book.isOpenActionDialog,\n    currentBook: state.book.currentBook,\n    isReading: state.book.isReading,\n  };\n};\nconst actionCreator = {\n  handleReadingState,\n  handleReadingBook,\n  handleReadingEpub,\n  handleActionDialog,\n  handleFetchNotes,\n  handleFetchBookmarks,\n  handleFetchBooks,\n};\nexport default connect(\n  mapStateToProps,\n  actionCreator\n)(withTranslation()(Viewer as any));\n","import React from \"react\";\nimport \"./manager.css\";\nimport { RedirectProps, RedirectState } from \"./interface\";\nimport { Trans } from \"react-i18next\";\nimport { getParamsFromUrl } from \"../../utils/syncUtils/common\";\nimport copy from \"copy-text-to-clipboard\";\nimport { withRouter } from \"react-router-dom\";\nimport StorageUtil from \"../../utils/serviceUtils/storageUtil\";\nimport Lottie from \"react-lottie\";\nimport animationSuccess from \"../../assets/lotties/success.json\";\nimport toast, { Toaster } from \"react-hot-toast\";\nconst successOptions = {\n  loop: false,\n  autoplay: true,\n  animationData: animationSuccess,\n  rendererSettings: {\n    preserveAspectRatio: \"xMidYMid slice\",\n  },\n};\n\nclass Redirect extends React.Component<RedirectProps, RedirectState> {\n  timer!: NodeJS.Timeout;\n  constructor(props: RedirectProps) {\n    super(props);\n    this.state = {\n      isAuthed: false,\n      isError: false,\n      isCopied: false,\n      token: \"\",\n    };\n  }\n  handleFinish = () => {\n    this.props.handleLoadingDialog(false);\n    alert(\"数据恢复成功\");\n  };\n  showMessage = (message: string) => {\n    toast(this.props.t(message));\n  };\n  componentDidMount() {\n    //判断是否是获取token后的回调页面\n    let url = document.location.href;\n    if (document.location.hash === \"#/\") {\n      this.props.history.push(\"/manager/home\");\n    }\n    if (url.indexOf(\"error\") > -1) {\n      this.setState({ isError: true });\n      return false;\n    }\n    if (url.indexOf(\"code\") > -1) {\n      let params: any = getParamsFromUrl();\n      this.setState({ token: params.code });\n      this.setState({ isAuthed: true });\n      return false;\n    }\n    if (url.indexOf(\"access_token\") > -1) {\n      let params: any = getParamsFromUrl();\n      this.setState({ token: params.access_token });\n      this.setState({ isAuthed: true });\n      return false;\n    }\n  }\n\n  render() {\n    if (this.state.isError || this.state.isAuthed) {\n      return (\n        <div className=\"backup-page-finish-container\">\n          <div className=\"backup-page-finish\">\n            {this.state.isAuthed ? (\n              <Lottie options={successOptions} height={80} width={80} />\n            ) : (\n              <span className=\"icon-close auth-page-close-icon\"></span>\n            )}\n\n            <div className=\"backup-page-finish-text\">\n              <Trans>\n                {this.state.isAuthed\n                  ? \"Authorize Successfully\"\n                  : \"Authorize Failed\"}\n              </Trans>\n            </div>\n            {this.state.isAuthed ? (\n              <div\n                className=\"token-dialog-token-text\"\n                onClick={() => {\n                  copy(this.state.token);\n                  this.setState({ isCopied: true });\n                }}\n              >\n                {this.state.isCopied ? (\n                  <Trans>Copied</Trans>\n                ) : (\n                  <Trans>Copy Token</Trans>\n                )}\n              </div>\n            ) : null}\n          </div>\n        </div>\n      );\n    }\n\n    return (\n      <div className=\"manager\">\n        <div className=\"empty-page-info-container\" style={{ margin: 100 }}>\n          <div className=\"empty-page-info-main\">\n            <Trans>It seems like you're lost</Trans>\n          </div>\n          <div\n            className=\"empty-page-info-sub\"\n            onClick={() => {\n              this.props.history.push(\"/manager/home\");\n            }}\n            style={{ marginTop: 10, cursor: \"pointer\" }}\n          >\n            <Trans>Return to home</Trans>\n          </div>\n        </div>\n        <img\n          src={\n            StorageUtil.getReaderConfig(\"appSkin\") === \"night\" ||\n            (StorageUtil.getReaderConfig(\"appSkin\") === \"system\" &&\n              StorageUtil.getReaderConfig(\"isOSNight\") === \"yes\")\n              ? \"./assets/empty_light.svg\"\n              : \"./assets/empty.svg\"\n          }\n          alt=\"\"\n          className=\"empty-page-illustration\"\n        />\n        <Toaster />\n      </div>\n    );\n  }\n}\n\nexport default withRouter(Redirect);\n","import { connect } from \"react-redux\";\nimport \"./manager.css\";\nimport { stateType } from \"../../store\";\nimport { handleLoadingDialog } from \"../../store/actions\";\nimport Redirect from \"./component\";\nimport { withTranslation } from \"react-i18next\";\nconst mapStateToProps = (state: stateType) => {\n  return {};\n};\nconst actionCreator = { handleLoadingDialog };\nexport default connect(\n  mapStateToProps,\n  actionCreator\n)(withTranslation()(Redirect));\n","import React, { useEffect } from \"react\";\nimport { Route, Switch, HashRouter } from \"react-router-dom\";\nimport Manager from \"../pages/manager\";\nimport EpubReader from \"../pages/epubPage\";\nimport HtmlReader from \"../pages/htmlReader\";\nimport DjvuReader from \"../pages/djvuReader\";\nimport PDFReader from \"../pages/pdfReader\";\nimport _Redirect from \"../pages/redirect\";\nimport i18n from \"../i18n\";\nimport StorageUtil from \"../utils/serviceUtils/storageUtil\";\n\nconst Router = () => {\n  useEffect(() => {\n    const lng = StorageUtil.getReaderConfig(\"lang\");\n    if (lng) {\n      i18n.changeLanguage(lng);\n    } else {\n      if (navigator.language === \"zh-CN\" || navigator.language === \"zh-SG\") {\n        i18n.changeLanguage(\"zh\");\n      } else if (\n        navigator.language === \"zh-TW\" ||\n        navigator.language === \"zh-HK\"\n      ) {\n        i18n.changeLanguage(\"cht\");\n      } else if (navigator.language.startsWith(\"ru\")) {\n        i18n.changeLanguage(\"ru\");\n      } else if (navigator.language.startsWith(\"fr\")) {\n        i18n.changeLanguage(\"fr\");\n      } else if (navigator.language.startsWith(\"es\")) {\n        i18n.changeLanguage(\"es\");\n      } else if (navigator.language.startsWith(\"pt\")) {\n        i18n.changeLanguage(\"ptBR\");\n      } else if (navigator.language.startsWith(\"fa\")) {\n        i18n.changeLanguage(\"fa\");\n      } else {\n        i18n.changeLanguage(\"en\");\n      }\n    }\n  }, []);\n  return (\n    <HashRouter>\n      <Switch>\n        <Route component={Manager} path=\"/manager\" />\n        <Route component={EpubReader} path=\"/epub\" />\n        <Route component={DjvuReader} path=\"/djvu\" />\n        <Route component={HtmlReader} path=\"/mobi\" />\n        <Route component={HtmlReader} path=\"/cbr\" />\n        <Route component={HtmlReader} path=\"/cbt\" />\n        <Route component={HtmlReader} path=\"/cbz\" />\n        <Route component={HtmlReader} path=\"/azw3\" />\n        <Route component={HtmlReader} path=\"/txt\" />\n        <Route component={HtmlReader} path=\"/docx\" />\n        <Route component={HtmlReader} path=\"/md\" />\n        <Route component={HtmlReader} path=\"/rtf\" />\n        <Route component={HtmlReader} path=\"/fb2\" />\n        <Route component={HtmlReader} path=\"/html\" />\n        <Route component={HtmlReader} path=\"/htm\" />\n        <Route component={HtmlReader} path=\"/xml\" />\n        <Route component={HtmlReader} path=\"/xhtml\" />\n        <Route component={HtmlReader} path=\"/href\" />\n        <Route component={PDFReader} path=\"/pdf\" />\n        <Route component={_Redirect} path=\"/\" />\n      </Switch>\n    </HashRouter>\n  );\n};\n\nexport default Router;\n","import GA from \"electron-google-analytics\";\nimport * as pkg from \"../../../package.json\";\n\nconst isDevelopment = process.env.NODE_ENV === \"development\";\n\ninterface EvOptions {\n  evLabel?: any;\n  evValue?: any;\n}\n\nconst hostname = \"https://reader.960960.xyz\";\n\nclass Analytics {\n  private readonly ga: any;\n\n  private clientId: any;\n\n  constructor() {\n    this.ga = new GA(\"UA-149740367-3\", { debug: isDevelopment });\n\n    this.ga.set(\"version\", (pkg as any).version);\n  }\n\n  public getClientId(callback: any) {\n    if (this.clientId) {\n      callback(this.clientId);\n    }\n    var macaddress = window.require(\"macaddress\");\n    macaddress.one((err: any, mac: string) => {\n      this.clientId = mac;\n      callback(mac);\n    });\n  }\n\n  public async pageView(url: string, title?: string) {\n    this.getClientId(async (clientId: any) => {\n      try {\n        await this.ga.pageview(hostname, url, title, 1, clientId);\n      } catch (e) {\n        console.error(e);\n      }\n    });\n  }\n\n  public async event(evCategory: string, evAction: string, options: EvOptions) {\n    this.getClientId(async (clientId: any) => {\n      try {\n        await this.ga.event(evCategory, evAction, {\n          ...options,\n          clientID: clientId,\n        });\n      } catch (e) {\n        console.error(e);\n      }\n    });\n  }\n\n  public async exception(exDesc: string, exFatal: any) {\n    this.getClientId(async (clientId: any) => {\n      try {\n        await this.ga.exception(exDesc, exFatal);\n      } catch (e) {\n        console.error(e);\n      }\n    });\n  }\n  public removeScript() {\n    let elem = document.getElementById(\"analytic\");\n    if (!elem || !elem.parentNode) return;\n    elem.parentNode.removeChild(elem);\n  }\n}\n\nexport default new Analytics();\n","import { isElectron } from \"react-device-detect\";\nimport StorageUtil from \"./storageUtil\";\n\nexport const initTheme = () => {\n  const style = document.createElement(\"link\");\n  style.rel = \"stylesheet\";\n  let isNight = false;\n  if (isElectron) {\n    const { ipcRenderer } = window.require(\"electron\");\n    isNight = ipcRenderer.sendSync(\"system-color\");\n  } else {\n    isNight =\n      window.matchMedia &&\n      window.matchMedia(\"(prefers-color-scheme: dark)\").matches;\n  }\n  StorageUtil.setReaderConfig(\"isOSNight\", isNight ? \"yes\" : \"no\");\n  if (\n    StorageUtil.getReaderConfig(\"appSkin\") === \"night\" ||\n    (StorageUtil.getReaderConfig(\"appSkin\") === \"system\" &&\n      StorageUtil.getReaderConfig(\"isOSNight\") === \"yes\")\n  ) {\n    style.href = \"./assets/styles/dark.css\";\n  } else {\n    style.href = \"./assets/styles/default.css\";\n  }\n  document.head.appendChild(style);\n};\nexport const initSystemFont = () => {\n  if (StorageUtil.getReaderConfig(\"systemFont\")) {\n    let body = document.getElementsByTagName(\"body\")[0];\n    body.setAttribute(\n      \"style\",\n      \"font-family:\" + StorageUtil.getReaderConfig(\"systemFont\") + \"!important\"\n    );\n  }\n};\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./assets/styles/reset.css\";\nimport \"./assets/styles/global.css\";\nimport \"./assets/styles/style.css\";\nimport \"react-tippy/dist/tippy.css\";\nimport { Provider } from \"react-redux\";\nimport \"./i18n\";\nimport store from \"./store\";\nimport Router from \"./router/index\";\nimport StyleUtil from \"./utils/readUtils/styleUtil\";\nimport { isElectron } from \"react-device-detect\";\nimport { dropdownList } from \"./constants/dropdownList\";\nimport StorageUtil from \"./utils/serviceUtils/storageUtil\";\nimport ga from \"./utils/serviceUtils/analytics\";\nimport { initSystemFont, initTheme } from \"./utils/serviceUtils/launchUtil\";\ninitTheme();\ninitSystemFont();\nReactDOM.render(\n  <Provider store={store}>\n    <Router />\n  </Provider>,\n  document.getElementById(\"root\")\n);\n\nif (isElectron && StorageUtil.getReaderConfig(\"isDisableAnalytics\") !== \"yes\") {\n  ga.event(\"Client\", \"show\", {\n    evLabel: \"startup\",\n  });\n} else if (StorageUtil.getReaderConfig(\"isDisableAnalytics\") === \"yes\") {\n  ga.removeScript();\n}\nif (isElectron) {\n  const fontList = window.require(\"font-list\");\n  fontList.getFonts({ disableQuoting: true }).then((result) => {\n    if (!result || result.length === 0) return;\n    dropdownList[0].option = result;\n    dropdownList[0].option.push(\"Built-in font\");\n  });\n}\nStyleUtil.applyTheme();\n"],"sourceRoot":""}