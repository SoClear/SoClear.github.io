# 2.1 进程与线程

## 2.1.8 本节习题精选

02.下列关于线程的叙述中，正确的是（）。  
A.线程包含CPU现场，可以独立执行程序  
B.每个线程有自己独立的地址空间  
C.进程只能包含一个线程  
D.线程之间的通信必须使用系统调用函数

09.下列关于进程和程序的叙述中，错误的是（）。  
A.一个进程在其生命周期中可执行多个程序  
B.一个进程在同一时刻可执行多个程序  
C.一个程序的多次运行可形成多个不同的进程  
D.一个程序的一次执行可产生多个进程

10.下列选项中，导致创建新进程的操作是（）。  
I.用户登陆  
II.高级调度发生时  
III.操作系统响应用户提出的请求  
IV.用户打开了一个浏览器程序  
A.仅I和IV  
B.仅I和IV  
C.I、II和IV  
D.全部

26.下列几种关于进程的叙述，（）最不符合操作系统对进程的理解。  
A.进程是在多程序环境中的完整程序  
B.进程可以由程序、数据和PCB描述  
C.线程（Thread）是一种特殊的进程  
D.进程是程序在一个数据集合上的运行过程，它是系统进行资源分配和调度的一个独立单元

27.若一个进程实体由PCB、共享正文段、数据堆段和数据栈段组成，请指出下列C语言程
序中的内容及相关数据结构各位于哪一段中。  
I.全局赋值变量（）  
II.未赋值的局部变量（）  
III.函数调用实参传递值（）  
IV.用malloc（）要求动态分配的存储区（）  
V.常量值（如1995、“string”）（）  
VI.进程的优先级（）  
A. PCB  
B.正文段  
C.堆段  
D.栈段

29.PCB是进程存在的唯一标志，下列（）不属于PCB。  
A.进程ID  
B.CPU状态  
C.堆栈指针  
D.全局变量

30.进程控制块（PCB）是进程的重要组成部分，PCB中不应该包括（）。  
A.进程标识符  
B.处理器状态信息  
C.进程状态  
D.互斥信号量

39.下列选项中，（）不是线程的优点。  
A.提高系统并发性  
B.节约系统资源  
C.便于进程通信  
D.增强进程安全性

46.（）必会引起进程切换。  
A.一个进程创建后，进入就绪态  
B.一个进程从运行态变为就绪态  
C.一个进程从阻塞态变为就绪态  
D.以上答案都不对

52.在内核级线程相对于用户级线程的优点的如下描述中，错误的是（）  
A同一进程内的线程切换，系统开销小  
B.当内核线程阻塞时，CPU将调度同一进程中的其他内核线程执行  
C.内核级线程的程序实体可以在内核态运行  
D.对多处理器系统，核心可以同时调度同一进程的多个线程并行运行

55.下列选项中，可能导致用户级线程切换的事件是（）。  
A.系统调用  
B. I/O 请求  
C.异常处理  
D.线程同步

66.【2019统考真题】下列选项中，可能将进程唤醒的事件是（）。  
I. I/O 结束  
II.某进程退出临界区  
III.当前进程的时间片用完  
A. 仅 I  
B. 仅III  
C. 仅I、II  
D. I、II、III

68.【2020统考真题】下列关于父进程与子进程的叙述中，错误的是（）  
A父进程与子进程可以并发执行  
B父进程与子进程共享虚拟地址空间  
C.父进程与子进程有不同的进程控制块  
D.父进程与子进程不能同时使用同一临界资源

71.【2023统考真题】下列操作完成时，导致CPU从内核态转为用户态的是（）。  
A.阻塞进程  
B.执行CPU调度  
C.唤醒进程  
D.执行系统调用

72.【2023统考真题】下列由当前线程引起的事件或执行的操作中，可能导致该线程由执行态变为就绪态的是（）。  
A.键盘输入  
B.缺页异常  
C主动出让CPU  
D.执行信号量的 wait() 操作

## 2.1.9 答案与解析

02.A 线程的CPU现场指的是线程在运行时所需的一组寄存器的值，包括程序计数器、状态寄 存器、通用寄存器和指针等。当线程切换时，操作系统会保存当前线程的CPU现场，并恢 复下一个线程的CPU现场，以保证线程的正确执行。线程是CPU调度的基本单位，当然可以 独立执行程序，A正确。线程没有自已独立的地址空间，它共享真所属进程的空间，B错误。 进程可以创建多个线程，C错误。与进程之间线程的通信可以直接通过它们共享的存储空间，  D错误。

09.B 一个进程可以顺序地执行一个或多个程序，只要在执行过程中改变其CPU状态和内存空间 即可，但不能同时执行多个程序，B错误，A正确。一个程序可以对应多个进程，即多个进程可  以行同一个程序。例如，同一个文本编辑器可以被多个用户或多个窗口司时运行，每次运行者 形成一个新进程。一个程序在执行过程中也可产生多个进程。例如，一个程序可以通过系统调用  fork()或create()来创建子进程，从而实现并发处理或分布式计算。C和D正确。

10.D 用户登录时，操作系统会为用户创建一个登录进程，用于验证用户身份和提供用户界面。高 级调度即作业调度，会从后备队列上选择一个作业调入内存，并为之创建相应的进程。操作系统 响应用户提出的请求时，通常会为用户创建一个子进程，用于执行用户指定的任务或程序。用户 打开一个浏览器程序时，也是一种操作系统响应用户请求的情况，同样会创建一个新进程。

26.A  进程是一个独立的运行单位, 也是操作系统进行资源分配和调度的基本单位,它包括PCB、程序和数据以及执行栈区,仅仅说进程是在多程序环境下的完整程序是不合适的, 因为程序是静  态的,它以文件形式存放于计算机硬盘内,而进程是动态的。

27.B,D.D.C.B. A  
C 语言编写的程序在使用内存时一般分为三个段,它们一般是正文段 （代码和赋值数据段）、数据堆段和数据栈段。二进制代码和常量存放在正文段,动态分配的存储区在数据堆段,临时使用的变量在数据栈段。由此,我们可以确定全局赋值变量在正文段赋值数据段,未赋值的局部变量和实参传递在栈段,动态内存分配在堆段, 常量在正文段,进程的优先级只能在 PCB 内。

29.D  进程实体主要是代码、数据和 PCB。因此, 要清楚了解 PCB 内所含的数据结构内容,主要有四大类：进程标志信息、进程控制信息、进程资源信息、CPU 现场信息。由上述可知, 全局变  量与 PCB 无关,它只与用户代码有关。

30.D  PCB 是操作系统中用于管理和控制进程的数据结构,它包含进程的基本信息, 如进程标识符进程状态、程序计数器、寄存器、内存分配情況、打开文件列表、进程优先级等。PCB 中不应该包括互斥信号量,互斥信号量是一种用于实现进程同步和互斥的工具,它不是进程本身的属性。互斥信号量通常在存储在内核或共享内存中。而不存储在 PCB 中

39.D  线程的优点有提高系统并发性、节约系统资源、便于进程通信等,但线程并不能增强进程安全性,因为线程共享进程的地址空间和资源, 若一个线程出错,则可能影响整个进程的运行。

46.B  进程切换是指 CPU 调度不同的进程执行,当一个进程从运行态变为就绪态时,CPU 调度另一个进程执行, 引起进程切换。

52.A  在内核级线程中,同一进程中的线程切换, 需要从用户态转到核心态进行, 系统开销较大A 错误。CPU 调度是在内核中进行的, 在内核级线程中,调度是在线程一级进行的, 因此内核可以同时调度同一进程的多个线程在多 CPU 上并行运行 （用户级线程则不行）, B 正确、D 正确。内核级线程可以在内核态执行 系统调用子程序, 直接利用系统调用为它服务,因此C正确。注意用户级线程是在用户空间中实现的, 不能直接利用 系统调用获得内核的服务,当用户级线程要获得内核服务时,必须借助于操作系统的帮助,因此用户级线程只能在用户态运行。

55.D  本题可用排除法。用户级线程的切换是由应用程序自己控制的, 不需要操作系统的干预, 操作系统感受不到用户级线程的存在。因此,系统调用、I/O 请求和异常处理这些涉及内核态的事件都不会导致用户级线程切换,但会导致内核级线程切换。线程同步是指多个线程之间协调执行顺序的机制, 如互斥锁、信号量、条件变量等。当一个线程在等待同步条件时, 应用程序可以选择切换到另一个就绪的用户级线程,以提高 CPU 的利用率。

66.C  当被阻塞进程等待的某资源 （不包括 CPU） 可用时, 进程将被唤醒。I/O 结束后, 等待该 I/O 结束而被阻塞的有关进程会被喚醒,I正确; 某进程退出临界区后, 之前因需要进入该临界区而被阻塞的有关进程会被唤醒, 且 II 正确; 当前进程的时间片用完后进入就绪队列等待重新调度,优先级最高的进程获得 CPU 资源从就绪态变成执行态, III 错误。

68.B  父进程与子进程当然可以并发执行,A正确。父进程可与子进程共享一部分资源,但不能共享虚拟地址空闻, 在创建子进程时, 会为子进程分配资源, 如虚拟地址空间等,B 错误。临界资源一次只能为一个进程所用, D 正确。进程控制块 (PCB) 是进程存在的唯一标志, 每个进程都有自己的 PCB, C 正确。

71.D  操作系统通过执行软中断指令陷入内核态执行系统调用,系统调用执行完成后, 恢复被中断的进程或设置新进程的 CPU 现场, 然后返回被中断进程或新进程。只有系统调用是用户进程调用内核功能,CPU 从用户态切换到内核态, 执行完后再返回到用户态。A、B、C 项的操作都是在内核态进行的, 执行前后都可能处在内核态,只有中断返回时才切换为用户态。

72.C  在等待键盘输入的操作中,当前线程处于阻塞态,键盘输入完成后,再调出相应的中断服务程序进行处理,由中断服务程序负责喚醒当前线程, A 错误。当线程检测到缺页异常时, 会调用缺页异常处理程序从外存调入缺失的页面, 线程状态从执行态转为阻塞态, B 错误。当线程的时间片用完后, 主动放弃 CPU, 此时若线程还未执行完, 就进入就绪队列等待下次调度, 此时线程状态从执行态转为就绪态, C 正确。线程执行 wait（）后, 若成功获取资源, 则线程状态不变,若未能获取资源, 则线程进入阻塞态, D错误。
