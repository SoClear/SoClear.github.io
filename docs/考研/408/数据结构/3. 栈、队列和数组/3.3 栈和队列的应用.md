# 3.3 栈和队列的应用

## 3.3.2 栈在表达式求值中的应用

中缀表达式转后缀表达式的过程:

在计算机中, 中缀表达式转后缀表达式时需要借助一个栈, 用于保存暂时还不能确定运算顺序的运算符。从左到右依次扫描中缀表达式中的每一项, 具体转化过程如下:

1) 遇到操作数。直接加入后缀表达式。

2) 遇到界限符。若为 “ (”, 则直接入栈; 若为 “) ”, 则依次弹出栈中的运算符, 并加入后缀表达式, 直到弹出 “ ( ” 为止。注意, “ ( ” 直接删除, 不加入后缀表达式。

3) 遇到运算符。若其优先级高于除 “ (” 外的栈顶运算符, 则直接入栈。否则, 从栈顶开始, 依次弹出栈中优先级高于或等于当前运算符的所有运算符, 并加入后缀表达式, 直到遇到一个优先级低于它的运算符或遇到 “ (” 时为止, 之后将当前运算符入栈。

按上述方法扫描所有字符后, 将栈中剩余运算符依次弹出, 并加入后缀表达式。

## 3.3.6 本节试题精选

06 设有如下递归函数，则计算 F(8) 需要调用该递归函数的次数为（ ）  

```c
int func(int x) {
    if (x<=3) return 2;
    else return func(x-2)+func(x-4);
}
```

A. 7 B.8 C.9 D.10

16 【2016 统考真题】设有如下图所示的火车车轨,入口和出口之间有 N 条轨道,列车的行进方向均为从左至右, 列车可驶入任意一条轨道。现有编号为 1 ~ 9 的 9 列列车, 驶入的次序依次是 8,4,2,5,3,9,1,6,7 。若期望驶出的次序依次为 1 ~ 9 ,则 N 至少是 ( )。

![轨道图](3.3_1.jpg)

A. 2 B. 3 C. 4 D. 5

## 3.3.7 答案与解析

06 如图  

```txt
             F(8)
            /   \
        F(6)    F(4)
        / \     /  \
    F(4)  F(2) F(2) F(0)
    /   \
F(2)   F(0)
```

递归函数 F() 调用的次数为 9 。（F(8)也算一次调用）

16 C

根据题意: 入队顺序为 8,4,2,5,3,9,1,6,7 ,出队顺序为 1~9 。入口和出口之间有多个队列 ( n 条轨道),且每个队列 (轨道) 可容纳多个元素 (多列列车),为便于区分,队列用字母编号。 分析如下: 显然先入队的元素必须小于后入队的元素 (否则, 若 8 和 4 入同一个队列, 8 在 4 前面,则出队时也只能 8 在 4 前面),这样 8 入队列 A,4 入队列 B,2 入队列 C,5 入队列 B (按照前述原则 “大的元素在小的元素后面” 也可将 5 入队列 C ,但这时剩下的元素 3 就必须放入一个新的队列中, 无法确保 “至少”), 3 入队列 C, 9 入队列 A, 这时共占了 3 个队列, 后面还有元素 1, 直接再用一个新的队列 D, 1 从队列 D 出队后, 剩下的元素 6 和 7 或入队列 B, 或入队列 C 。综上,共占用了 4 个队列。当然还有其他的入队、出队情况,请读者自己推演,但要确保满足: ①队列中后面的元素大于前面的元素; ②确保占用最少（即满足题意中“至少”）的队列。
